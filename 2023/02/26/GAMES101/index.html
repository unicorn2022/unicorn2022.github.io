<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>GAMES101 | 华风夏韵</title><meta name="author" content="华丰夏"><meta name="copyright" content="华丰夏"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="GAMES101 学习笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="GAMES101">
<meta property="og:url" content="https://hzoi-unicorn.top/2023/02/26/GAMES101/index.html">
<meta property="og:site_name" content="华风夏韵">
<meta property="og:description" content="GAMES101 学习笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/unicorn2022/Pictures/main/img/avatar.png">
<meta property="article:published_time" content="2023-02-26T10:18:00.000Z">
<meta property="article:modified_time" content="2023-07-22T11:42:43.260Z">
<meta property="article:author" content="华丰夏">
<meta property="article:tag" content="GAMES系列课程">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/unicorn2022/Pictures/main/img/avatar.png"><link rel="shortcut icon" href="https://raw.githubusercontent.com/unicorn2022/Pictures/main/img/favicon.png"><link rel="canonical" href="https://hzoi-unicorn.top/2023/02/26/GAMES101/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="baidu-site-verification" content="codeva-PpLfvQYdq5"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 华丰夏","link":"链接: ","source":"来源: 华风夏韵","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'GAMES101',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2023-07-22 19:42:43'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/background.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/img/avatar.png" onerror="onerror=null;src='https://raw.githubusercontent.com/unicorn2022/Pictures/main/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">14</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> 分享</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/resources/"><i class="fa-fw fa fa-book"></i><span> 资源</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://raw.githubusercontent.com/unicorn2022/Pictures/main/img/default_top_img.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="华风夏韵"><span class="site-name">华风夏韵</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> 分享</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/resources/"><i class="fa-fw fa fa-book"></i><span> 资源</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">GAMES101</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-02-26T10:18:00.000Z" title="发表于 2023-02-26 18:18:00">2023-02-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-07-22T11:42:43.260Z" title="更新于 2023-07-22 19:42:43">2023-07-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/GAMES%E7%B3%BB%E5%88%97%E8%AF%BE%E7%A8%8B/">GAMES系列课程</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">17.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>65分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="GAMES101"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></p>
<h1 id="第00课-VS环境配置"><a href="#第00课-VS环境配置" class="headerlink" title="第00课    VS环境配置"></a>第00课    VS环境配置</h1><p><strong>库文件的安装</strong></p>
<p><a target="_blank" rel="noopener" href="https://gitlab.com/libeigen/eigen/-/archive/3.4.0/eigen-3.4.0.zip"><strong>Eigen库下载</strong></a>：解压路径如下</p>
<blockquote>
<p><code>D:\Program\Library\eigen-3.4.0</code></p>
</blockquote>
<p><strong>opencv库下载</strong>：解压路径如下</p>
<blockquote>
<p><code>D:\Program\Library\opencv</code></p>
</blockquote>
<p><strong>将opencv添加到环境变量中</strong></p>
<p>在<strong>Path</strong>中添加：</p>
<blockquote>
<p><code>D:\Program\Library\opencv\opencv\build\x64\vc14\bin</code></p>
<p><code>D:\Program\Library\opencv\opencv\build\x64\vc15\bin</code></p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226182328400.png" alt="image-20230226182328400" style="zoom:80%;" /></p>
<p><strong>修改VS的项目设置</strong></p>
<ol>
<li><p>【VC++目录】</p>
<ol>
<li><p>【包含目录】：添加如下项</p>
<blockquote>
<p><code>D:\Program\Library\eigen-3.4.0\Eigen</code></p>
<p><code>D:\Program\Library\opencv\opencv\build\include</code></p>
</blockquote>
</li>
<li><p>【库目录】：添加如下项</p>
<blockquote>
<p><code>D:\Program\Library\opencv\opencv\build\x64\vc14\lib</code></p>
</blockquote>
</li>
</ol>
</li>
<li><p>【C/C++】【常规】【附加包含目录】：添加如下项</p>
<blockquote>
<p><code>D:\Program\Library\opencv\opencv\build\include</code></p>
</blockquote>
</li>
<li><p>【链接器】【输入】【附加依赖项】：添加如下项</p>
<ol>
<li>带d的为Debug环境，不带d的为Release环境</li>
</ol>
<blockquote>
<p><code>opencv_world460d.lib</code></p>
</blockquote>
</li>
<li><p>将所有代码中，有关Eigen库的引用，修改为：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Eigen&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>【配置属性】【调试】【命令参数】中，可以输入传递给main函数的参数</p>
<ol>
<li>如作业3中，需要输入的是<code>./Rasterizer output.png phong</code></li>
<li>那么我们就可以在此输入<code>output.png phong</code></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/2ccaa721e75c48ebb38a0a55662c518d.png" alt="img" style="zoom:80%;" /></p>
</li>
</ol>
<p><strong>VirtualBox挂载</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mount -t vboxsf Share share_dir</span><br></pre></td></tr></table></figure>
<h1 id="第01课-计算机图形学概览"><a href="#第01课-计算机图形学概览" class="headerlink" title="第01课    计算机图形学概览"></a>第01课    计算机图形学概览</h1><ol>
<li><p><strong>光栅化</strong>：将三维空间的几何形体显示在屏幕上</p>
</li>
<li><p><strong>实时</strong>：每秒钟能够生成30幅画面/30帧/30fps；否则称为离线</p>
</li>
<li><p><strong>计算机图形学</strong> 与 <strong>计算机视觉</strong> 的区别：</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230223153108705.png" alt="image-20230223153108705" style="zoom:80%;" /></p>
</li>
</ol>
<h1 id="第02课-线性代数复习"><a href="#第02课-线性代数复习" class="headerlink" title="第02课    线性代数复习"></a>第02课    线性代数复习</h1><h2 id="2-1-向量点乘"><a href="#2-1-向量点乘" class="headerlink" title="2.1    向量点乘"></a>2.1    向量点乘</h2><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230223163818522.png" alt="image-20230223163818522" style="zoom:80%;" /></p>
<h3 id="2-1-1-定义"><a href="#2-1-1-定义" class="headerlink" title="2.1.1    定义"></a>2.1.1    定义</h3><script type="math/tex; mode=display">
\begin{aligned}
\vec{a}·\vec{b}&=||\vec{a}||*||\vec{b}||*\cos\theta \\
               &=x_a*x_b+y_a*y_b+z_a*z_b\\
\end{aligned}</script><h3 id="2-1-2-性质"><a href="#2-1-2-性质" class="headerlink" title="2.1.2    性质"></a>2.1.2    性质</h3><ol>
<li>$\vec{a}·\vec{b}=\vec{b}·\vec{a}$</li>
<li>$\vec{a}·(\vec{b}+\vec{c})=\vec{a}·\vec{b}+\vec{a}·\vec{c}$</li>
<li>$(k\vec{a})·\vec{b}=\vec{a}·(k\vec{b})=k(\vec{a}·\vec{b})$</li>
</ol>
<h3 id="2-1-3-应用"><a href="#2-1-3-应用" class="headerlink" title="2.1.3    应用"></a>2.1.3    应用</h3><ol>
<li><p>计算夹角：$\cos\theta=\frac{\vec{a}·\vec{b}}{||\vec{a}||*||\vec{b}||}$</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220810170049692.png" alt="image-20220810170049692" style="zoom: 67%;" /></p>
</li>
<li><p>计算投影：$||\vec{b}<em>⊥||=||\vec{b}||\cos\theta$，$\vec{b}</em>⊥=(||\vec{b}||\cos\theta)\ \hat a$</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220810170106422.png" alt="image-20220810170106422" style="zoom: 67%;" /></p>
</li>
<li><p>将$\vec{b}$在$\vec{a}$方向分解：$\vec{b}=\vec{b}<em>⊥+(\vec{b}-\vec{b}</em>⊥)$</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220810170343996.png" alt="image-20220810170343996" style="zoom: 67%;" /></p>
</li>
<li><p>向量之间的方向</p>
<ol>
<li>$\vec{a}$与$\vec{b}$方向基本一致：$\hat{a}·\hat{b} &gt; 0$，越接近1，夹角越接近0°</li>
<li>$\vec{a}$与$\vec{b}$方向基本相反：$\hat{a}·\hat{b} &lt; 0$，越接近-1，夹角越接近180°</li>
<li>$\vec{a}$与$\vec{b}$垂直：$\hat{a}·\hat{b}=0$</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220810170534209.png" alt="image-20220810170534209" style="zoom: 67%;" /></p>
</li>
</ol>
<h2 id="2-2-向量叉乘"><a href="#2-2-向量叉乘" class="headerlink" title="2.2    向量叉乘"></a>2.2    向量叉乘</h2><h3 id="2-2-1-定义"><a href="#2-2-1-定义" class="headerlink" title="2.2.1    定义"></a>2.2.1    定义</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220810171343721.png" alt="image-20220810171343721" style="zoom: 67%;" /></p>
<p>大小：$||\vec{a}×\vec{b}||=||\vec{a}||<em>||\vec{b}||</em>\sin\theta$</p>
<p>方向：右手螺旋定则，四指方向为$\vec{a}$旋转到$\vec{b}$，拇指方向为$\vec{a}×\vec{b}$的方向</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220810172156875.png" alt="image-20220810172156875" style="zoom: 67%;" /></p>
<h3 id="2-2-2-性质"><a href="#2-2-2-性质" class="headerlink" title="2.2.2    性质"></a>2.2.2    性质</h3><p>性质：$\vec{a}×\vec{b}=-\vec{b}×\vec{a}$，可以用于建立空间直角坐标系：</p>
<ol>
<li>右手坐标系：$\vec{x}×\vec{y}=\vec{z}$</li>
<li>左手坐标系：$\vec{x}×\vec{y}=-\vec{z}$</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220810171901046.png" alt="image-20220810171901046" style="zoom: 67%;" /></p>
<h3 id="2-2-3-应用"><a href="#2-2-3-应用" class="headerlink" title="2.2.3    应用"></a>2.2.3    应用</h3><ol>
<li><p>判断左右：假设$\vec{a}、\vec{b}$均在XY平面上</p>
<ol>
<li>$\vec{b}$在$\vec{a}$的左侧：$Z_{\vec{a}×\vec{b}}&gt;0$</li>
<li>$\vec{b}$在$\vec{a}$的右侧：$Z_{\vec{a}×\vec{b}}&lt;0$</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220810172421848.png" alt="image-20220810172421848" style="zoom: 67%;" /></p>
</li>
<li><p>判断内外：假设ABCP四点共面</p>
<ol>
<li>P在▲ABC的内部：若ABC逆时针排列，则都在左面；若ABC顺时针排列，则都在右面<ol>
<li>$\vec{AP}$在$\vec{AB}$的左面</li>
<li>$\vec{BP}$在$\vec{BC}$的左面</li>
<li>$\vec{CP}$在$\vec{CA}$的左面</li>
</ol>
</li>
<li>P在▲ABC的外部：上述三个条件有一个不符合</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220810172608646.png" alt="image-20220810172608646" style="zoom: 67%;" /></p>
</li>
</ol>
<h2 id="2-3-正交基-坐标系"><a href="#2-3-正交基-坐标系" class="headerlink" title="2.3    正交基/坐标系"></a>2.3    正交基/坐标系</h2><p>正交基：Orthonormal Bases </p>
<p>坐标系：Coordinate Frames</p>
<h3 id="2-3-1-定义"><a href="#2-3-1-定义" class="headerlink" title="2.3.1    定义"></a>2.3.1    定义</h3><ol>
<li>$\vec{u}、\vec{v}、\vec{w}$均为单位向量</li>
<li>$\vec{u}、\vec{v}、\vec{w}$两两垂直</li>
<li>$\vec{w}=\vec{u}×\vec{v}$</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220810173601736.png" alt="image-20220810173601736" style="zoom: 67%;" /></p>
<h2 id="2-4-矩阵"><a href="#2-4-矩阵" class="headerlink" title="2.4    矩阵"></a>2.4    矩阵</h2><h3 id="2-4-1-矩阵乘法"><a href="#2-4-1-矩阵乘法" class="headerlink" title="2.4.1    矩阵乘法"></a>2.4.1    矩阵乘法</h3><ol>
<li>定义：设$A[m][n]<em>B[n][p]=C[m][p]$，则$C[i][j]=\sum_{k=1}^n A[i][k]</em>B[k][j]={A的第i行}·{B的第j列}$</li>
<li>性质：<ol>
<li>没有交换律</li>
<li>有结合律：$(AB)C=A(BC)$</li>
<li>有分配律：$A(B+C)=AB+AC$，$(A+B)C=AC+BC$</li>
</ol>
</li>
</ol>
<h3 id="2-4-2-矩阵转置"><a href="#2-4-2-矩阵转置" class="headerlink" title="2.4.2    矩阵转置"></a>2.4.2    矩阵转置</h3><ol>
<li><p>定义：将行列互换</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812181413411.png" alt="image-20220812181413411" style="zoom: 67%;" /></p>
</li>
<li><p>性质：$(AB)^T=B^TA^T$</p>
</li>
</ol>
<h3 id="2-4-3-单位矩阵-amp-矩阵的逆"><a href="#2-4-3-单位矩阵-amp-矩阵的逆" class="headerlink" title="2.4.3    单位矩阵&amp;矩阵的逆"></a>2.4.3    单位矩阵&amp;矩阵的逆</h3><ol>
<li><p>单位矩阵：</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812181521742.png" alt="image-20220812181521742" style="zoom:67%;" /></p>
</li>
<li><p>逆矩阵的定义：$AA^{-1}=A^{-1}A=I$</p>
</li>
<li><p>逆矩阵的性质：$(AB)^{-1}=B^{-1}A^{-1}$</p>
</li>
</ol>
<h3 id="2-4-4-矩阵-amp-向量点乘-叉乘"><a href="#2-4-4-矩阵-amp-向量点乘-叉乘" class="headerlink" title="2.4.4    矩阵&amp;向量点乘/叉乘"></a>2.4.4    矩阵&amp;向量点乘/叉乘</h3><ol>
<li><p>向量的对偶矩阵：</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230223174941145.png" alt="image-20230223174941145" style="zoom:80%;" /></p>
</li>
<li><p>矩阵&amp;向量点乘/叉乘：</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230223175008749.png" alt="image-20230223175008749" style="zoom:80%;" /></p>
</li>
</ol>
<h1 id="第03课-变换1：2维变换"><a href="#第03课-变换1：2维变换" class="headerlink" title="第03课    变换1：2维变换"></a>第03课    变换1：2维变换</h1><p>变换：</p>
<ol>
<li>Modeling：模型变换，物体在3D空间中的运动</li>
<li>Viewing：视图变换，3D到2D的投影</li>
</ol>
<h2 id="3-1-2D-Transform"><a href="#3-1-2D-Transform" class="headerlink" title="3.1    2D Transform"></a>3.1    2D Transform</h2><h3 id="3-1-1-Scale缩放变换"><a href="#3-1-1-Scale缩放变换" class="headerlink" title="3.1.1    Scale缩放变换"></a>3.1.1    Scale缩放变换</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220811125108799.png" alt="image-20220811125108799" style="zoom:80%;" /></p>
<h3 id="3-1-2-Reflectin翻转"><a href="#3-1-2-Reflectin翻转" class="headerlink" title="3.1.2    Reflectin翻转"></a>3.1.2    Reflectin翻转</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220811125051816.png" alt="image-20220811125051816" style="zoom:80%;" /></p>
<h3 id="3-1-3-Shear切变"><a href="#3-1-3-Shear切变" class="headerlink" title="3.1.3    Shear切变"></a>3.1.3    Shear切变</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220811125253629.png" alt="image-20220811125253629" style="zoom:80%;" /></p>
<h3 id="3-1-4-Rotate旋转-默认-绕原点-逆时针-旋转"><a href="#3-1-4-Rotate旋转-默认-绕原点-逆时针-旋转" class="headerlink" title="3.1.4    Rotate旋转(默认 绕原点 逆时针 旋转)"></a>3.1.4    Rotate旋转(默认 绕原点 逆时针 旋转)</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220811125758262.png" alt="image-20220811125758262" style="zoom:80%;" /></p>
<h3 id="3-1-5-Linear-Transform线性变换-矩阵"><a href="#3-1-5-Linear-Transform线性变换-矩阵" class="headerlink" title="3.1.5    Linear Transform线性变换=矩阵"></a>3.1.5    Linear Transform线性变换=矩阵</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220811130400053.png" alt="image-20220811130400053" style="zoom:80%;" /></p>
<h2 id="3-2-Homogeneous-coordinates齐次坐标"><a href="#3-2-Homogeneous-coordinates齐次坐标" class="headerlink" title="3.2    Homogeneous coordinates齐次坐标"></a>3.2    Homogeneous coordinates齐次坐标</h2><h3 id="3-2-1-Translation平移变换-notin-线性变换"><a href="#3-2-1-Translation平移变换-notin-线性变换" class="headerlink" title="3.2.1    Translation平移变换$\notin$线性变换"></a>3.2.1    Translation平移变换$\notin$线性变换</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220811130553973.png" alt="image-20220811130553973" style="zoom:80%;" /></p>
<p>矩阵表示：</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220811130633298.png" alt="image-20220811130633298" style="zoom:80%;" /></p>
<h3 id="3-2-2-齐次坐标"><a href="#3-2-2-齐次坐标" class="headerlink" title="3.2.2    齐次坐标"></a>3.2.2    齐次坐标</h3><p>添加一个维度</p>
<ol>
<li>2维点：$(x,y,1)^T$</li>
<li>2维点的补充形式：$(x,y,w)^T$与$(\frac{x}{w},\frac{y}{w},1)^T$等价</li>
<li>2维向量：$(x,y,0)^T$</li>
</ol>
<p>对于两者第3个坐标的解释：</p>
<ol>
<li>点的第三维为0，向量的第三维为1，可以满足向量的平移不变性</li>
<li>且可以满足以下性质<ol>
<li>vector + vector = vector</li>
<li>point - point = vector</li>
<li>point + vector = point</li>
<li>point + point = 两个point的中点</li>
</ol>
</li>
</ol>
<h3 id="3-2-3-Affine-Transformation仿射变换-线性变换-平移变换"><a href="#3-2-3-Affine-Transformation仿射变换-线性变换-平移变换" class="headerlink" title="3.2.3    Affine Transformation仿射变换 = 线性变换 + 平移变换"></a>3.2.3    Affine Transformation仿射变换 = 线性变换 + 平移变换</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220811131633578.png" alt="image-20220811131633578" style="zoom:80%;" /></p>
<h3 id="3-2-4-2D-Transformation"><a href="#3-2-4-2D-Transformation" class="headerlink" title="3.2.4    2D Transformation"></a>3.2.4    2D Transformation</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220811131725685.png" alt="image-20220811131725685" style="zoom:80%;" /></p>
<h3 id="3-2-5-Inverse-Transform逆变换"><a href="#3-2-5-Inverse-Transform逆变换" class="headerlink" title="3.2.5    Inverse Transform逆变换"></a>3.2.5    Inverse Transform逆变换</h3><p>逆变换 &lt;==&gt; 乘变换矩阵的逆矩阵</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220811155155659.png" alt="image-20220811155155659" style="zoom:80%;" /></p>
<h2 id="3-3-Composing-Transforms变换的组合"><a href="#3-3-Composing-Transforms变换的组合" class="headerlink" title="3.3    Composing Transforms变换的组合"></a>3.3    Composing Transforms变换的组合</h2><h3 id="3-3-1-举例"><a href="#3-3-1-举例" class="headerlink" title="3.3.1    举例"></a>3.3.1    举例</h3><ol>
<li>复杂变换可以有简单变换组合而成</li>
<li>简单变换的顺序是很有必要的 &lt;==&gt; 矩阵乘法不满足交换律</li>
</ol>
<p>变换的目标：</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220811155307566.png" alt="image-20220811155307566" style="zoom:80%;" /></p>
<p>变换的方法：先平移后旋转 or 先旋转后平移</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220811155434542.png" alt="image-20220811155434542" style="zoom:80%;" /></p>
<p>矩阵表示：<strong>从右到左</strong>进行矩阵乘法，顺序为：<strong>缩放 =&gt; 旋转 =&gt; 平移</strong></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220811155453930.png" alt="image-20220811155453930" style="zoom:80%;" /></p>
<h3 id="3-3-2-多个变换"><a href="#3-3-2-多个变换" class="headerlink" title="3.3.2    多个变换"></a>3.3.2    多个变换</h3><p>假设有一系列仿射变换$A_1,A_2,A_3…$</p>
<ol>
<li><p>可以用矩阵乘法表示：</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220811155912416.png" alt="image-20220811155912416" style="zoom:80%;" /></p>
</li>
<li><p>可以先计算$A_n…A_2·A_1$，再与列向量相乘</p>
<ol>
<li>一个3*3的矩阵可以表示任意的变换</li>
</ol>
</li>
</ol>
<h3 id="3-3-3-变换的分解"><a href="#3-3-3-变换的分解" class="headerlink" title="3.3.3    变换的分解"></a>3.3.3    变换的分解</h3><p>以C点为中心进行旋转$\alpha$度：$T(\vec{c})·R(\alpha)·T(\vec{-c})$</p>
<ol>
<li>先将图形按照$\vec{-c}$的方向进行平移：$T(\vec{-c})$</li>
<li>然后绕原点旋转$\alpha$度：$R(\alpha)$</li>
<li>然后将图形按照$\vec{c}$的方向进行平移：$T(\vec{c})$</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220811160035313.png" alt="image-20220811160035313" style="zoom:80%;" /></p>
<h1 id="第04课-变换2：三维变换"><a href="#第04课-变换2：三维变换" class="headerlink" title="第04课    变换2：三维变换"></a>第04课    变换2：三维变换</h1><h2 id="4-0-有关旋转的补充"><a href="#4-0-有关旋转的补充" class="headerlink" title="4.0    有关旋转的补充"></a>4.0    有关旋转的补充</h2><p><strong>旋转矩阵的逆 == 旋转矩阵的转置</strong> ==&gt; <strong>旋转矩阵为正交矩阵</strong></p>
<script type="math/tex; mode=display">
R_{\theta}=
\left(
\begin{matrix}
\cos\theta & -\sin\theta \\ 
\sin\theta & \cos\theta
\end{matrix}
\right) \\

R_{-\theta}=
\left(
\begin{matrix}
\cos\theta & \sin\theta \\ 
-\sin\theta & \cos\theta
\end{matrix}
\right)
=R_{\theta}^T \\

R_{-\theta}=R_\theta^{-1}</script><p>正交矩阵：$R^T=R^{-1}$</p>
<h2 id="4-1-3D-Transformations"><a href="#4-1-3D-Transformations" class="headerlink" title="4.1    3D Transformations"></a>4.1    3D Transformations</h2><h3 id="4-4-1-齐次坐标"><a href="#4-4-1-齐次坐标" class="headerlink" title="4.4.1    齐次坐标"></a>4.4.1    齐次坐标</h3><ol>
<li>3维点：$(x,y,z,1)^T$</li>
<li>3维点的补充形式：$(x,y,z,w)^T$与$(\frac{x}{w},\frac{y}{w},\frac{z}{w},1)^T$等价</li>
<li>3维向量：$(x,y,z,0)^T$</li>
</ol>
<h3 id="4-4-2-仿射变换"><a href="#4-4-2-仿射变换" class="headerlink" title="4.4.2    仿射变换"></a>4.4.2    仿射变换</h3><blockquote>
<p><strong>Affine Transform</strong>：</p>
</blockquote>
<ol>
<li>变换的顺序：先<strong>线性变换</strong>，后加<strong>平移</strong>量</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812113815122.png" alt="image-20220812113815122" style="zoom:80%;" /></p>
<h4 id="4-4-2-1-缩放"><a href="#4-4-2-1-缩放" class="headerlink" title="4.4.2.1    缩放"></a>4.4.2.1    缩放</h4><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812113919856.png" alt="image-20220812113919856" style="zoom:80%;" /></p>
<h4 id="4-4-2-2-平移"><a href="#4-4-2-2-平移" class="headerlink" title="4.4.2.2    平移"></a>4.4.2.2    平移</h4><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812113927686.png" alt="image-20220812113927686" style="zoom:80%;" /></p>
<h4 id="4-4-2-3-旋转"><a href="#4-4-2-3-旋转" class="headerlink" title="4.4.2.3    旋转"></a>4.4.2.3    旋转</h4><h5 id="4-4-2-3-1-绕坐标轴旋转"><a href="#4-4-2-3-1-绕坐标轴旋转" class="headerlink" title="4.4.2.3.1    绕坐标轴旋转"></a>4.4.2.3.1    绕坐标轴旋转</h5><ol>
<li><p>绕X轴：X不变，YZ旋转</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812114205936.png" alt="image-20220812114205936" style="zoom:80%;" /></p>
</li>
<li><p>绕Y轴：Y不变，ZX旋转</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812114238231.png" alt="image-20220812114238231" style="zoom:80%;" /></p>
</li>
<li><p>绕Z轴：Z不变，XY旋转</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812114220868.png" alt="image-20220812114220868" style="zoom:80%;" /></p>
</li>
</ol>
<h5 id="4-4-2-3-2-绕任意过原点的轴旋转"><a href="#4-4-2-3-2-绕任意过原点的轴旋转" class="headerlink" title="4.4.2.3.2    绕任意过原点的轴旋转"></a>4.4.2.3.2    绕任意过原点的轴旋转</h5><blockquote>
<p>有两种形式：欧拉角、四元数</p>
<ol>
<li>四元数：多应用于旋转的插值操作</li>
</ol>
</blockquote>
<ol>
<li><p>绕任意轴旋转：分解为<strong>欧拉角</strong></p>
<ol>
<li>将任意轴方向的旋转，分解为绕X、Y、Z轴的旋转：$R_{x,y,z}(\alpha,\beta,\gamma)$</li>
<li>$\alpha,\beta,\gamma$也被称为欧拉角</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226070451531.png" alt="image-20230226070451531" style="zoom: 80%;" /></p>
</li>
<li><p><strong>Rodrigues’ Rotation Formula 罗德里格旋转公式</strong></p>
<ol>
<li>向量<strong>v</strong>绕过原点的轴<strong>n</strong>旋转<strong>$\alpha$</strong>角</li>
<li>向量<strong>I</strong>为向量<strong>v</strong>方向的单位向量</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226070549341.png" alt="image-20230226070549341" style="zoom:80%;" /></p>
</li>
</ol>
<blockquote>
<p>推导思路：</p>
<ol>
<li><p><strong>v</strong>与<strong>n</strong>垂直时，$\vec{v’}=\cos\alpha<em>\vec{v}+\sin\alpha</em>(\vec{n}×\vec{I})$</p>
</li>
<li><p><strong>v</strong>与<strong>n</strong>不垂直时，将<strong>v</strong>分解为 垂直于<strong>n</strong>的向量<strong>v~⊥~</strong> 和平行于<strong>n</strong>的向量<strong>v~∥~</strong></p>
<ol>
<li>$\vec{v<em>∥’}=\vec{v</em>∥}=|\vec{v}|*cos&lt;\vec{v},\vec{n}&gt;=\vec{v}·\vec{n}·\vec{n}$</li>
<li>$\vec{v<em>⊥}=\vec{v}-\vec{v</em>∥}=\vec{v}-\vec{v}·\vec{n}·\vec{n}$</li>
<li>$\vec{v<em>⊥’}=\cos\alpha*\vec{v</em>⊥}+\sin\alpha*(\vec{n}×\vec{v_⊥})$</li>
<li>综上可得：$\vec{v’}=\vec{v<em>∥’}+\vec{v</em>⊥’}=\cos\alpha<em>\vec{v}+(1-\cos\alpha)</em>\vec{v}·\vec{n}·\vec{n}+\sin\alpha*(\vec{n}×\vec{v})$</li>
</ol>
</li>
<li><p>矩阵形式：$\vec{v’}=\cos\alpha<em>\vec{v}+(1-\cos\alpha)</em>\vec{v}·\vec{n}·\vec{n}+\sin\alpha*(\vec{n}×\vec{v})$$</p>
<pre><code>                    $=[\cos\alpha*\vec&#123;I&#125;+(1-\cos\alpha)*\vec&#123;n&#125;·\vec&#123;n&#125;^T+\sin\alpha*(\vec&#123;n&#125;×\vec&#123;I&#125;)]·\vec&#123;v&#125;$
</code></pre></li>
</ol>
</blockquote>
<h5 id="4-4-2-3-2-绕过任意点的任意轴旋转"><a href="#4-4-2-3-2-绕过任意点的任意轴旋转" class="headerlink" title="4.4.2.3.2    绕过任意点的任意轴旋转"></a>4.4.2.3.2    绕过任意点的任意轴旋转</h5><p>绕过任意轴<strong>n</strong>旋转<strong>$\alpha$</strong>角</p>
<ol>
<li>先将轴平移至过原点</li>
<li>然后旋转</li>
<li>最后平移回去</li>
</ol>
<h2 id="4-2-Model-amp-View-Transformation"><a href="#4-2-Model-amp-View-Transformation" class="headerlink" title="4.2    Model &amp; View Transformation"></a>4.2    Model &amp; View Transformation</h2><h3 id="4-2-1-什么是视图变换"><a href="#4-2-1-什么是视图变换" class="headerlink" title="4.2.1    什么是视图变换"></a>4.2.1    什么是视图变换</h3><ol>
<li>与照相类比：<strong>MVP</strong>变换</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">照相</th>
<th style="text-align:center">对应变换</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">找一个好的地方、人物排列</td>
<td style="text-align:center">模型变换 <strong>model</strong> transformation</td>
</tr>
<tr>
<td style="text-align:center">找一个好的角度放置摄像机</td>
<td style="text-align:center">视图变换 <strong>view</strong> transformation</td>
</tr>
<tr>
<td style="text-align:center">拍照，三维空间投影到二维平面</td>
<td style="text-align:center">投影变换 <strong>projection</strong> transformation</td>
</tr>
</tbody>
</table>
</div>
<h3 id="4-2-2-定义Camera"><a href="#4-2-2-定义Camera" class="headerlink" title="4.2.2    定义Camera"></a>4.2.2    定义Camera</h3><ol>
<li>位置<strong>Position</strong>：$\vec{e}$</li>
<li>往哪看<strong>Look-at/gaze direction</strong>：$\vec{g}$</li>
<li>向上方向<strong>Up direction</strong>：$\vec{t}$</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812123220752.png" alt="image-20220812123220752" style="zoom:80%;" /></p>
<h3 id="4-2-3-关键点：相机与物体的相对位置决定看到的图像"><a href="#4-2-3-关键点：相机与物体的相对位置决定看到的图像" class="headerlink" title="4.2.3    关键点：相机与物体的相对位置决定看到的图像"></a>4.2.3    关键点：相机与物体的相对位置决定看到的图像</h3><ol>
<li><p>只要<strong>摄像机</strong>与<strong>物体</strong>的相对位置一样，所看到的图形就是一样的</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812123524813.png" alt="image-20220812123524813"></p>
</li>
<li><p>将摄像机永远放在一个标准的位置</p>
<ol>
<li><strong>Position</strong>：原点</li>
<li><strong>Up direction</strong>：Y轴</li>
<li><strong>Look-at direction</strong>：-Z轴</li>
</ol>
</li>
<li><p>当相机变换时，将物体随着相机变换</p>
</li>
</ol>
<h3 id="4-2-4-将相机移动到标准位置"><a href="#4-2-4-将相机移动到标准位置" class="headerlink" title="4.2.4    将相机移动到标准位置"></a>4.2.4    将相机移动到标准位置</h3><ol>
<li><p>方法</p>
<ol>
<li>将$\vec{e}$平移到<strong>原点</strong></li>
<li>旋转 $\vec{g}$ 到<strong>-Z</strong>的方向</li>
<li>旋转 $\vec{t}$ 到<strong>Y</strong>的方向</li>
<li>旋转 $\vec{g}×\vec{t}$ 到<strong>X</strong>方向</li>
</ol>
</li>
<li><p>矩阵表示：设$M<em>{view}=R</em>{view}T_{view}$</p>
<ol>
<li><p>将$\vec{e}$平移到原点</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812164249448.png" alt="image-20220812164249448" style="zoom:80%;" /></p>
</li>
<li><p>旋转 $\vec{g}$ 到<strong>-Z</strong>、 $\vec{t}$ 到<strong>Y</strong>、$\vec{g}×\vec{t}$ 到<strong>X</strong>：考虑逆矩阵</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812164531901.png" alt="image-20220812164531901" style="zoom:80%;" /></p>
</li>
</ol>
</li>
</ol>
<h3 id="4-2-5-总结"><a href="#4-2-5-总结" class="headerlink" title="4.2.5    总结"></a>4.2.5    总结</h3><ol>
<li>将物体与相机一起旋转：<strong>Model Transformation ==&gt; $M_{model}$</strong></li>
<li>将相机变换到标准位置：<strong>View Transformation ==&gt; $M_{view}$</strong><ol>
<li>Position：原点</li>
<li>Up direction：Y轴</li>
<li>Look-at direction：-Z轴</li>
</ol>
</li>
</ol>
<h2 id="4-3-Projection-Transformation"><a href="#4-3-Projection-Transformation" class="headerlink" title="4.3    Projection Transformation"></a>4.3    Projection Transformation</h2><ol>
<li>正交投影 <strong>Orthographic Projection</strong>：不存在近大远小</li>
<li>透视投影 <strong>Perspective Projection</strong>：存在近大远小，平行线不再平行</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812165450522.png" alt="image-20220812165450522" style="zoom:80%;" /></p>
<h3 id="4-3-1-正交投影"><a href="#4-3-1-正交投影" class="headerlink" title="4.3.1    正交投影"></a>4.3.1    正交投影</h3><blockquote>
<p><strong>Orthographic Projection</strong>：</p>
<ol>
<li>思想：直接扔掉物体的Z坐标，然后将其移动到[-1,1]的标准范围内</li>
</ol>
</blockquote>
<ol>
<li><p>实际做法：将一个立方体$[l, r]×[b, t]×[f, n]$映射到标准立方体$[-1, 1]^3$上</p>
<ol>
<li>首先，通过<strong>平移</strong>操作，将立方体的中心移到原点</li>
<li>然后，通过<strong>缩放</strong>操作，将立方体缩放为标准立方体</li>
<li>立方体的定义：X轴$[l,r]$；Y轴$[b,t]$；Z轴$[f,n]$</li>
<li>变换之后，物体一定会有拉伸 </li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812170410007.png" alt="image-20220812170410007" style="zoom:80%;" /></p>
</li>
<li><p>变换矩阵：先平移到原点，再将$x,y,z$缩放到$2$</p>
<script type="math/tex; mode=display">
M_{ortho}=
\left(
\begin{matrix}
\frac{2}{r-l} & 0               & 0             & 0 \\
0               & \frac{2}{t-b} & 0             & 0 \\
0               & 0               & \frac{2}{n-f} & 0 \\
0               & 0               & 0             & 1 \\
\end{matrix}
\right)

\left(
\begin{matrix}
1 & 0 & 0 & -\frac{r+l}{2} \\
0 & 1 & 0 & -\frac{t+b}{2} \\
0 & 0 & 1 & -\frac{n+f}{2} \\
0 & 0 & 0 & 1 \\
\end{matrix}
\right)

=
\left(
\begin{matrix}
\frac{2}{r-l} & 0               & 0             & -\frac{r+l}{r-l} \\
0               & \frac{2}{t-b} & 0             & -\frac{t+b}{t-b} \\
0               & 0               & \frac{2}{n-f} & -\frac{n+f}{n-f} \\
0               & 0               & 0             & 1 \\
\end{matrix}
\right)</script></li>
</ol>
<h3 id="4-3-2-透视投影"><a href="#4-3-2-透视投影" class="headerlink" title="4.3.2    透视投影"></a>4.3.2    透视投影</h3><blockquote>
<p><strong>Perspective Projection</strong></p>
<ol>
<li>基础知识：$(x,y,z,1)$与$(kx,ky,kz,k)$表示同一个点，因此$(xz,yz,z^2,z)$表示的也是这个点</li>
<li>思想：将透视投影转化为正交投影$M<em>{persp-&gt;ortho}$，然后再进行正交投影变换$M</em>{ortho}$</li>
</ol>
</blockquote>
<h4 id="4-3-2-1-如何进行透视投影"><a href="#4-3-2-1-如何进行透视投影" class="headerlink" title="4.3.2.1    如何进行透视投影"></a>4.3.2.1    如何进行透视投影</h4><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812171751431.png" alt="image-20220812171751431" style="zoom:80%;" /></p>
<ol>
<li>首先，定义从相机点向外的两个平面<strong>n、f</strong>，<strong>f</strong>平面要比<strong>n</strong>平面大</li>
<li>此时就相当于<strong>f</strong>平面上的点全部投影到<strong>n</strong>平面上</li>
<li>透视投影的做法<ol>
<li>先将<strong>Frustum</strong>挤成<strong>Cuboid</strong>($n \rightarrow n，f \rightarrow f’$)，满足如下三个定义：$M_{persp-&gt;ortho}$<ol>
<li>近平面$n$永远不变</li>
<li>远平面$f$的Z值永远不变</li>
<li>远平面$f$的中心点$(0,0,f)$永远不变</li>
</ol>
</li>
<li>再进行一次正交投影：$M_{ortho}$</li>
</ol>
</li>
</ol>
<h4 id="4-3-2-2-计算矩阵-M-persp-gt-ortho"><a href="#4-3-2-2-计算矩阵-M-persp-gt-ortho" class="headerlink" title="4.3.2.2    计算矩阵$M_{persp-&gt;ortho}$"></a>4.3.2.2    计算矩阵$M_{persp-&gt;ortho}$</h4><ol>
<li><p>思路：找到变换后的点$(x’,y’,z’)$与原来的点$(x,y,z)$的对应关系</p>
</li>
<li><p>从YZ平面上看，挤压前后存在相似三角形，从而可得到$y’=\frac{n}{z}*y$</p>
<ol>
<li>同理，$x’=\frac{n}{z}*x$</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812172142284.png" alt="image-20220812172142284" style="zoom:80%;" /></p>
</li>
<li><p>齐次坐标表示</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812172516140.png" alt="image-20220812172516140" style="zoom:80%;" /></p>
</li>
<li><p>矩阵表示</p>
<p>|  由3得   | <img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812172528972.png" alt="image-20220812172528972" style="zoom:80%;" /> |<br>| :———: | :—————————————————————————————: |<br>| <strong>因此</strong> | <img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812172545755.png" alt="image-20220812172545755" style="zoom:80%;" /> |</p>
</li>
<li><p>对于矩阵的第三行(对于Z值)，有以下性质</p>
<p>|                   在近平面上的点，坐标不变                   |<br>| :—————————————————————————————: |<br>| <img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812173013770.png" alt="image-20220812173013770" style="zoom:80%;" /> |<br>| <img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812173047212.png" alt="image-20220812173047212" style="zoom:80%;" /> |<br>| <img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812173249005.png" alt="image-20220812173249005" style="zoom:80%;" /> |</p>
<p>|            在远平面上的中心点$(0,0,f)$，坐标不变             |<br>| :—————————————————————————————: |<br>| <img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812173205858.png" alt="image-20220812173205858" style="zoom:80%;" /> |</p>
<p>|                 根据两个等式，可以解出$A,B$                  |<br>| :—————————————————————————————: |<br>| <img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220812173341348.png" alt="image-20220812173341348" style="zoom:80%;" /> |</p>
</li>
<li><p>综上</p>
<script type="math/tex; mode=display">
M_{persp \rightarrow ortho}=
\left(
\begin{matrix}
n & 0 & 0   & 0 \\
0 & n & 0   & 0 \\
0 & 0 & n+f & -nf \\
0 & 0 & 1   & 0 \\
\end{matrix}
\right)</script></li>
<li><p>最后，再进行正交投影：$M<em>{persp}=M</em>{ortho}M_{persp-&gt;ortho}$</p>
</li>
</ol>
<script type="math/tex; mode=display">
M_{persp}=
\left(
\begin{matrix}
\frac{2}{r-l} & 0               & 0             & -\frac{r+l}{r-l} \\
0               & \frac{2}{t-b} & 0             & -\frac{t+b}{t-b} \\
0               & 0               & \frac{2}{n-f} & -\frac{n+f}{n-f} \\
0               & 0               & 0             & 1 \\
\end{matrix}
\right)

\left(
\begin{matrix}
n & 0 & 0   & 0 \\
0 & n & 0   & 0 \\
0 & 0 & n+f & -nf \\
0 & 0 & 1   & 0 \\
\end{matrix}
\right)

=

\left(
\begin{matrix}
\frac{2n}{r-l}    & 0              & -\frac{r+l}{r-l} & 0 \\
0                 & \frac{2n}{t-b} & -\frac{t+b}{t-b} & 0  \\
0                 & 0                 & \frac{n+f}{n-f}    & -\frac{2nf}{n-f} \\
0                 & 0                 & 1                & 0 \\
\end{matrix}
\right)</script><h4 id="4-3-3-3-对于不在近-远平面上的点"><a href="#4-3-3-3-对于不在近-远平面上的点" class="headerlink" title="4.3.3.3    对于不在近/远平面上的点"></a>4.3.3.3    对于不在近/远平面上的点</h4><script type="math/tex; mode=display">
\left(
\begin{matrix}
n & 0 & 0   & 0 \\
0 & n & 0   & 0 \\
0 & 0 & n+f & -nf \\
0 & 0 & 1   & 0 \\
\end{matrix}
\right)
\left(
\begin{matrix}
x \\
y \\
z \\
1 \\
\end{matrix}
\right)
=
\left(
\begin{matrix}
nx \\
ny \\
(n+f)z-nf \\
z \\
\end{matrix}
\right)
==>
\left(
\begin{matrix}
\frac{n}{z}x \\
\frac{n}{z}y \\
(n+f)-\frac{nf}{z} \\
1 \\
\end{matrix}
\right)</script><ol>
<li>近平面上的点$(z=n)$<ol>
<li>$z’=(n+f)-\frac{nf}{n}=n$</li>
<li>$z’=z$</li>
</ol>
</li>
<li>远平面上的点$(z=f)$<ol>
<li>$z’=(n+f)-\frac{nf}{f}=f$</li>
<li>$z’=z$</li>
</ol>
</li>
<li>不在近/远平面上的点$(f&lt;z&lt;n)$<ol>
<li>$z’=(n+f)-\frac{nf}{z}$<ol>
<li>设$n=1,f=-1,z=0.5$，则$z’=2$</li>
<li>设$n=1,f=-1,z=-0.5$，则$z’=-2$</li>
</ol>
</li>
<li>可得：若$z&lt;0$，则$z’$更靠近<strong>远平面$f$</strong>；若$z&gt;0$，则$z’$更靠近<strong>近平面$n$</strong></li>
</ol>
</li>
</ol>
<h4 id="4-3-3-4-定义视锥"><a href="#4-3-3-4-定义视锥" class="headerlink" title="4.3.3.4    定义视锥"></a>4.3.3.4    定义视锥</h4><blockquote>
<p>定义一个视锥，需要</p>
<ol>
<li>宽高比：<strong>Aspect ratio</strong></li>
<li>垂直的可视角度：<strong>Vertical Field of View</strong></li>
</ol>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220813112938428.png" alt="image-20220813112938428" style="zoom:80%;" /></p>
<ol>
<li><p><strong>Aspect ratio 纵横比</strong>：$\frac{width}{height}$</p>
</li>
<li><p><strong>field-of-view(fovY)视野</strong>：从摄像机所在位置出发，连接屏幕宽的两个中点，两条线所夹的角度</p>
</li>
<li><p>从<strong>fovY</strong>和<strong>Aspect</strong>推出<strong>l, r, b, t</strong></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220813113243520.png" alt="image-20220813113243520" style="zoom:80%;" /></p>
</li>
</ol>
<h1 id="第05课-光栅化1：三角形"><a href="#第05课-光栅化1：三角形" class="headerlink" title="第05课    光栅化1：三角形"></a>第05课    光栅化1：三角形</h1><blockquote>
<p>规范立方体 =&gt; 屏幕：<strong>Canonical Cube to Screen</strong></p>
</blockquote>
<h2 id="5-1-屏幕的定义"><a href="#5-1-屏幕的定义" class="headerlink" title="5.1    屏幕的定义"></a>5.1    屏幕的定义</h2><ol>
<li><p>像素点形成的二维数组</p>
<ol>
<li>数组的大小：分辨率<strong>Resolution</strong></li>
</ol>
</li>
<li><p>屏幕是一个典型的光栅成像设备：<strong>Raster Display</strong></p>
<ol>
<li>在德语中，raster == screen</li>
<li>rasterize == drawing onto the screen</li>
</ol>
</li>
<li><p>像素<strong>Pixel</strong>：FYL，picture element的缩写</p>
<ol>
<li>在本节课中，一个像素就是一个小的立方体，有着一个固定的颜色</li>
<li>颜色是红、绿、蓝的组合</li>
</ol>
</li>
<li><p>屏幕空间<strong>Screen Space</strong></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220813114126068.png" alt="image-20220813114126068" style="zoom:67%;" /></p>
</li>
<li><p>像素的坐标</p>
<ol>
<li>由一个整数坐标<strong>(x,y)</strong>表示，范围为<strong>(0,0) ~ (width-1, height-1)</strong></li>
<li>像素的中心在<strong>(x+0.5, y+0.5)</strong></li>
<li>屏幕的范围为<strong>(0, 0) ~ (width, height)</strong></li>
</ol>
</li>
</ol>
<h2 id="5-2-视口变换：-1-1-3-rightarrow-0-width-×-0-height"><a href="#5-2-视口变换：-1-1-3-rightarrow-0-width-×-0-height" class="headerlink" title="5.2    视口变换：$[-1,1]^3 \rightarrow [0,width]×[0,height]$"></a>5.2    视口变换：$[-1,1]^3 \rightarrow [0,width]×[0,height]$</h2><blockquote>
<p><strong>Viewport Transform</strong>，思想：</p>
<ol>
<li>忽略Z</li>
<li>变换XY坐标：$[-1,1]^2 \rightarrow [0,width]×[0,height]$</li>
</ol>
<p>此时，三维空间中的多种物体，已经变成了二维空间上的多个多边形</p>
</blockquote>
<script type="math/tex; mode=display">
M_{viewport}=
\left(
\begin{matrix}
\frac{width}{2}    & 0                    & 0    & \frac{width}{2} \\
0                & \frac{height}{2}    & 0    & \frac{height}{2} \\
0                & 0                    & 1    & 0 \\
0                & 0                    & 0    & 1
\end{matrix}
\right)</script><h2 id="5-3-现代显示原理"><a href="#5-3-现代显示原理" class="headerlink" title="5.3    现代显示原理"></a>5.3    现代显示原理</h2><ol>
<li><p>帧缓冲<strong>Frame Buffer</strong>：将内存中的一块区域映射到屏幕上，内存中的数据即为要显示的数据</p>
</li>
<li><p>液晶显示器<strong>LCD</strong>：Liquid Crystal Display， 通过液晶将光翻转</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226081745766.png" alt="image-20230226081745766" style="zoom:80%;" /></p>
</li>
<li><p>发光二极管阵列LED：</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226081945181.png" alt="image-20230226081945181" style="zoom:80%;" /></p>
</li>
<li><p>电子墨水屏：通过通电，控制每个像素的黑色/白色</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226082024437.png" alt="image-20230226082024437" style="zoom:80%;" /></p>
</li>
</ol>
<h2 id="5-4-三角形的性质"><a href="#5-4-三角形的性质" class="headerlink" title="5.4    三角形的性质"></a>5.4    三角形的性质</h2><ol>
<li>最基础的多边形，任何多边形都可以拆分成多个三角形</li>
<li>三角形三个顶点一定共面</li>
<li>可以很好的定义内部外部</li>
<li>定义三个顶点的属性后，可以轻易定义三角形内部的每个点的属性插值：重心插值</li>
</ol>
<h2 id="5-5-光栅化：三角形-gt-像素"><a href="#5-5-光栅化：三角形-gt-像素" class="headerlink" title="5.5    光栅化：三角形 =&gt; 像素"></a>5.5    光栅化：三角形 =&gt; 像素</h2><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220813121135954.png" alt="image-20220813121135954" style="zoom: 67%;" /></p>
<h3 id="5-5-1-采样法-确定像素颜色"><a href="#5-5-1-采样法-确定像素颜色" class="headerlink" title="5.5.1    采样法 确定像素颜色"></a>5.5.1    采样法 确定像素颜色</h3><blockquote>
<p><strong>Sampling</strong>：对于每一个采样点，查询函数的值</p>
</blockquote>
<ol>
<li><p>也就是函数离散化的过程</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> x = <span class="number">0</span>; x &lt; xmax; x++)</span><br><span class="line">    output[x] = <span class="built_in">f</span>(x);</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义一个函数：<strong>inside(t, x, y)</strong></p>
<script type="math/tex; mode=display">
inside(t,x,y)=\left\{
\begin{matrix}
1 & (x,y)在三角形t内\\
0 & (x,y)不在三角形t内
\end{matrix}
\right.</script><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> x = <span class="number">0</span>; x &lt; xmax; x++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> y = <span class="number">0</span>; y &lt; ymax; y++)</span><br><span class="line">        image[x][y] = <span class="built_in">inside</span>(tri, x+<span class="number">0.5</span>, y+<span class="number">0.5</span>);</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220813121848377.png" alt="image-20220813121848377" style="zoom: 67%;" /></p>
</li>
<li><p><strong>inside(t, x, y)</strong>函数的实现方法：<strong>叉乘</strong></p>
<ol>
<li><p>已知点与三角形共面，如何判断一个点是否在三角形内</p>
</li>
<li><p>按照$P_0,P_1,P_2$的顺序进行叉乘$\vec{P_0P_1}×\vec{P_0Q}、\vec{P_1P_2}×\vec{P_1Q}、\vec{P_2P_0}×\vec{P_2Q}$，三者的$Z$的正负性相同则说明$Q$在三角形内</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220813122230668.png" alt="image-20220813122230668" style="zoom: 50%;" /></p>
</li>
<li><p>边界情况：可以不做处理 or 特殊处理，在本课中，均不做处理</p>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220813122354867.png" alt="image-20220813122354867" style="zoom: 50%;" /></p>
</li>
</ol>
<h3 id="5-5-2-三角形的包围盒"><a href="#5-5-2-三角形的包围盒" class="headerlink" title="5.5.2    三角形的包围盒"></a>5.5.2    三角形的包围盒</h3><ol>
<li><p>三角形的包围盒<strong>Bounding Box</strong>：只需要考虑包围盒内的像素</p>
<ol>
<li><p>这里是轴向的<strong>AABB</strong>包围盒，因为只有XY平面的</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220813122501707.png" alt="image-20220813122501707" style="zoom:50%;" /></p>
</li>
</ol>
</li>
<li><p>也可以对每行计算 最左像素 和 最右像素</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20220813122658221.png" alt="image-20220813122658221" style="zoom:50%;" /></p>
</li>
</ol>
<h1 id="第06课-光栅化2：反走样-amp-深度缓冲"><a href="#第06课-光栅化2：反走样-amp-深度缓冲" class="headerlink" title="第06课    光栅化2：反走样&amp;深度缓冲"></a>第06课    光栅化2：反走样&amp;深度缓冲</h1><blockquote>
<p><strong>Antialiasing and Z-Buffering</strong></p>
</blockquote>
<ol>
<li><p><strong>Artifacts</strong>：瑕疵，指一切看上去不太对的地方</p>
</li>
<li><p>采样可能产生的瑕疵：</p>
<ol>
<li><p>锯齿</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226185128331.png" alt="image-20230226185128331" style="zoom: 50%;" /></p>
</li>
<li><p>摩尔纹：将左图的奇数行和奇数列删除，会产生右面的效果</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226185149464.png" alt="image-20230226185149464" style="zoom:80%;" /></p>
</li>
</ol>
</li>
<li><p>车轮效应：车轮高速逆时针旋转时，看上去好像是在顺时针旋转</p>
</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">现象</th>
<th style="text-align:center">原因</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">锯齿 Jaggies</td>
<td style="text-align:center">在空间上的采样率不足</td>
</tr>
<tr>
<td style="text-align:center">摩尔纹 Moire</td>
<td style="text-align:center">对一个图像降低采样率</td>
</tr>
<tr>
<td style="text-align:center">车轮效应 Wagon wheel effect</td>
<td style="text-align:center">在时间上的采样率不足</td>
</tr>
</tbody>
</table>
</div>
<h2 id="6-1-反走样方法：在采样之前进行过滤-模糊处理"><a href="#6-1-反走样方法：在采样之前进行过滤-模糊处理" class="headerlink" title="6.1     反走样方法：在采样之前进行过滤/模糊处理"></a>6.1     反走样方法：在采样之前进行过滤/模糊处理</h2><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226185816066.png" alt="image-20230226185816066" style="zoom:80%;" /></p>
<h3 id="6-1-1-先滤波，后采样：Aliasing"><a href="#6-1-1-先滤波，后采样：Aliasing" class="headerlink" title="6.1.1    先滤波，后采样：Aliasing"></a>6.1.1    先滤波，后采样：Aliasing</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">原始图片</th>
<th style="text-align:center">点采样</th>
<th style="text-align:center">模糊处理抗锯齿</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226185933649.png" alt="image-20230226185933649" style="zoom:80%;" /></td>
<td style="text-align:center"><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226185944079.png" alt="image-20230226185944079" style="zoom:80%;" /></td>
<td style="text-align:center"><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226185951932.png" alt="image-20230226185951932" style="zoom:80%;" /></td>
</tr>
</tbody>
</table>
</div>
<h3 id="6-1-2-先采样，后滤波：Blurred-Aliasing"><a href="#6-1-2-先采样，后滤波：Blurred-Aliasing" class="headerlink" title="6.1.2    先采样，后滤波：Blurred Aliasing"></a>6.1.2    先采样，后滤波：Blurred Aliasing</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226190155171.png" alt="image-20230226190155171" style="zoom:80%;" /></p>
<h2 id="6-2-频率域"><a href="#6-2-频率域" class="headerlink" title="6.2    频率域"></a>6.2    频率域</h2><h3 id="6-2-1-空间域-与-频率域的转换：傅里叶变换"><a href="#6-2-1-空间域-与-频率域的转换：傅里叶变换" class="headerlink" title="6.2.1    空间域 与 频率域的转换：傅里叶变换"></a>6.2.1    空间域 与 频率域的转换：傅里叶变换</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226191158596.png" alt="image-20230226191158596" style="zoom:80%;" /></p>
<ol>
<li>任何一个函数，均可以展开为多个三角函数的和</li>
<li>傅里叶变换，实际上就是将函数在不同频率域上展开</li>
</ol>
<h3 id="6-2-2-函数的频率越高，需要的采样频率越高"><a href="#6-2-2-函数的频率越高，需要的采样频率越高" class="headerlink" title="6.2.2    函数的频率越高，需要的采样频率越高"></a>6.2.2    函数的频率越高，需要的采样频率越高</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226191506715.png" alt="image-20230226191506715" style="zoom:80%;" /></p>
<h3 id="6-2-3-从频率角度理解走样"><a href="#6-2-3-从频率角度理解走样" class="headerlink" title="6.2.3    从频率角度理解走样"></a>6.2.3    从频率角度理解走样</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226191902811.png" alt="image-20230226191902811" style="zoom:80%;" /></p>
<ol>
<li>在采样频率一定时，采样两个频率不同的函数，我们无法区分这两个函数，因此会产生锯齿</li>
</ol>
<h2 id="6-3-滤波：删除一些频率的内容"><a href="#6-3-滤波：删除一些频率的内容" class="headerlink" title="6.3    滤波：删除一些频率的内容"></a>6.3    滤波：删除一些频率的内容</h2><h3 id="6-3-1-通过傅里叶变换，将图像变为频率图"><a href="#6-3-1-通过傅里叶变换，将图像变为频率图" class="headerlink" title="6.3.1    通过傅里叶变换，将图像变为频率图"></a>6.3.1    通过傅里叶变换，将图像变为频率图</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226192200644.png" alt="image-20230226192200644" style="zoom:80%;" /></p>
<ol>
<li>中心是低频区，四周是高频区</li>
<li>亮度表示当前频率包含的信息数量</li>
<li>上图的信息主要集中在低频区</li>
<li>出现两条线的原因<ol>
<li>一般情况下，傅里叶变换会将图像视为周期函数</li>
<li>对于图片来说，相当于在图像的右边再复制一份图像</li>
<li>通常情况下，图片的左右边界不会相同，因此在边界处会有剧烈的变换</li>
<li>分析图像内部的内容时，一般忽略这两条线</li>
</ol>
</li>
</ol>
<h3 id="6-3-2-高通滤波"><a href="#6-3-2-高通滤波" class="headerlink" title="6.3.2    高通滤波"></a>6.3.2    高通滤波</h3><blockquote>
<p><strong>高通滤波 ==&gt; 只保留图像的高频部分 ==&gt; 图像内容的边界</strong></p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226192757970.png" alt="image-20230226192757970" style="zoom:80%;" /></p>
<h3 id="6-3-3-低通滤波"><a href="#6-3-3-低通滤波" class="headerlink" title="6.3.3    低通滤波"></a>6.3.3    低通滤波</h3><blockquote>
<p><strong>低通滤波 ==&gt; 只保留图像的低频部分 ==&gt; 对图像的模糊处理</strong></p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226192911384.png" alt="image-20230226192911384" style="zoom:80%;" /></p>
<h3 id="6-3-4-过滤高频和低频部分"><a href="#6-3-4-过滤高频和低频部分" class="headerlink" title="6.3.4    过滤高频和低频部分"></a>6.3.4    过滤高频和低频部分</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226193200309.png" alt="image-20230226193200309" style="zoom:80%;" /></p>
<h2 id="6-4-滤波-平均-卷积"><a href="#6-4-滤波-平均-卷积" class="headerlink" title="6.4    滤波 = 平均 = 卷积"></a>6.4    滤波 = 平均 = 卷积</h2><blockquote>
<p><strong>Filter = Averaging = Convolution</strong></p>
<ol>
<li>滤波器覆盖信号的某些部分时，将对应位做点乘：卷积操作</li>
<li>实际上也是一个平均操作</li>
</ol>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226193458236.png" alt="image-20230226193458236" style="zoom:80%;" /></p>
<h3 id="6-4-1-卷积定理：时域的卷积-lt-gt-频域的乘积"><a href="#6-4-1-卷积定理：时域的卷积-lt-gt-频域的乘积" class="headerlink" title="6.4.1    卷积定理：时域的卷积 &lt;=&gt; 频域的乘积"></a>6.4.1    卷积定理：时域的卷积 &lt;=&gt; 频域的乘积</h3><p><strong>卷积定理</strong>：在时域上的卷积，等价于在频域上的乘积，即以下两个操作等价</p>
<ol>
<li>在时域上，通过卷积进行滤波</li>
<li>先通过傅里叶变换，将函数与滤波器转换到频域上；然后把两者相乘；最后再进行逆傅里叶变换，变换到时域上</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226194122537.png" alt="image-20230226194122537" style="zoom:80%;" /></p>
<h3 id="6-4-2-滤波器的时域与频域的关系"><a href="#6-4-2-滤波器的时域与频域的关系" class="headerlink" title="6.4.2    滤波器的时域与频域的关系"></a>6.4.2    滤波器的时域与频域的关系</h3><blockquote>
<p>时域上变大了，频域上反而变低了：Box越大，得出的结果越模糊</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226194605360.png" alt="image-20230226194605360" style="zoom:67%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226194506188.png" alt="image-20230226194506188" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226194514473.png" alt="image-20230226194514473" style="zoom:80%;" /></p>
<h2 id="6-5-频率角度理解采样"><a href="#6-5-频率角度理解采样" class="headerlink" title="6.5    频率角度理解采样"></a>6.5    频率角度理解采样</h2><h3 id="6-5-1-采样-重复原始信号的频谱"><a href="#6-5-1-采样-重复原始信号的频谱" class="headerlink" title="6.5.1    采样 = 重复原始信号的频谱"></a>6.5.1    采样 = 重复原始信号的频谱</h3><blockquote>
<p>采样频率越快，频谱复制越稀疏</p>
<p>采样频率越满，频谱复制越密集</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">时域上采样 &lt;=&gt; 两个函数相乘</th>
<th style="text-align:center">频域上的卷积 &lt;=&gt; 重复原始信号的频谱</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226194857621.png" alt="image-20230226194857621" style="zoom:80%;" /></td>
<td style="text-align:center"><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226194911883.png" alt="image-20230226194911883" style="zoom:80%;" /></td>
</tr>
</tbody>
</table>
</div>
<h3 id="6-5-2-走样-频谱的内容出现重叠"><a href="#6-5-2-走样-频谱的内容出现重叠" class="headerlink" title="6.5.2    走样 = 频谱的内容出现重叠"></a>6.5.2    走样 = 频谱的内容出现重叠</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226195426029.png" alt="image-20230226195426029" style="zoom:80%;" /></p>
<h3 id="6-5-3-反走样-先删除高频信息，在采样"><a href="#6-5-3-反走样-先删除高频信息，在采样" class="headerlink" title="6.5.3    反走样 = 先删除高频信息，在采样"></a>6.5.3    反走样 = 先删除高频信息，在采样</h3><ol>
<li>先模糊，后采样：先删除一个信号的高频信息，然后在进行采样</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226195656888.png" alt="image-20230226195656888" style="zoom:80%;" /></p>
<h2 id="6-6-反走样的实际做法"><a href="#6-6-反走样的实际做法" class="headerlink" title="6.6    反走样的实际做法"></a>6.6    反走样的实际做法</h2><ol>
<li>对每个像素，根据三角形覆盖的面积，做平均值</li>
<li>然后再进行采样</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226200044458.png" alt="image-20230226200044458" style="zoom:80%;" /></p>
<h3 id="6-6-1-MSAA：Multisample-Antialiasing"><a href="#6-6-1-MSAA：Multisample-Antialiasing" class="headerlink" title="6.6.1    MSAA：Multisample Antialiasing"></a>6.6.1    MSAA：Multisample Antialiasing</h3><ol>
<li><strong>超采样 SuperSampling</strong>：将每个像素划分为多个小的采样点，然后该像素的颜色为多个采样点的平均</li>
<li>MSAA近似的是抗锯齿的第一步操作，即<strong>模糊处理</strong></li>
<li>MSAA无法提高屏幕的分辨率，只是通过多个采样点得到近似的三角形覆盖</li>
<li>MSAA是通过增大计算量，得到抗锯齿效果</li>
<li>在实际使用中，会将采样点按特殊的方法排列，有些采样点还会被多个像素复用</li>
</ol>
<blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226201008321.png" alt="image-20230226201008321" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226201027928.png" alt="image-20230226201027928" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226201036128.png" alt="image-20230226201036128" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226201053512.png" alt="image-20230226201053512" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230226201100860.png" alt="image-20230226201100860" style="zoom:80%;" /></p>
</blockquote>
<h3 id="6-6-2-FXAA：Fast-Approximate-Antialiasing"><a href="#6-6-2-FXAA：Fast-Approximate-Antialiasing" class="headerlink" title="6.6.2    FXAA：Fast Approximate Antialiasing"></a>6.6.2    FXAA：Fast Approximate Antialiasing</h3><ol>
<li>快速近似抗锯齿</li>
<li>通过图像的后期处理，先将有锯齿的图像得出来，然后通过图像匹配找到边界，将这些像素换为边界上的颜色</li>
</ol>
<h3 id="6-6-3-TAA：Temporal-Antialiasing"><a href="#6-6-3-TAA：Temporal-Antialiasing" class="headerlink" title="6.6.3    TAA：Temporal Antialiasing"></a>6.6.3    TAA：Temporal Antialiasing</h3><ol>
<li>通过找上一帧的信息，进行抗锯齿操作</li>
<li>假设是静止画面，在相邻两帧同一个像素用不同的点感知是否在一个三角形内</li>
<li>复用上一帧感知到的值，相当于将MSAA的采样点分布在时间上，对于具体的某一帧没有额外操作</li>
</ol>
<h2 id="6-7-超分辨率-超采样"><a href="#6-7-超分辨率-超采样" class="headerlink" title="6.7    超分辨率/超采样"></a>6.7    超分辨率/超采样</h2><ol>
<li>采样率不够，而分辨率较大时，会使用这种技术</li>
<li>DLSS：Deep Learning Super Sampling，通过深度学习，猜测丢失的信息</li>
</ol>
<h2 id="6-8-深度缓冲：解决可见性"><a href="#6-8-深度缓冲：解决可见性" class="headerlink" title="6.8    深度缓冲：解决可见性"></a>6.8    深度缓冲：解决可见性</h2><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316201036427.png" alt="image-20230316201036427" style="zoom:80%;" /></p>
<ol>
<li>Z-Buffer：存储<strong>每一个像素</strong>，所看到的几何物体的最浅距离<ol>
<li>设Z始终为整数，且Z越小离相机越近</li>
</ol>
</li>
<li>具体算法：<ol>
<li>初始化深度缓存为<code>∞</code></li>
<li>对于每一个三角形<code>T</code><ol>
<li>对于<code>T</code>中的每一个采样点<code>(x,y,z)</code>：</li>
<li>如果<code>Z &lt; z-buffer[x,y]</code>：更新<code>frame-buffer、z-buffer</code></li>
<li>否则，跳过该采样点</li>
</ol>
</li>
</ol>
</li>
<li>复杂度<ol>
<li>有<code>n</code>个三角形，则复杂度为<code>O(n)</code></li>
<li>此处并没有排序，而是对每一个像素，维护了一个最小值</li>
</ol>
</li>
<li>画出来的结果，与画三角形的顺序无关</li>
<li><strong>深度缓存无法处理透明物体</strong></li>
</ol>
<h1 id="第07课-着色1：Blinn-Phong反射模型"><a href="#第07课-着色1：Blinn-Phong反射模型" class="headerlink" title="第07课    着色1：Blinn-Phong反射模型"></a>第07课    着色1：Blinn-Phong反射模型</h1><blockquote>
<p><strong>Shading</strong>：着色</p>
<ol>
<li>对不同物体，定义不同材质，从而与光线产生不同作用</li>
</ol>
<p>局部性：</p>
<ol>
<li>只考虑自己的属性，不考虑与其他物体的存在</li>
<li>因此，没有阴影</li>
</ol>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316203039767.png" alt="image-20230316203039767"></p>
<h2 id="7-1-反射模型的输入"><a href="#7-1-反射模型的输入" class="headerlink" title="7.1    反射模型的输入"></a>7.1    反射模型的输入</h2><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316203536809.png" alt="image-20230316203536809" style="zoom:80%;" /></p>
<h2 id="7-2-光照的能量传递关系"><a href="#7-2-光照的能量传递关系" class="headerlink" title="7.2    光照的能量传递关系"></a>7.2    光照的能量传递关系</h2><ol>
<li><p>余弦定理：单位面积接收到的光的能量占比为<code>cos θ</code>，<code>θ</code>为光照方向与平面法线的夹角</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316204159302.png" alt="image-20230316204159302" style="zoom:80%;" /></p>
</li>
<li><p>设光源的能量为<code>I</code>，光源与表面的距离为<code>r</code>，则到达表面的能量为$\frac{I}{r^2}$</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316204518794.png" alt="image-20230316204518794" style="zoom:80%;" /></p>
</li>
</ol>
<h2 id="7-3-漫反射-Diffuse-Reflection"><a href="#7-3-漫反射-Diffuse-Reflection" class="headerlink" title="7.3    漫反射 Diffuse Reflection"></a>7.3    漫反射 Diffuse Reflection</h2><script type="math/tex; mode=display">
L_d=k_d\frac{I}{r^2}max(0,\vec{n}·\vec{l})</script><ol>
<li>$L_d$：漫反射光照</li>
<li>$k_d$：漫反射系数，通常为物体的颜色</li>
<li>$I/r^2$：到达该点的能量</li>
<li>$max(0,\vec{n}·\vec{l})$：该点接收到的能量</li>
<li>由于漫反射到四面八方的能量均相同，因此没有$\vec{v}$的事情</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316204556352.png" alt="image-20230316204556352" style="zoom:80%;" /></p>
<h2 id="7-4-镜面反射-amp-高光项-Specular-Reflection"><a href="#7-4-镜面反射-amp-高光项-Specular-Reflection" class="headerlink" title="7.4    镜面反射&amp;高光项 Specular Reflection"></a>7.4    镜面反射&amp;高光项 Specular Reflection</h2><blockquote>
<p>接近镜面反射时，会出现高光</p>
</blockquote>
<script type="math/tex; mode=display">
L_s=k_s\frac{I}{r^2}max(0,\vec{n}·\vec{h})^p</script><ol>
<li>$L_s$：镜面反射光照</li>
<li>$k_s$：镜面反射系数，通常为白色</li>
<li>$I/r^2$：到达该点的能量</li>
<li>$max(0,\vec{n}·\vec{l})$：该点接收到的能量</li>
<li>$p$：为了让高光的区域足够小，需要将夹角余弦进行幂操作</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316205631263.png" alt="image-20230316205631263" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316220333380.png" alt="image-20230316220333380" style="zoom:80%;" /></p>
<h2 id="7-5-环境光-Ambient-Term"><a href="#7-5-环境光-Ambient-Term" class="headerlink" title="7.5    环境光 Ambient Term"></a>7.5    环境光 Ambient Term</h2><blockquote>
<p>假设所有点接收到的环境光均相同</p>
</blockquote>
<script type="math/tex; mode=display">
L_a=k_aI_a</script><ol>
<li>$L_a$：环境光</li>
<li>$k_a$：环境光系数，通常为物体颜色</li>
<li>环境光通常为一个常量，保证没有地方是黑的</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316220425251.png" alt="image-20230316220425251" style="zoom:80%;" /></p>
<h2 id="7-6-Blinn-Phong反射模型"><a href="#7-6-Blinn-Phong反射模型" class="headerlink" title="7.6    Blinn-Phong反射模型"></a>7.6    Blinn-Phong反射模型</h2><script type="math/tex; mode=display">
\begin{aligned}
L &= L_a+L_d+L_s\\
  &= k_aI_a+k_d\frac{I}{r^2}max(0,n·l)+k_s\frac{I}{r^2}max(0,n·h)^p
\end{aligned}</script><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316220636330.png" alt="image-20230316220636330" style="zoom:80%;" /></p>
<h1 id="第08课-着色2：着色频率-amp-实时渲染管线"><a href="#第08课-着色2：着色频率-amp-实时渲染管线" class="headerlink" title="第08课    着色2：着色频率&amp;实时渲染管线"></a>第08课    着色2：着色频率&amp;实时渲染管线</h1><h2 id="8-1-着色频率"><a href="#8-1-着色频率" class="headerlink" title="8.1    着色频率"></a>8.1    着色频率</h2><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316221140250.png" alt="image-20230316221140250" style="zoom:80%;" /></p>
<ol>
<li>着色频率即为：将结果应用到哪些平面上<ol>
<li>左1：应用到每个三角面上，<strong>Flat Shading</strong></li>
<li>左2：应用到每个顶点上，<strong>Gouraud Shading</strong></li>
<li>左3：应用到每个像素上，<strong>Phong Shading</strong></li>
</ol>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316221604284.png" alt="image-20230316221604284" style="zoom:80%;" /></p>
<h3 id="8-1-1-计算顶点法线"><a href="#8-1-1-计算顶点法线" class="headerlink" title="8.1.1    计算顶点法线"></a>8.1.1    计算顶点法线</h3><blockquote>
<p>将与该顶点相关的所有面的法线，做加权平均，权重为三角形面积</p>
</blockquote>
<script type="math/tex; mode=display">
N_v=\frac{\sum_i N_i}{|\sum_i N_i|}</script><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316221815730.png" alt="image-20230316221815730" style="zoom:80%;" /></p>
<h3 id="8-1-2-计算像素法线"><a href="#8-1-2-计算像素法线" class="headerlink" title="8.1.2    计算像素法线"></a>8.1.2    计算像素法线</h3><blockquote>
<p>使用重心坐标，对相邻两个顶点的法线进行插值</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316222038138.png" alt="image-20230316222038138" style="zoom:80%;" /></p>
<h2 id="8-2-实时渲染管线"><a href="#8-2-实时渲染管线" class="headerlink" title="8.2    实时渲染管线"></a>8.2    实时渲染管线</h2><ol>
<li>输入：3维空间中的若干个点</li>
<li><strong>Vertex Processing</strong>：将3维空间的点，投影到屏幕空间上<ol>
<li>Model, View Projection变换</li>
<li>着色、纹理映射</li>
</ol>
</li>
<li><strong>Triangle Processing</strong>：形成屏幕空间上的三角形</li>
<li><strong>Rasterization</strong>：通过光栅化，将三角形绘制到屏幕上<ol>
<li>对三角形是否覆盖进行采样</li>
</ol>
</li>
<li><strong>Fragment Processing</strong>：对像素进行着色<ol>
<li>Z-Buffer</li>
<li>着色、纹理映射</li>
</ol>
</li>
<li><strong>Framebuffer Opreations</strong>：将三角形拼装成图像</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316222331676.png" alt="image-20230316222331676" style="zoom:80%;" /></p>
<h2 id="8-3-Shader程序"><a href="#8-3-Shader程序" class="headerlink" title="8.3    Shader程序"></a>8.3    Shader程序</h2><ol>
<li>对每一个顶点/像素，Shader均会执行一次</li>
<li>顶点着色器：对顶点操作</li>
<li>片段着色器、像素着色器：对像素操作，确定当前像素是什么颜色</li>
</ol>
<h2 id="8-4-GPU"><a href="#8-4-GPU" class="headerlink" title="8.4    GPU"></a>8.4    GPU</h2><ol>
<li>是整个图形管线的硬件实现：如光栅化、投影</li>
<li>有一部分是可编程的：即着色器</li>
<li>GPGPU：通用GPU计算，可以完成各种各样的GPU计算</li>
<li>是一个高度并行化的多核处理器</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316225348436.png" alt="image-20230316225348436" style="zoom:80%;" /></p>
<h2 id="8-5-纹理映射"><a href="#8-5-纹理映射" class="headerlink" title="8.5    纹理映射"></a>8.5    纹理映射</h2><ol>
<li><p>根本作用：定义3维物体上任何一个点的属性</p>
</li>
<li><p><strong>纹理</strong>：任何一个3维物体的表面都是2维的，因此可以和一张图有一个一一对应的关系，这张图即为纹理</p>
<ol>
<li>将3维物体上的每一个三角形的顶点，映射到纹理图像上<ol>
<li>由美工完成</li>
<li>自动化：参数化模型</li>
</ol>
</li>
</ol>
</li>
<li><p>UV坐标系：即纹理坐标的坐标系，通常范围为[0~1] × [0~1]</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316230121429.png" alt="image-20230316230121429" style="zoom:80%;" /></p>
</li>
<li><p>不同的位置可以映射到同一个位置上</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316230208252.png" alt="image-20230316230208252" style="zoom:80%;" /></p>
</li>
<li><p>好的纹理：纹理的上下左右可以无缝衔接，称为<strong>tiled textures</strong></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230316230252605.png" alt="image-20230316230252605" style="zoom:80%;" /></p>
</li>
</ol>
<h1 id="第09课-着色3：纹理的应用"><a href="#第09课-着色3：纹理的应用" class="headerlink" title="第09课    着色3：纹理的应用"></a>第09课    着色3：纹理的应用</h1><h2 id="9-1-重心坐标-Barycentric-Coordinates"><a href="#9-1-重心坐标-Barycentric-Coordinates" class="headerlink" title="9.1    重心坐标 Barycentric Coordinates"></a>9.1    重心坐标 Barycentric Coordinates</h2><p>为什么需要插值</p>
<ol>
<li>我们的很多操作是定义在<strong>顶点</strong>上的</li>
<li>我们需要在<strong>三角形</strong>内获得平滑的值</li>
</ol>
<p>插值什么内容</p>
<ol>
<li>纹理坐标、颜色、法线</li>
</ol>
<p>怎么做插值</p>
<ol>
<li>重心坐标</li>
</ol>
<h3 id="9-1-1-重心坐标是什么"><a href="#9-1-1-重心坐标是什么" class="headerlink" title="9.1.1    重心坐标是什么"></a>9.1.1    重心坐标是什么</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320181655673.png" alt="image-20230320181655673" style="zoom:80%;" /></p>
<ol>
<li><p>定义在三角形上：三角形<strong>所在平面</strong>的任意一个点的坐标，都可以用三个顶点坐标的线性组合表示，且$\alpha+\beta+\gamma=1$</p>
<ol>
<li>$(x,y)=\alpha A+ \beta B + \gamma C$，可以得到一个坐标$(\alpha,\beta,\gamma)$</li>
<li>如果在<strong>三角形内</strong>，则$\alpha,\beta,\gamma$均为<strong>非负</strong>的</li>
</ol>
</li>
<li><p>求$\alpha,\beta,\gamma$：通过面积计算</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320182149277.png" alt="image-20230320182149277" style="zoom:80%;" /></p>
</li>
<li><p>三角形的<strong>重心</strong>：分成的三个三角形面积相等</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320182314078.png" alt="image-20230320182314078" style="zoom:80%;" /></p>
</li>
<li><p>使用公式计算：</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320182412696.png" alt="image-20230320182412696" style="zoom:80%;" /></p>
</li>
</ol>
<h3 id="9-1-2-重心坐标插值"><a href="#9-1-2-重心坐标插值" class="headerlink" title="9.1.2    重心坐标插值"></a>9.1.2    重心坐标插值</h3><p><strong>注意：投影后，重心坐标可能会改变，因此插值三维属性，应该使用三维坐标</strong></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320182502273.png" alt="image-20230320182502273" style="zoom:80%;" /></p>
<h2 id="9-2-纹理的基础应用"><a href="#9-2-纹理的基础应用" class="headerlink" title="9.2    纹理的基础应用"></a>9.2    纹理的基础应用</h2><h3 id="9-2-1-简单纹理映射：漫反射颜色"><a href="#9-2-1-简单纹理映射：漫反射颜色" class="headerlink" title="9.2.1    简单纹理映射：漫反射颜色"></a>9.2.1    简单纹理映射：漫反射颜色</h3><p>对每一个屏幕中的采样点$(x,y)$：</p>
<ol>
<li>通过重心坐标插值，计算$(x,y)$对应的纹理坐标$(u,v)$</li>
<li>得到纹理中，$(u,v)$所在点的颜色，记为<code>texcolor = texture.sample(u,v)</code></li>
<li>将该采样点的颜色，设置为<code>texcolor</code></li>
</ol>
<h3 id="9-2-2-纹理放大：双线性插值-Bilinear-interpolation"><a href="#9-2-2-纹理放大：双线性插值-Bilinear-interpolation" class="headerlink" title="9.2.2    纹理放大：双线性插值 Bilinear interpolation"></a>9.2.2    纹理放大：双线性插值 Bilinear interpolation</h3><blockquote>
<p>像素<strong>pixel</strong> &lt;=&gt; 纹理元素<strong>texel</strong>，纹理需要放大时，多个pixel会对应到同一个texel上</p>
<p>纹理过小：失真</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320184241753.png" alt="image-20230320184241753" style="zoom:80%;" /></p>
</blockquote>
<ol>
<li>找到临近的四个点</li>
<li>计算水平距离<code>s</code>和垂直距离<code>t</code>，均为<code>[0,1]</code>之间的值</li>
<li>定义线性插值操作：$lerp(x,v_0,v_1)=v_0+x(v_1-v_0)$，$x$为<code>[0,1]</code>之间的值</li>
<li>进行<strong>两次线性插值</strong>操作：<ol>
<li>水平方向：$u<em>0=lerp(s,u</em>{00},u<em>{10}),u_1=lerp(s,u</em>{01},u_{11})$</li>
<li>垂直方向：$f(x,y)=lerp(t,u_0,u_1)$</li>
</ol>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320183957812.png" alt="image-20230320183957812" style="zoom:80%;" /></p>
<h3 id="9-2-3-纹理缩小"><a href="#9-2-3-纹理缩小" class="headerlink" title="9.2.3    纹理缩小"></a>9.2.3    纹理缩小</h3><blockquote>
<p>纹理过大：远处摩尔纹，近处锯齿</p>
<ol>
<li>远处，一个像素覆盖了纹理上的很大一块区域，因此会存在走样</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320184320810.png" alt="image-20230320184320810" style="zoom:80%;" /></p>
</blockquote>
<h4 id="9-2-3-1-Mipmap"><a href="#9-2-3-1-Mipmap" class="headerlink" title="9.2.3.1    Mipmap"></a>9.2.3.1    Mipmap</h4><p><strong>Mipmap</strong>：允许做<strong>快速、近似、正方形</strong>的范围查询</p>
<ol>
<li><p>每一层均将上一层缩小到原来的一半</p>
<ol>
<li>预处理纹理</li>
<li>多了1/3的存储量</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320185053505.png" alt="image-20230320185053505" style="zoom:80%;" /></p>
</li>
<li><p>计算某个像素对应到纹理的正方形区域</p>
<ol>
<li>将屏幕上的某个像素点<code>p1</code>及其两个邻居<code>p2,p3</code>对应到纹理上的三个点<code>t1,t2,t3</code></li>
<li>在屏幕上，<code>p1</code>与<code>p2</code>的距离为<code>1</code>，<code>p1</code>与<code>p3</code>的距离为<code>1</code></li>
<li>在纹理中，<code>t1</code>与<code>t2</code>的距离为<code>L1</code>，<code>t1</code>与<code>t2</code>的距离为<code>L2</code></li>
<li>取<code>L=max(L1,L2)</code>，则该像素在纹理空间上对应的正方形区域为，以<code>t1</code>为中心的<code>L×L</code>的区域</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320185714401.png" alt="image-20230320185714401" style="zoom:80%;" /></p>
</li>
<li><p>计算正方形区域的平均值</p>
<ol>
<li>假设正方形为<code>1×1</code>，则可以直接在<code>0</code>层中获得该区域的平均值</li>
<li>假设正方形为<code>4×4</code>，则可以直接在<code>1</code>层中获得该区域的平均值</li>
<li>因此，我们可以在第$D=log_2L$层中获取该区域的平均值</li>
<li>如果$log_2L$不是整数，则可以通过<strong>线性插值</strong>，获得该区域的平均值</li>
<li>每一层的查询，使用了一次<strong>双线性插值</strong>，最后又进行了一次<strong>线性插值</strong>，因此称为<strong>三线性插值</strong></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320190152780.png" alt="image-20230320190152780" style="zoom:80%;" /></p>
</li>
<li><p>缺点：在远处会完全模糊<strong>overblur</strong></p>
</li>
</ol>
<h4 id="9-2-3-2-各向异性过滤"><a href="#9-2-3-2-各向异性过滤" class="headerlink" title="9.2.3.2    各向异性过滤"></a>9.2.3.2    各向异性过滤</h4><p><strong>Anisotropic Filtering</strong>：各向异性过滤，对矩形的区域快速查询平均值</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320190538811.png" alt="image-20230320190538811" style="zoom:80%;" /></p>
<ol>
<li>各向异性过滤：水平、竖直压扁，开销为原本的3倍</li>
<li>EWA过滤：将图像分为一个个的椭圆</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320190625611.png" alt="image-20230320190625611" style="zoom:80%;" /></p>
<h2 id="9-3-纹理的其他应用"><a href="#9-3-纹理的其他应用" class="headerlink" title="9.3    纹理的其他应用"></a>9.3    纹理的其他应用</h2><p>现代GPU中，纹理的本质：是一块内存区域，且可以进行范围查询</p>
<h3 id="9-3-1-环境贴图-Environment-Map"><a href="#9-3-1-环境贴图-Environment-Map" class="headerlink" title="9.3.1    环境贴图 Environment Map"></a>9.3.1    环境贴图 Environment Map</h3><ol>
<li>环境贴图：即为空间中的某个点，向上下左右前后六个方向，所能接收到的光</li>
<li>可以通过环境贴图，进行光照计算，进而实现环境光渲染</li>
<li>基本假设：环境光来自无限远处，只记录环境光的方向信息</li>
<li>可以使用<strong>Spherical Map</strong>或者<strong>Cube Map</strong>表示</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320203116579.png" alt="image-20230320203116579" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320203423125.png" alt="image-20230320203423125" style="zoom:80%;" /></p>
<blockquote>
<p>由于立方体的<strong>各个面都是均匀</strong>的，因此能很好的避免天空球的<strong>极点消失</strong>现象</p>
<ol>
<li>天空盒只记录方向信息</li>
<li>需要先判断某个方向是属于哪一个面上的</li>
</ol>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320203303350.png" alt="image-20230320203303350" style="zoom:80%;" /></p>
<h3 id="9-3-2-凹凸贴图-amp-法线贴图"><a href="#9-3-2-凹凸贴图-amp-法线贴图" class="headerlink" title="9.3.2    凹凸贴图 &amp; 法线贴图"></a>9.3.2    凹凸贴图 &amp; 法线贴图</h3><ol>
<li>凹凸贴图：定义某个点的相对高度(沿法线移动的距离)，从而改变周围像素的法线方向</li>
<li>法线贴图：定义某个点的法线</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320203552597.png" alt="image-20230320203552597" style="zoom:80%;" /></p>
<blockquote>
<p>计算修改后的法线</p>
</blockquote>
<ol>
<li><p>一维贴图，修改像素的法线：<strong>flatland</strong></p>
<ol>
<li>设原来的表面法线<code>n(p)=(0, 1)</code></li>
<li>计算梯度：<code>dp=c*[h(p+1)-h(p)]</code></li>
<li>则切线为：<code>(1,dp)</code></li>
<li>因此更改后的法线为：<code>n(p)=(-dp, 1).normalized()</code></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320203941915.png" alt="image-20230320203941915" style="zoom:80%;" /></p>
</li>
<li><p>二维贴图，修改像素的法线：<strong>局部坐标系下</strong></p>
<ol>
<li>设原来的表面法线<code>n(p)=(0, 0, 1)</code></li>
<li>计算梯度：<code>dp/du=c1*[h(u+1)-h(u)]</code>，<code>dp/dv=c2*[h(v+1)-h(v)]</code></li>
<li>因此更改后的法线为：<code>n(p)=(-dp/du, -dp/dv ,1).normalized()</code></li>
</ol>
</li>
</ol>
<h3 id="9-3-3-位移贴图-Displacement-Mapping"><a href="#9-3-3-位移贴图-Displacement-Mapping" class="headerlink" title="9.3.3    位移贴图 Displacement Mapping"></a>9.3.3    位移贴图 Displacement Mapping</h3><ol>
<li>与凹凸贴图类似，但是会直接<strong>更改三角形顶点的位置</strong></li>
<li>要求原有模型的三角形比较细，要求模型的三角形顶点之间的间隔，比纹理之间的间隔小</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320204818983.png" alt="image-20230320204818983" style="zoom:80%;" /></p>
<h3 id="9-3-4-三维纹理"><a href="#9-3-4-三维纹理" class="headerlink" title="9.3.4    三维纹理"></a>9.3.4    三维纹理</h3><ol>
<li>定义一个三维空间的噪声函数，可以得到三维空间中，任意一个点的属性</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320205137485.png" alt="image-20230320205137485" style="zoom:80%;" /></p>
<h3 id="9-3-5-保存预处理的数据"><a href="#9-3-5-保存预处理的数据" class="headerlink" title="9.3.5    保存预处理的数据"></a>9.3.5    保存预处理的数据</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320205230388.png" alt="image-20230320205230388" style="zoom:80%;" /></p>
<h3 id="9-3-6-三维纹理-amp-体积渲染"><a href="#9-3-6-三维纹理-amp-体积渲染" class="headerlink" title="9.3.6    三维纹理 &amp; 体积渲染"></a>9.3.6    三维纹理 &amp; 体积渲染</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320205313633.png" alt="image-20230320205313633" style="zoom:80%;" /></p>
<h1 id="第10课-几何1：介绍"><a href="#第10课-几何1：介绍" class="headerlink" title="第10课    几何1：介绍"></a>第10课    几何1：介绍</h1><h2 id="10-1-隐式表示-Implicit"><a href="#10-1-隐式表示-Implicit" class="headerlink" title="10.1    隐式表示 Implicit"></a>10.1    隐式表示 Implicit</h2><ol>
<li><p><strong>f(x,y,z) = 0</strong>：表示一定的关系，并不直接给出实际点</p>
</li>
<li><p>优点：便于判断某个<strong>点与面</strong>的关系</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320210121129.png" alt="image-20230320210121129" style="zoom:80%;" /></p>
</li>
<li><p>缺点：无法直接判断出<strong>形状</strong>/找到所有在这个面上的点</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320210022919.png" alt="image-20230320210022919" style="zoom:80%;" /></p>
</li>
</ol>
<h2 id="10-2-显示表示-Explicit"><a href="#10-2-显示表示-Explicit" class="headerlink" title="10.2    显示表示 Explicit"></a>10.2    显示表示 Explicit</h2><ol>
<li><p>显示表示：直接用三角形表示 / 通过参数映射给出</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320210219640.png" alt="image-20230320210219640" style="zoom:80%;" /></p>
</li>
<li><p>优点：便于<strong>取样</strong>，判断形状</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320210302100.png" alt="image-20230320210302100" style="zoom:80%;" /></p>
</li>
<li><p>缺点：难以判断某个<strong>点和面</strong>的关系</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320210417478.png" alt="image-20230320210417478" style="zoom:80%;" /></p>
</li>
</ol>
<h2 id="10-3-CG中的隐式几何表示"><a href="#10-3-CG中的隐式几何表示" class="headerlink" title="10.3    CG中的隐式几何表示"></a>10.3    CG中的隐式几何表示</h2><h3 id="10-3-1-数学公式表述"><a href="#10-3-1-数学公式表述" class="headerlink" title="10.3.1    数学公式表述"></a>10.3.1    数学公式表述</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320210536832.png" alt="image-20230320210536832" style="zoom:80%;" /></p>
<h3 id="10-3-2-构造几何CSG：Constructive-Solid-Geometry"><a href="#10-3-2-构造几何CSG：Constructive-Solid-Geometry" class="headerlink" title="10.3.2    构造几何CSG：Constructive Solid Geometry"></a>10.3.2    构造几何CSG：Constructive Solid Geometry</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320210649720.png" alt="image-20230320210649720" style="zoom:80%;" /></p>
<h3 id="10-3-3-距离函数-Distance-Functions"><a href="#10-3-3-距离函数-Distance-Functions" class="headerlink" title="10.3.3    距离函数 Distance Functions"></a>10.3.3    距离函数 Distance Functions</h3><ol>
<li>描述空间中的任何一个点，到该表面的最近距离<ol>
<li>如果在物体外，则为正数</li>
<li>如果在物体内，则为负数</li>
<li>SDF：有向距离函数</li>
</ol>
</li>
<li>优点：便于做两个物体的<strong>边界融合</strong></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320210931112.png" alt="image-20230320210931112" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320211414373.png" alt="image-20230320211414373" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320211444830.png" alt="image-20230320211444830" style="zoom:80%;" /></p>
<h3 id="10-3-4-水平集函数"><a href="#10-3-4-水平集函数" class="headerlink" title="10.3.4    水平集函数"></a>10.3.4    水平集函数</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320211928804.png" alt="image-20230320211928804" style="zoom:80%;" /></p>
<h3 id="10-3-5-分形-Fractal"><a href="#10-3-5-分形-Fractal" class="headerlink" title="10.3.5    分形 Fractal"></a>10.3.5    分形 Fractal</h3><p><strong>分形 &lt;=&gt; 自相似</strong></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320212054041.png" alt="image-20230320212054041" style="zoom:80%;" /></p>
<h2 id="10-4-CG中的显示几何表示"><a href="#10-4-CG中的显示几何表示" class="headerlink" title="10.4    CG中的显示几何表示"></a>10.4    CG中的显示几何表示</h2><h3 id="10-4-1-点云"><a href="#10-4-1-点云" class="headerlink" title="10.4.1    点云"></a>10.4.1    点云</h3><ol>
<li>通过特别多的点，表示一个模型</li>
<li>通常为三维扫描的输出</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320212656886.png" alt="image-20230320212656886" style="zoom:80%;" /></p>
<h3 id="10-4-2-多边形面"><a href="#10-4-2-多边形面" class="headerlink" title="10.4.2    多边形面"></a>10.4.2    多边形面</h3><ol>
<li>通常为三角形 &amp; 四边形</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320212736997.png" alt="image-20230320212736997" style="zoom:80%;" /></p>
<h3 id="10-4-3-The-Wavefront-Object-File-Format"><a href="#10-4-3-The-Wavefront-Object-File-Format" class="headerlink" title="10.4.3    The Wavefront Object File Format"></a>10.4.3    The Wavefront Object File Format</h3><ol>
<li><code>v</code>：点的坐标</li>
<li><code>vt</code>：纹理坐标</li>
<li><code>vn</code>：法向</li>
<li><code>f</code>：连接关系，同一行内为三角形的三个点，每个点的格式为<code>v/vt/vn</code>，表示该点的坐标/纹理坐标/法向</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320212854657.png" alt="image-20230320212854657" style="zoom:80%;" /></p>
<h1 id="第11课-几何2：曲线和曲面"><a href="#第11课-几何2：曲线和曲面" class="headerlink" title="第11课    几何2：曲线和曲面"></a>第11课    几何2：曲线和曲面</h1><h2 id="11-1-贝塞尔曲线-Bezier-Curve"><a href="#11-1-贝塞尔曲线-Bezier-Curve" class="headerlink" title="11.1    贝塞尔曲线 Bezier Curve"></a>11.1    贝塞尔曲线 Bezier Curve</h2><ol>
<li>定义四个控制点<code>p0,p1,p2,p3</code>，要求曲线的起始切线方向为<code>p1-p0</code>，终止切线方向为<code>p3-p2</code></li>
<li>曲线不一定经过控制点</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320213504658.png" alt="image-20230320213504658" style="zoom:80%;" /></p>
<h3 id="11-1-1-de-Casteljau算法"><a href="#11-1-1-de-Casteljau算法" class="headerlink" title="11.1.1    de Casteljau算法"></a>11.1.1    de Casteljau算法</h3><h4 id="11-1-1-1-二次贝塞尔曲线：三个控制点"><a href="#11-1-1-1-二次贝塞尔曲线：三个控制点" class="headerlink" title="11.1.1.1    二次贝塞尔曲线：三个控制点"></a>11.1.1.1    二次贝塞尔曲线：三个控制点</h4><ol>
<li><code>b0</code>为起点，<code>b2</code>为终点，<code>b1</code>控制曲线弯曲</li>
<li>实际上是：对于每一个时间<code>t</code>，找到当前时刻对应的点的坐标<ol>
<li>第一步：<ol>
<li>在$b_0b_1$上，设$b_0$为时间<code>0</code>，$b_1$为时间<code>1</code>，线性插值找到$b_0^1$</li>
<li>在$b_1b_2$上，设$b_1$为时间<code>0</code>，$b_2$为时间<code>1</code>，线性插值找到$b_1^1$</li>
</ol>
</li>
<li>第二步：<ol>
<li>在$b_0^1b_1^1$上，设$b_0^1$为时间<code>0</code>，$b_1^1$为时间<code>1</code>，线性插值找到$b_0^2$</li>
</ol>
</li>
<li>则$b_0^2$记为贝塞尔曲线，在时间<code>t</code>所在的位置</li>
</ol>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320214216113.png" alt="image-20230320214216113" style="zoom:80%;" /></p>
<h4 id="11-1-1-2-四个控制点"><a href="#11-1-1-2-四个控制点" class="headerlink" title="11.1.1.2    四个控制点"></a>11.1.1.2    四个控制点</h4><ol>
<li><code>b0</code>为起点，<code>b3</code>为终点，<code>b1,b2</code>控制曲线弯曲</li>
<li>实际上是：对于每一个时间<code>t</code>，找到当前时刻对应的点的坐标<ol>
<li>第一步：<ol>
<li>在$b_0b_1$上，设$b_0$为时间<code>0</code>，$b_1$为时间<code>1</code>，线性插值找到$b_0^1$</li>
<li>在$b_1b_2$上，设$b_1$为时间<code>0</code>，$b_2$为时间<code>1</code>，线性插值找到$b_1^1$</li>
<li>在$b_2b_3$上，设$b_2$为时间<code>0</code>，$b_3$为时间<code>1</code>，线性插值找到$b_2^1$</li>
</ol>
</li>
<li>第二步：<ol>
<li>在$b_0^1b_1^1$上，设$b_0^1$为时间<code>0</code>，$b_1^1$为时间<code>1</code>，线性插值找到$b_0^2$</li>
<li>在$b_1^1b_2^1$上，设$b_1^1$为时间<code>0</code>，$b_2^1$为时间<code>1</code>，线性插值找到$b_1^2$</li>
</ol>
</li>
<li>第三步：<ol>
<li>在$b_0^2b_1^2$上，设$b_0^2$为时间<code>0</code>，$b_1^2$为时间<code>1</code>，线性插值找到$b_0^3$</li>
</ol>
</li>
<li>则$b_0^3$记为贝塞尔曲线，在时间<code>t</code>所在的位置<code>x(t)</code></li>
</ol>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320214234859.png" alt="image-20230320214234859" style="zoom:80%;" /></p>
<h4 id="11-1-1-3-贝塞尔曲线的代数形式"><a href="#11-1-1-3-贝塞尔曲线的代数形式" class="headerlink" title="11.1.1.3    贝塞尔曲线的代数形式"></a>11.1.1.3    贝塞尔曲线的代数形式</h4><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320214621950.png" alt="image-20230320214621950" style="zoom:80%;" /></p>
<blockquote>
<p>2阶贝塞尔曲线</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320214734581.png" alt="image-20230320214734581" style="zoom:80%;" /></p>
<h3 id="11-1-2-n阶贝塞尔曲线的代数表示"><a href="#11-1-2-n阶贝塞尔曲线的代数表示" class="headerlink" title="11.1.2    n阶贝塞尔曲线的代数表示"></a>11.1.2    n阶贝塞尔曲线的代数表示</h3><blockquote>
<p>参数为 <strong>(1-t+t)^n^</strong> 的多项式展开</p>
</blockquote>
<script type="math/tex; mode=display">
b^n(t) = \sum_{j=0}^n b_j B_j^n(t)</script><ol>
<li>$b^n(t)$：n阶贝塞尔曲线的表达式</li>
<li>$b_j$：第j个控制点，可以为三维空间中的点</li>
<li>$B<em>j^n(t)$：Bernstein多项式，此处为$C</em>{n}^i\ t^i\ (1-t)^{n-i}$</li>
</ol>
<h3 id="11-1-3-贝塞尔曲线的性质"><a href="#11-1-3-贝塞尔曲线的性质" class="headerlink" title="11.1.3    贝塞尔曲线的性质"></a>11.1.3    贝塞尔曲线的性质</h3><ol>
<li><p>必须过起点和终点：$b(0)=b_0,b(1)=b_n$</p>
</li>
<li><p>对于三阶贝塞尔曲线：$b’(0)=3(b_1-b_0),b’(1)=3(b_3-b_2)$</p>
</li>
<li><p>在仿射变换中：<strong>对贝塞尔曲线的仿射变换 &lt;=&gt; 对控制点做仿射变换然后再计算贝塞尔曲线</strong></p>
<ol>
<li>但是对投影变换不行</li>
</ol>
</li>
<li><p>凸包性质：<strong>贝塞尔曲线一定在控制点形成的凸包内</strong></p>
<ol>
<li><p>凸包：包围某些顶点的最小凸多边形</p>
<blockquote>
<p>可以将顶点想象为钉子，用橡皮筋包裹住所有顶点，然后松手，橡皮筋最后的形状记为这些顶点的凸包</p>
</blockquote>
</li>
<li><p>如果控制点在同一条直线上，则贝塞尔曲线就是这条直线</p>
</li>
</ol>
</li>
</ol>
<h3 id="11-1-4-分段贝塞尔曲线-Picewise-Bezier-Curves"><a href="#11-1-4-分段贝塞尔曲线-Picewise-Bezier-Curves" class="headerlink" title="11.1.4    分段贝塞尔曲线 Picewise Bezier Curves"></a>11.1.4    分段贝塞尔曲线 Picewise Bezier Curves</h3><ol>
<li><p>通常为4个控制点，控制一段贝塞尔曲线</p>
</li>
<li><p>PS中的钢笔工具，就应用了分段贝塞尔曲线</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320220627770.png" alt="image-20230320220627770" style="zoom:80%;" /></p>
</li>
<li><p>保证<strong>连续</strong>（<strong>C^0^连续</strong>）：</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320221118919.png" alt="image-20230320221118919" style="zoom:80%;" /></p>
</li>
<li><p>保证<strong>光滑/切线连续</strong>（<strong>C^1^连续</strong>）：相邻的两端贝塞尔曲线中，上一段曲线的最后两个控制点，与下一段曲线的最初两个控制点，共线且距离相同</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320221132408.png" alt="image-20230320221132408" style="zoom:80%;" /></p>
</li>
</ol>
<h2 id="11-2-样条曲线-Spline"><a href="#11-2-样条曲线-Spline" class="headerlink" title="11.2    样条曲线 Spline"></a>11.2    样条曲线 Spline</h2><p>样条：一个可控的曲线</p>
<h3 id="11-2-1-B样条-Basis-Spline"><a href="#11-2-1-B样条-Basis-Spline" class="headerlink" title="11.2.1    B样条 Basis-Spline"></a>11.2.1    B样条 Basis-Spline</h3><p>基函数样条</p>
<ol>
<li>贝塞尔曲线，既可以理解为用Bernstein多项式，对控制点加权求和；也可以理解为用控制点，对Bernstein多项式进行加权求和。则Bernstein多项式，即为基函数</li>
<li>相当于由不同的函数，通过某一种方式结合起来，得到另一个函数</li>
<li>B样条是对贝塞尔曲线的扩展，可以保证<strong>修改的局部性</strong>，改变一个点，至多影响曲线的某个部分</li>
</ol>
<h2 id="11-3-贝塞尔曲面-Bezier-Surfaces"><a href="#11-3-贝塞尔曲面-Bezier-Surfaces" class="headerlink" title="11.3    贝塞尔曲面 Bezier Surfaces"></a>11.3    贝塞尔曲面 Bezier Surfaces</h2><h3 id="11-3-1-4×4个控制点"><a href="#11-3-1-4×4个控制点" class="headerlink" title="11.3.1    4×4个控制点"></a>11.3.1    4×4个控制点</h3><ol>
<li><p>对于每一行的4个控制点，计算每一行的贝塞尔曲线</p>
</li>
<li><p>对于每一个时间<code>t1</code>，对应的4行贝塞尔曲线上的点，认为是4个控制点，可以得到另一个贝塞尔曲线，其时间为<code>t2</code></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320222831716.png" alt="image-20230320222831716" style="zoom:80%;" /></p>
</li>
<li><p>在<code>t1,t2</code>的变换过程中，即可得到贝塞尔曲面</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320222940089.png" alt="image-20230320222940089" style="zoom:80%;" /></p>
</li>
</ol>
<h3 id="11-3-2-计算贝塞尔曲面"><a href="#11-3-2-计算贝塞尔曲面" class="headerlink" title="11.3.2    计算贝塞尔曲面"></a>11.3.2    计算贝塞尔曲面</h3><blockquote>
<p>可以将参数<code>(u,v)</code>，映射到曲面上的对应点，因此贝塞尔曲面是显示表示</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320223338990.png" alt="image-20230320223338990" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320223409877.png" alt="image-20230320223409877" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230320223417719.png" alt="image-20230320223417719" style="zoom:80%;" /></p>
<h1 id="第12课-几何3：网格体"><a href="#第12课-几何3：网格体" class="headerlink" title="第12课    几何3：网格体"></a>第12课    几何3：网格体</h1><h2 id="12-1-网格体的细分-Subdivision"><a href="#12-1-网格体的细分-Subdivision" class="headerlink" title="12.1    网格体的细分 Subdivision"></a>12.1    网格体的细分 Subdivision</h2><ol>
<li>引入更多三角形</li>
<li>调整顶点的位置，让网格体更加接近原样</li>
</ol>
<h3 id="12-1-1-Loop细分：三角形网格体"><a href="#12-1-1-Loop细分：三角形网格体" class="headerlink" title="12.1.1    Loop细分：三角形网格体"></a>12.1.1    Loop细分：三角形网格体</h3><ol>
<li><p>连接三角形三条边的中点，可以将一个三角形划分为四个三角形</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321162509372.png" alt="image-20230321162509372" style="zoom:80%;" /></p>
</li>
<li><p>计算新的顶点的位置</p>
<ol>
<li>设新增的顶点为图中的白点，白点被原来的两个三角形<code>ABC、ABD</code>共享</li>
<li>则可以计算新的顶点的坐标值：<code>3/8 * (A+B) + 1/8 * (C+D)</code></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321162618650.png" alt="image-20230321162618650" style="zoom:80%;" /></p>
</li>
<li><p>更改旧的顶点的位置</p>
<ol>
<li>设顶点的度为<code>n</code>，与<code>n</code>相关的一个数<code>u</code></li>
<li>则更改顶点的位置为：<code>(1-n*u) * 当前顶点原来的位置 + u * 相邻节点的位置之和</code></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321162914642.png" alt="image-20230321162914642" style="zoom:80%;" /></p>
</li>
</ol>
<h3 id="12-1-2-Catmull-Clark细分：一般的网格体"><a href="#12-1-2-Catmull-Clark细分：一般的网格体" class="headerlink" title="12.1.2    Catmull-Clark细分：一般的网格体"></a>12.1.2    Catmull-Clark细分：一般的网格体</h3><ol>
<li>quad face：四边形面</li>
<li>non-quad face：非四边形面</li>
<li>Extraordinary vertex：奇异点，度数不为4的点</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321163537134.png" alt="image-20230321163537134" style="zoom:80%;" /></p>
<p>细分方法：</p>
<ol>
<li><p>增加新的点：每一条线取中点，每一个面取中点，然后将边上的中点与面中心的点连起来</p>
<ol>
<li>新出现了2个奇异点，度数均为2</li>
<li>每个原来的非四边形面均会引入一个奇异点，且一次操作后会消失</li>
</ol>
<p>| <img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321163943647.png" alt="image-20230321163943647" style="zoom:80%;" /> | <img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321164016513.png" alt="image-20230321164016513" style="zoom:80%;" /> | <img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321163957959.png" alt="image-20230321163957959" style="zoom:80%;" /> |<br>| :—————————————————————————————: | :—————————————————————————————: | —————————————————————————————— |</p>
</li>
<li><p>修改点的坐标</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321164236099.png" alt="image-20230321164236099" style="zoom:80%;" /></p>
</li>
</ol>
<h2 id="12-2-网格体简化-Simplification"><a href="#12-2-网格体简化-Simplification" class="headerlink" title="12.2    网格体简化 Simplification"></a>12.2    网格体简化 Simplification</h2><h3 id="12-2-1-边坍缩-Collapsing-An-Edge"><a href="#12-2-1-边坍缩-Collapsing-An-Edge" class="headerlink" title="12.2.1    边坍缩 Collapsing An Edge"></a>12.2.1    边坍缩 Collapsing An Edge</h3><ol>
<li>选中一条边，将两个端点合并为一个顶点</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321164735232.png" alt="image-20230321164735232" style="zoom:80%;" /></p>
<h3 id="12-2-2-二次度量误差-Quadric-Error-Metrics"><a href="#12-2-2-二次度量误差-Quadric-Error-Metrics" class="headerlink" title="12.2.2    二次度量误差 Quadric Error Metrics"></a>12.2.2    二次度量误差 Quadric Error Metrics</h3><ol>
<li>将点放到某一个位置，使得其到原本与它关联面的距离平方和最小</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321165037373.png" alt="image-20230321165037373" style="zoom:80%;" /></p>
<h3 id="12-2-3-边坍缩的二次误差"><a href="#12-2-3-边坍缩的二次误差" class="headerlink" title="12.2.3    边坍缩的二次误差"></a>12.2.3    边坍缩的二次误差</h3><ol>
<li>假设坍缩该边，并且将坍缩后的点放到最佳位置，计算其二次度量误差</li>
<li>从误差小的边开始坍缩</li>
<li>但是每一次坍缩后，需要更新其他受影响边的二次度量误差：用堆维护</li>
<li>本质上是一个贪心算法，用局部最优，组成全局最优</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321165529353.png" alt="image-20230321165529353" style="zoom:80%;" /></p>
<h1 id="第12课-阴影-Shadow-Mapping"><a href="#第12课-阴影-Shadow-Mapping" class="headerlink" title="第12课    阴影 Shadow Mapping"></a>第12课    阴影 Shadow Mapping</h1><ol>
<li>本质上是一个<strong>图像空间</strong>的算法<ol>
<li>不需要知道场景的几何信息</li>
<li>会存在<strong>走样</strong>现象</li>
</ol>
</li>
<li>核心思想：<ol>
<li>点不在阴影里 &lt;=&gt; 摄像机&amp;光源均可以看到该点</li>
</ol>
</li>
<li>Shadow Mapping只能处理点光源的阴影，且会有明显的边界，即<strong>硬阴影</strong></li>
</ol>
<h2 id="12-1-第一步：Render-from-Light"><a href="#12-1-第一步：Render-from-Light" class="headerlink" title="12.1    第一步：Render from Light"></a>12.1    第一步：Render from Light</h2><p>从光源看向场景，记录看到的任何点的深度，即获取Z-Buffer</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321170213274.png" alt="image-20230321170213274" style="zoom:80%;" /></p>
<h2 id="12-2-第二步：Render-from-Eye"><a href="#12-2-第二步：Render-from-Eye" class="headerlink" title="12.2    第二步：Render from Eye"></a>12.2    第二步：Render from Eye</h2><ol>
<li><p>从摄像机看向场景，记录看到的点</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321170427126.png" alt="image-20230321170427126" style="zoom:80%;" /></p>
</li>
<li><p>将看到的点，投影回光源，判断该位置对应的光源看到的深度</p>
<ol>
<li>如果深度相同，则可以看到</li>
<li>如果深度不相同，则不可以看到</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321170510434.png" alt="image-20230321170510434" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321170625379.png" alt="image-20230321170625379" style="zoom:80%;" /></p>
</li>
</ol>
<h2 id="12-3-示例"><a href="#12-3-示例" class="headerlink" title="12.3    示例"></a>12.3    示例</h2><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321170932574.png" alt="image-20230321170932574" style="zoom:80%;" /></p>
<ol>
<li><p>从光源看向场景，记录深度图</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321170818410.png" alt="image-20230321170818410" style="zoom:80%;" /></p>
</li>
<li><p>从相机看向场景，将每一个像素投影回光源看到的图像，对比两个深度</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321170902602.png" alt="image-20230321170902602" style="zoom:80%;" /></p>
</li>
<li><p>由于存在浮点精度、shadow map的分辨率与场景的分辨率等问题，会导致阴影的各种问题</p>
</li>
</ol>
<h2 id="12-4-硬阴影与软阴影"><a href="#12-4-硬阴影与软阴影" class="headerlink" title="12.4    硬阴影与软阴影"></a>12.4    硬阴影与软阴影</h2><ol>
<li>Umbra 本影：完全看不到光源</li>
<li>Penumbra 半影：看到部分光源</li>
<li>软阴影一定是因为光源存在大小</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321171532601.png" alt="image-20230321171532601" style="zoom:80%;" /></p>
<h1 id="第13课-光线追踪1：Whitted-Style-Ray-Tracing"><a href="#第13课-光线追踪1：Whitted-Style-Ray-Tracing" class="headerlink" title="第13课    光线追踪1：Whitted-Style Ray Tracing"></a>第13课    光线追踪1：Whitted-Style Ray Tracing</h1><h2 id="13-1-为什么要使用光线追踪"><a href="#13-1-为什么要使用光线追踪" class="headerlink" title="13.1    为什么要使用光线追踪"></a>13.1    为什么要使用光线追踪</h2><ol>
<li><p>光栅化不能很好解决全局效果</p>
<ol>
<li>软阴影</li>
<li>Glossy反射</li>
<li>间接光照</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321172627995.png" alt="image-20230321172627995" style="zoom:80%;" /></p>
</li>
<li><p>光栅化的速度很快，但是质量较低，通常用于实时渲染</p>
</li>
<li><p>光线追踪质量高，但是非常慢，通常用于离线制作</p>
</li>
</ol>
<h2 id="13-2-基础光线追踪算法"><a href="#13-2-基础光线追踪算法" class="headerlink" title="13.2    基础光线追踪算法"></a>13.2    基础光线追踪算法</h2><h3 id="13-2-1-光线是什么"><a href="#13-2-1-光线是什么" class="headerlink" title="13.2.1    光线是什么"></a>13.2.1    光线是什么</h3><ol>
<li>光线沿直线传播</li>
<li>光线和光线不会发生碰撞</li>
<li>光线从光源发出，经过反射、折射等过程，进入人的眼睛：<strong>光路可逆性</strong></li>
</ol>
<h3 id="13-2-2-光线投射"><a href="#13-2-2-光线投射" class="headerlink" title="13.2.2    光线投射"></a>13.2.2    光线投射</h3><ol>
<li>eye ray：从<strong>眼睛</strong>到屏幕上的<strong>像素</strong>，连接的而成的射线，只记录最近的<strong>交点</strong></li>
<li>shadow ray：从某个<strong>点</strong>到<strong>光源</strong>的连线</li>
<li>根据两条线的关系，判断着色</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321173554636.png" alt="image-20230321173554636" style="zoom:80%;" /></p>
<h3 id="13-2-3-递归光线追踪"><a href="#13-2-3-递归光线追踪" class="headerlink" title="13.2.3    递归光线追踪"></a>13.2.3    递归光线追踪</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321173940996.png" alt="image-20230321173940996" style="zoom:80%;" /></p>
<ol>
<li>primary ray：即eye ray</li>
<li>secondary ray：经过折射/反射后的光线</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321174050214.png" alt="image-20230321174050214" style="zoom:80%;" /></p>
<h2 id="13-3-光线和表面的交点"><a href="#13-3-光线和表面的交点" class="headerlink" title="13.3    光线和表面的交点"></a>13.3    光线和表面的交点</h2><h3 id="13-3-1-光线的数学定义"><a href="#13-3-1-光线的数学定义" class="headerlink" title="13.3.1    光线的数学定义"></a>13.3.1    光线的数学定义</h3><ol>
<li>起点<code>o</code>，方向<code>d</code></li>
<li>射线定义：<code>r(t) = o + td</code></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321174353486.png" alt="image-20230321174353486" style="zoom:80%;" /></p>
<h3 id="13-3-2-光线-与-球-求交点"><a href="#13-3-2-光线-与-球-求交点" class="headerlink" title="13.3.2    光线 与 球 求交点"></a>13.3.2    光线 与 球 求交点</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321174429897.png" alt="image-20230321174429897" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321174531995.png" alt="image-20230321174531995" style="zoom:80%;" /></p>
<h3 id="13-3-3-光线-与-隐式表面-求交点"><a href="#13-3-3-光线-与-隐式表面-求交点" class="headerlink" title="13.3.3    光线 与 隐式表面 求交点"></a>13.3.3    光线 与 隐式表面 求交点</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321174700426.png" alt="image-20230321174700426" style="zoom:80%;" /></p>
<h3 id="13-3-4-光线-与-三角形-求交点"><a href="#13-3-4-光线-与-三角形-求交点" class="headerlink" title="13.3.4    光线 与 三角形 求交点"></a>13.3.4    光线 与 三角形 求交点</h3><blockquote>
<p>如果射线与物体的交点数量为<strong>奇数</strong>，则点在<strong>物体内</strong>；如果是<strong>偶数</strong>，则在<strong>物体外</strong></p>
</blockquote>
<ol>
<li>光线和平面求交</li>
<li>判断点是否在三角形内</li>
</ol>
<h4 id="13-3-4-1-平面的数学定义"><a href="#13-3-4-1-平面的数学定义" class="headerlink" title="13.3.4.1    平面的数学定义"></a>13.3.4.1    平面的数学定义</h4><ol>
<li>给一个点$p_0$，一条法线$\vec{N}$</li>
<li>则平面为：$(p-p_0)·\vec{N} = 0$</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321175203939.png" alt="image-20230321175203939" style="zoom:80%;" /></p>
<h4 id="13-3-4-2-光线和平面的交点"><a href="#13-3-4-2-光线和平面的交点" class="headerlink" title="13.3.4.2    光线和平面的交点"></a>13.3.4.2    光线和平面的交点</h4><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321203414616.png" alt="image-20230321203414616" style="zoom:80%;" /></p>
<h4 id="13-3-4-3-Moller-Trumbore算法"><a href="#13-3-4-3-Moller-Trumbore算法" class="headerlink" title="13.3.4.3    Moller Trumbore算法"></a>13.3.4.3    Moller Trumbore算法</h4><ol>
<li>用重心坐标表示平面：$(1-b_1-b_2)\vec{P_0} + b_1\vec{P_1} + b_2\vec{P_2}$</li>
<li>判定点在射线上：$t\ge 0$</li>
<li>判定点在三角形内：$b_1 \ge 0,b_2 \ge 0$</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321203545908.png" alt="image-20230321203545908" style="zoom:80%;" /></p>
<h2 id="13-4-加速-光线-与-三角形表面-求交"><a href="#13-4-加速-光线-与-三角形表面-求交" class="headerlink" title="13.4    加速 光线 与 三角形表面 求交"></a>13.4    加速 光线 与 三角形表面 求交</h2><h3 id="13-4-1-包围盒-Bounding-Volumes"><a href="#13-4-1-包围盒-Bounding-Volumes" class="headerlink" title="13.4.1    包围盒 Bounding Volumes"></a>13.4.1    包围盒 Bounding Volumes</h3><ol>
<li>用一个简单的形状，将物体包围起来，如果不能与包围盒相交，则一定不会与物体相交</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321215130003.png" alt="image-20230321215130003" style="zoom:80%;" /></p>
<h3 id="13-4-2-轴对齐包围盒AABB：Axis-Aligned-Bounding-Box"><a href="#13-4-2-轴对齐包围盒AABB：Axis-Aligned-Bounding-Box" class="headerlink" title="13.4.2    轴对齐包围盒AABB：Axis-Aligned Bounding Box"></a>13.4.2    轴对齐包围盒AABB：Axis-Aligned Bounding Box</h3><ol>
<li><p>空间中的长方体，可以理解为3对表面的交集</p>
</li>
<li><p>轴对齐包围盒：长方体的每一个边，均与坐标轴平行</p>
</li>
<li><p>二维空间，光线与长方形求交</p>
<ol>
<li>对于竖着的情况，可以得到在$t=t<em>{x-min}$时，与$x=x_0$相交；在$t=t</em>{x-max}$时，与$x=x_1$相交</li>
<li>对于横着的情况，可以得到在$t=t<em>{y-min}$时，与$y=y_0$相交；在$t=t</em>{y-max}$时，与$y=y_1$相交</li>
<li>由于长方形可以看作四条线的交集，因此光线在长方形中的部分，也可以看作$[t<em>{x-min},t</em>{x-max}]$和$[t<em>{y-min},t</em>{y-max}]$的交集</li>
<li>从而可以得到光线与长方形的交点对应的时间$t<em>{enter} = \max(t</em>{x-min},t<em>{y-min})$，$t</em>{exit}=\min(t<em>{x-max},t</em>{y-max})$</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321220625451.png" alt="image-20230321220625451" style="zoom:80%;" /></p>
</li>
<li><p>三维空间，光线与长方体求交</p>
<ol>
<li>只有当光线同时进入了3对表面，才能说光线进入了长方体</li>
<li>光线只要离开了1对表面，就说钢线离开了长方体</li>
<li>对于每一对表面，计算一次$[t<em>{min},t</em>{max}]$</li>
<li>则对于长方体来说，$t<em>{enter} = \max(t</em>{min})$，$t<em>{exit}=\min(t</em>{max})$</li>
</ol>
</li>
<li><p>如果$t_{exit}&lt;0$，则说明盒子在光线的背后，不可能有交点</p>
</li>
<li><p>如果$t<em>{exit}\ge0, t</em>{enter}&lt;0$，则说明光线的起点在盒子里面，肯定有交点</p>
</li>
</ol>
<p><strong>因此，光线与AABB有交点，当且仅当：$t<em>{enter}&lt;t</em>{exit}$  并且  $t_{exit} \ge 0$</strong></p>
<h1 id="第14课-光线追踪2：使用AABB包围盒加速光线追踪"><a href="#第14课-光线追踪2：使用AABB包围盒加速光线追踪" class="headerlink" title="第14课    光线追踪2：使用AABB包围盒加速光线追踪"></a>第14课    光线追踪2：使用AABB包围盒加速光线追踪</h1><h2 id="14-1-直接使用AABB包围盒"><a href="#14-1-直接使用AABB包围盒" class="headerlink" title="14.1    直接使用AABB包围盒"></a>14.1    直接使用AABB包围盒</h2><ol>
<li><p>找到包围盒</p>
</li>
<li><p>将包围盒分为格子<code>Grid</code></p>
</li>
<li><p>如果某个格子与物体的表面相交，则标记该格子</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321222357738.png" alt="image-20230321222357738" style="zoom:80%;" /></p>
</li>
<li><p>将光线与格子求交</p>
<ol>
<li>如果光线与格子相交，且格子内有物体，则将光线与对应物体求交</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321222609290.png" alt="image-20230321222609290" style="zoom:80%;" /></p>
</li>
<li><p>格子过于稀疏 or 过于密集，均会使效率变低</p>
</li>
<li><p>通常，格子的数量是场景中的物体数目的整数倍：<code>#cells = C * #objs</code></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321222827253.png" alt="image-20230321222827253" style="zoom:80%;" /></p>
</li>
</ol>
<h2 id="14-2-空间划分-Spatial-Partitions"><a href="#14-2-空间划分-Spatial-Partitions" class="headerlink" title="14.2    空间划分 Spatial Partitions"></a>14.2    空间划分 Spatial Partitions</h2><p>将空间划分为大小不同的盒子</p>
<p>缺点：</p>
<ol>
<li>难以判断哪些三角形属于当前格子</li>
<li>一个三角形可能会处在多个格子中</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230321225126054.png" alt="image-20230321225126054" style="zoom:80%;" /></p>
<h3 id="14-2-1-KD-Tree-预处理"><a href="#14-2-1-KD-Tree-预处理" class="headerlink" title="14.2.1    KD-Tree 预处理"></a>14.2.1    KD-Tree 预处理</h3><ol>
<li>注意，每一个部分都要划分，按照水平、竖直的顺序交替分割</li>
<li>中间节点：<ol>
<li>分割轴：x、y、z</li>
<li>分割位置：在分割轴上的分割点的坐标</li>
<li>子节点：指向子节点的指针，有2个子节点</li>
</ol>
</li>
<li>叶节点：<ol>
<li>记录和该格子相交的物体 </li>
</ol>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230322164639853.png" alt="image-20230322164639853" style="zoom:80%;" /></p>
<h3 id="14-2-2-KD-Tree加速光线追踪"><a href="#14-2-2-KD-Tree加速光线追踪" class="headerlink" title="14.2.2    KD-Tree加速光线追踪"></a>14.2.2    KD-Tree加速光线追踪</h3><ol>
<li>如果光线和格子没有交点，则不做操作</li>
<li>如果光线和格子有交点<ol>
<li>如果格子为叶节点，则光线与叶节点中的所有物体求交</li>
<li>否则与格子的两个子节点求交</li>
</ol>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230322170220976.png" alt="image-20230322170220976" style="zoom:80%;" /></p>
<h2 id="14-3-物体划分-Object-Partitions"><a href="#14-3-物体划分-Object-Partitions" class="headerlink" title="14.3    物体划分 Object Partitions"></a>14.3    物体划分 Object Partitions</h2><ol>
<li>将物体分为两堆，然后再求包围盒</li>
<li>包围盒之间可能有相交，但可以保证一个三角形最多只在一个包围盒中</li>
</ol>
<h3 id="14-3-1-层次包围盒-BVH：Bounding-Volume-Hierarchy"><a href="#14-3-1-层次包围盒-BVH：Bounding-Volume-Hierarchy" class="headerlink" title="14.3.1    层次包围盒 BVH：Bounding Volume Hierarchy"></a>14.3.1    层次包围盒 BVH：Bounding Volume Hierarchy</h3><ol>
<li>找到一个包围盒</li>
<li>递归的将包围盒中的物体划分为两个部分</li>
<li>重新计算包围盒</li>
<li>重复23，直到每个包围和中的物体数量足够少</li>
<li>将物体存在每个叶节点中</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230322171211451.png" alt="image-20230322171211451" style="zoom:80%;" /></p>
<h3 id="14-3-2-划分方法"><a href="#14-3-2-划分方法" class="headerlink" title="14.3.2    划分方法"></a>14.3.2    划分方法</h3><ol>
<li>每次找最长的轴进行划分</li>
<li>每次找第n/2个三角形，进行划分，保证两边的三角形个数相差不多<ol>
<li>根据重心坐标，划分三角形的位置</li>
<li>可以类似于找第k大数，通过快排，在O(n)时间内找到</li>
</ol>
</li>
<li>如果场景中的物体移动了，就需要重新建立BVH树</li>
</ol>
<h3 id="14-3-3-BVH加速光线追踪"><a href="#14-3-3-BVH加速光线追踪" class="headerlink" title="14.3.3    BVH加速光线追踪"></a>14.3.3    BVH加速光线追踪</h3><ol>
<li>如果光线和包围盒没有交点，则不做操作</li>
<li>如果光线和包围盒有交点<ol>
<li>如果包围盒为叶节点，则光线与叶节点中的所有物体求交</li>
<li>否则与包围盒的两个子节点求交</li>
</ol>
</li>
</ol>
<h3 id="14-3-4-空间划分-vs-物体划分"><a href="#14-3-4-空间划分-vs-物体划分" class="headerlink" title="14.3.4    空间划分 vs 物体划分"></a>14.3.4    空间划分 vs 物体划分</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230322172055257.png" alt="image-20230322172055257" style="zoom:80%;" /></p>
<h1 id="第15课-光线追踪3：BRDF-amp-渲染方程"><a href="#第15课-光线追踪3：BRDF-amp-渲染方程" class="headerlink" title="第15课    光线追踪3：BRDF &amp; 渲染方程"></a>第15课    光线追踪3：BRDF &amp; 渲染方程</h1><h2 id="15-1-辐射度量学-Basic-radiometry"><a href="#15-1-辐射度量学-Basic-radiometry" class="headerlink" title="15.1    辐射度量学 Basic radiometry"></a>15.1    辐射度量学 Basic radiometry</h2><ol>
<li>如何描述光照：定义了一系列的方法和单位</li>
<li>给光赋予了一系列空间上的属性（依旧是基于几何光学）<ol>
<li>Radiant flux：辐射通量</li>
<li>intensity：强度</li>
<li>irradiance：辐射通量密度</li>
<li>radiance：辐射</li>
</ol>
</li>
<li>在物理上准确定义光照的方法</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230322174129089.png" alt="image-20230322174129089" style="zoom:80%;" /></p>
<h3 id="15-1-1-Radiant-Flux-Power：单位时间的能量"><a href="#15-1-1-Radiant-Flux-Power：单位时间的能量" class="headerlink" title="15.1.1    Radiant Flux/Power：单位时间的能量"></a>15.1.1    Radiant Flux/Power：单位时间的能量</h3><ol>
<li>Radiant <strong>Energy</strong>：光源辐射出来的能量，$Q$，单位为<strong>焦耳J</strong>，在CG中基本不使用</li>
<li>Radiant <strong>Flux/Power</strong>：单位时间内发射的能量，$\Phi=\frac{dQ}{dt}$，单位为<strong>瓦特W</strong>/<strong>流明lm=lumen</strong></li>
</ol>
<h3 id="15-1-2-Radiant-Intensity：单位立体角的能量"><a href="#15-1-2-Radiant-Intensity：单位立体角的能量" class="headerlink" title="15.1.2    Radiant Intensity：单位立体角的能量"></a>15.1.2    Radiant Intensity：单位立体角的能量</h3><ol>
<li>Radiant <strong>Intensity</strong>：单位立体角上的power，$I(\omega)=\frac{d\Phi}{d\omega}$，单位为<strong>坎德拉cd</strong><ol>
<li>也就是光源在某个方向上的亮度</li>
</ol>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230322174233794.png" alt="image-20230322174233794" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230322175039042.png" alt="image-20230322175039042" style="zoom:80%;" /></p>
<h4 id="15-1-2-1-立体角-Solid-Angles"><a href="#15-1-2-1-立体角-Solid-Angles" class="headerlink" title="15.1.2.1    立体角 Solid Angles"></a>15.1.2.1    立体角 Solid Angles</h4><ol>
<li>角度：$\theta=\frac{l}{r}$，单位为<strong>rad</strong></li>
<li>立体角：$\Omega=\frac{A}{r^2}$，单位为<strong>sr</strong></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230322174554385.png" alt="image-20230322174554385" style="zoom:80%;" /></p>
<h4 id="15-1-2-2-单位立体角-Differential-Solid-Angles"><a href="#15-1-2-2-单位立体角-Differential-Solid-Angles" class="headerlink" title="15.1.2.2    单位立体角  Differential Solid Angles"></a>15.1.2.2    单位立体角  Differential Solid Angles</h4><ol>
<li>单位面积：$dA=r^2sin\theta\ d\theta\ d\phi$</li>
<li>单位立体角：$d\omega=sin\theta\ d\theta\ d\phi$</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230322174804469.png" alt="image-20230322174804469" style="zoom:80%;" /></p>
<h3 id="15-1-4-Irradiance：单位面积的能量"><a href="#15-1-4-Irradiance：单位面积的能量" class="headerlink" title="15.1.4      Irradiance：单位面积的能量"></a>15.1.4      Irradiance：单位面积的能量</h3><ol>
<li><p>Irradiance：表面上<strong>与光线垂直</strong>的单位面积接收到的能量，$E(x)=\frac{d\phi(x)}{dA}$，单位<strong>$\frac{W}{m^2}$，$\frac{lm}{m^2}$=lux</strong></p>
<ol>
<li>如果表面与光线<strong>不垂直</strong>，则需要投影到垂直方向：$E(x)=\frac{d\phi(x)}{dA}\ \cos \theta$，$\theta$为光线与法线的夹角</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323202218229.png" alt="image-20230323202218229" style="zoom:80%;" /></p>
</li>
<li><p>光在传播的过程中，Intensity没有变，而Irradiate变小了，因为面积变大了</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323202709508.png" alt="image-20230323202709508" style="zoom:80%;" /></p>
</li>
</ol>
<h3 id="15-1-5-Radiance：单位立体角-amp-单位面积的能量"><a href="#15-1-5-Radiance：单位立体角-amp-单位面积的能量" class="headerlink" title="15.1.5    Radiance：单位立体角&amp;单位面积的能量"></a>15.1.5    Radiance：单位立体角&amp;单位面积的能量</h3><ol>
<li>Radiance：表面上<strong>与光线垂直</strong>的单位面积接收到的能量，$L(p,\omega)=\frac{d^2\phi(p,\omega)}{d\omega dA cos \theta}$，单位<strong>$\frac{cd}{ m^2}$，$\frac{lm}{sr\ m^2}=\frac{lm}{sr\ m^2}$=nit</strong><ol>
<li>单位面积的Intensity：$L(p,\omega)=\frac{dI(p,\omega)}{dA cos \theta}$</li>
<li>单位立体角的Irradiance：$L(p,\omega)=\frac{dE(p)}{d\omega cos \theta}$</li>
</ol>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323203046905.png" alt="image-20230323203046905" style="zoom:80%;" /></p>
<h3 id="15-1-6-Irradiance-vs-Radiance"><a href="#15-1-6-Irradiance-vs-Radiance" class="headerlink" title="15.1.6    Irradiance vs Radiance"></a>15.1.6    Irradiance vs Radiance</h3><ol>
<li><strong>Irradiance</strong>：单位面积<strong>dA</strong>接收到的所有能量，$E(p)$</li>
<li><strong>Radiance</strong>：单位面积<strong>dA</strong>在单位方向<strong>dω</strong>处接收到的所有能量，$L(p,\omega)$</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323203503761.png" alt="image-20230323203503761" style="zoom:80%;" /></p>
<h2 id="15-2-BRDF：双向反射分布函数"><a href="#15-2-BRDF：双向反射分布函数" class="headerlink" title="15.2    BRDF：双向反射分布函数"></a>15.2    BRDF：双向反射分布函数</h2><blockquote>
<p><strong>Bidirectional Reflectance Distribution Function</strong></p>
</blockquote>
<h3 id="15-2-1-某个点的反射"><a href="#15-2-1-某个点的反射" class="headerlink" title="15.2.1    某个点的反射"></a>15.2.1    某个点的反射</h3><ol>
<li>单位面积<strong>dA</strong>，在某个单位立体角<strong>ω~i~</strong>处吸收能量<strong>dE(ω~i~)</strong></li>
<li>会反射到另一个单位立体角<strong>ω~r~</strong>、单位面积的能量<strong>dL~r~(x, ω~r~)</strong></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323204145095.png" alt="image-20230323204145095" style="zoom:80%;" /></p>
<h3 id="15-2-2-BRDF"><a href="#15-2-2-BRDF" class="headerlink" title="15.2.2    BRDF"></a>15.2.2    BRDF</h3><ol>
<li>入射光的Radiance：<strong>dE~i~(ω~i~)</strong></li>
<li>反射光的Irradiance：<strong>dL~r~(ω~r~)</strong></li>
<li>入射光在反射方向的能量分布比例<strong>f~r~(ω~i~ → ω~r~)</strong>为：<ol>
<li>入射光的Radiance / 反射光的Irradiance </li>
</ol>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323204215288.png" alt="image-20230323204215288" style="zoom:80%;" /></p>
<h3 id="15-2-3-反射方程-Reflection-Equation"><a href="#15-2-3-反射方程-Reflection-Equation" class="headerlink" title="15.2.3    反射方程 Reflection Equation"></a>15.2.3    反射方程 Reflection Equation</h3><ol>
<li>某个着色点<strong>p</strong>，当反射方向为<strong>ω~r~</strong>是，反射的光<strong>L~r~(p, ω~r~)</strong>为：<ol>
<li>在每个入射方向<strong>ω~i~</strong>的反射的能量<strong>f~r~(p, ω~i~ → ω~r~) L~i~(p, ω~i~) cos θ~i~</strong>，对入射方向立体角<strong>dω~i~</strong>的积分</li>
<li>只考虑半球<strong>H^2^ / Ω+</strong></li>
</ol>
</li>
<li>问题：任何出射的radiance，都可能作为其他着色点的入射的radiance，因此存在递归定义</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323204816473.png" alt="image-20230323204816473" style="zoom:80%;" /></p>
<h2 id="15-3-渲染方程-Rendering-Equation"><a href="#15-3-渲染方程-Rendering-Equation" class="headerlink" title="15.3    渲染方程 Rendering Equation"></a>15.3    渲染方程 Rendering Equation</h2><p>某个点<strong>p</strong>向某个方向<strong>ω~o~</strong>出射的光<strong>L~o~(p, ω~o~)</strong>由两部分构成</p>
<ol>
<li>自己产生的光：$L_e(p, ω_o)$</li>
<li>反射的光：$\int_{\Omega+}L_i(p,\omega_i)f_r(p,\omega_i,\omega_o)(n·\omega_i)d\omega_i$</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323205330782.png" alt="image-20230323205330782" style="zoom:80%;" /></p>
<h3 id="15-3-1-一个点光源"><a href="#15-3-1-一个点光源" class="headerlink" title="15.3.1    一个点光源"></a>15.3.1    一个点光源</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323211001791.png" alt="image-20230323211001791" style="zoom:80%;" /></p>
<h3 id="15-3-2-很多个点光源：加和"><a href="#15-3-2-很多个点光源：加和" class="headerlink" title="15.3.2    很多个点光源：加和"></a>15.3.2    很多个点光源：加和</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323211106534.png" alt="image-20230323211106534" style="zoom:80%;" /></p>
<h3 id="15-3-3-面光源：很多个点光源的集合-gt-积分"><a href="#15-3-3-面光源：很多个点光源的集合-gt-积分" class="headerlink" title="15.3.3    面光源：很多个点光源的集合 =&gt; 积分"></a>15.3.3    面光源：很多个点光源的集合 =&gt; 积分</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323211423936.png" alt="image-20230323211423936" style="zoom:80%;" /></p>
<h3 id="15-3-4-其他表面的反射：当成面光源使用"><a href="#15-3-4-其他表面的反射：当成面光源使用" class="headerlink" title="15.3.4    其他表面的反射：当成面光源使用"></a>15.3.4    其他表面的反射：当成面光源使用</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323211407432.png" alt="image-20230323211407432" style="zoom:80%;" /></p>
<h3 id="15-3-5-渲染方程的简化表示"><a href="#15-3-5-渲染方程的简化表示" class="headerlink" title="15.3.5    渲染方程的简化表示"></a>15.3.5    渲染方程的简化表示</h3><blockquote>
<p>积分方程</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323211552304.png" alt="image-20230323211552304" style="zoom:80%;" /></p>
<blockquote>
<p>线性算子等式</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323211712567.png" alt="image-20230323211712567" style="zoom:80%;" /></p>
<h3 id="15-3-6-光线弹射n次的光线追踪-gt-全局光照"><a href="#15-3-6-光线弹射n次的光线追踪-gt-全局光照" class="headerlink" title="15.3.6    光线弹射n次的光线追踪 =&gt; 全局光照"></a>15.3.6    光线弹射n次的光线追踪 =&gt; 全局光照</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323212038657.png" alt="image-20230323212038657" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323212529890.png" alt="image-20230323212529890" style="zoom:80%;" /></p>
<h2 id="15-4-概率论"><a href="#15-4-概率论" class="headerlink" title="15.4    概率论"></a>15.4    概率论</h2><h3 id="15-4-1-PDF：概率分布函数，X-p-x"><a href="#15-4-1-PDF：概率分布函数，X-p-x" class="headerlink" title="15.4.1    PDF：概率分布函数，X ~ p(x)"></a>15.4.1    PDF：概率分布函数，X ~ p(x)</h3><blockquote>
<p><strong>Probability Distribution Function</strong></p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323213850665.png" alt="image-20230323213850665" style="zoom:80%;" /></p>
<h3 id="15-4-2-随机变量函数的期望"><a href="#15-4-2-随机变量函数的期望" class="headerlink" title="15.4.2    随机变量函数的期望"></a>15.4.2    随机变量函数的期望</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323214009047.png" alt="image-20230323214009047" style="zoom:80%;" /></p>
<h1 id="第16课-光线追踪4：蒙特卡洛积分-amp-路径追踪"><a href="#第16课-光线追踪4：蒙特卡洛积分-amp-路径追踪" class="headerlink" title="第16课    光线追踪4：蒙特卡洛积分 &amp; 路径追踪"></a>第16课    光线追踪4：蒙特卡洛积分 &amp; 路径追踪</h1><h2 id="16-1-复习"><a href="#16-1-复习" class="headerlink" title="16.1    复习"></a>16.1    复习</h2><blockquote>
<p>渲染方程：描述了光线的传递 </p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323221310058.png" alt="image-20230323221310058" style="zoom:80%;" /></p>
<ol>
<li>存在积分</li>
<li>是一个递归的计算：因为入射光可能是其他面的反射光</li>
</ol>
<h2 id="16-2-蒙特卡洛积分：采样求定积分"><a href="#16-2-蒙特卡洛积分：采样求定积分" class="headerlink" title="16.2    蒙特卡洛积分：采样求定积分"></a>16.2    蒙特卡洛积分：采样求定积分</h2><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323221704667.png" alt="image-20230323221704667" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323222122882.png" alt="image-20230323222122882" style="zoom:80%;" /></p>
<ol>
<li>在$[a,b]$中采样多次，设每次采样点为$x_i$，对应的函数值为$f(x_i)$，则使用$(b-a)*f(x_i)$，近似定积分的值</li>
<li>当采样次数足够多时，求平均值，即可得到实际的定积分的值</li>
<li>设随机采样点$X<em>i$ ~ $p(x)$，要求$\int</em>{a}^b p(x)=1$，则蒙特卡洛的积分值为：$F<em>N=\frac{1}{N}\sum</em>{i=1}^{N}\frac{f(X_i)}{p(X_i)}$</li>
</ol>
<blockquote>
<p>示例：用$X_i$ ~ $p(x)$ = C采样</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323222403543.png" alt="image-20230323222403543" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323222419854.png" alt="image-20230323222419854" style="zoom:80%;" /></p>
</blockquote>
<p>注意：</p>
<ol>
<li>采样次数越多，结果越精确</li>
<li>在x上采样，则就是在x上积分</li>
</ol>
<h2 id="16-3-路径追踪：Path-Tracing"><a href="#16-3-路径追踪：Path-Tracing" class="headerlink" title="16.3    路径追踪：Path Tracing"></a>16.3    路径追踪：Path Tracing</h2><h3 id="16-3-1-Whitted-Style-Ray-Tracing-的做法存在的问题"><a href="#16-3-1-Whitted-Style-Ray-Tracing-的做法存在的问题" class="headerlink" title="16.3.1    Whitted-Style Ray Tracing 的做法存在的问题"></a>16.3.1    Whitted-Style Ray Tracing 的做法存在的问题</h3><p>不断的弹射光线，在任意一个位置均弹射光线</p>
<ol>
<li>如果是光滑物体：则沿镜面方向反射、折射方向折射</li>
<li>如果是漫反射物体：停止弹射</li>
</ol>
<p>存在问题：</p>
<ol>
<li>对于glossy物体，不能按照specular那样的镜面反射处理</li>
<li>漫反射物体会将光线均匀的弹射到各个部分，而非不反射</li>
</ol>
<h3 id="16-3-2-使用蒙特卡洛积分，实现渲染方程中的积分"><a href="#16-3-2-使用蒙特卡洛积分，实现渲染方程中的积分" class="headerlink" title="16.3.2    使用蒙特卡洛积分，实现渲染方程中的积分"></a>16.3.2    使用蒙特卡洛积分，实现渲染方程中的积分</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323224040938.png" alt="image-20230323224040938" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323224120396.png" alt="image-20230323224120396" style="zoom:80%;" /></p>
<h4 id="16-3-2-1-直接光照"><a href="#16-3-2-1-直接光照" class="headerlink" title="16.3.2.1    直接光照"></a>16.3.2.1    直接光照</h4><p><strong>shade(p, ω~o~)</strong></p>
<ol>
<li>随机选择<strong>N</strong>个方向，N的分布满足某一种PDF</li>
<li><strong>L~o~</strong>初始化为0.0</li>
<li>对于每一个方向<strong>ω~i~</strong><ol>
<li>追踪光线<strong>r(p, ω~i~)</strong></li>
<li>如果光线<strong>r</strong>击中了光源<ol>
<li><strong>L~o~ += (1/N) <em> L~i~ </em>  f~r~ * cos θ / PDF(ω~i~)</strong></li>
</ol>
</li>
</ol>
</li>
<li>返回<strong>L~o~</strong></li>
</ol>
<h4 id="16-3-2-2-间接光照"><a href="#16-3-2-2-间接光照" class="headerlink" title="16.3.2.2    间接光照"></a>16.3.2.2    间接光照</h4><blockquote>
<p>相当于从P点看Q点的直接光照</p>
</blockquote>
<p><strong>shade(p, ω~o~)</strong></p>
<ol>
<li>随机选择<strong>N</strong>个方向，N的分布满足某一种PDF</li>
<li><strong>L~o~</strong>初始化为0.0</li>
<li>对于每一个方向<strong>ω~i~</strong><ol>
<li>追踪光线<strong>r(p, ω~i~)</strong>（p点发出，方向为ω~i~）</li>
<li>如果光线<strong>r</strong>击中了光源<ol>
<li><strong>L~o~ += (1/N) <em> L~i~ </em>  f~r~ * cos θ / PDF(ω~i~)</strong></li>
</ol>
</li>
<li>如果光线<strong>r</strong>击中了物体，且物体位于<strong>q</strong><ol>
<li><strong>L~o~ += (1/N) <em> shade(q, -ω~i~) </em>  f~r~ * cos θ / PDF(ω~i~)</strong></li>
</ol>
</li>
</ol>
</li>
<li>返回<strong>L~o~</strong></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323224729779.png" alt="image-20230323224729779" style="zoom:80%;" /></p>
<h2 id="16-4-路径追踪：解决光线数量爆炸"><a href="#16-4-路径追踪：解决光线数量爆炸" class="headerlink" title="16.4    路径追踪：解决光线数量爆炸"></a>16.4    路径追踪：解决光线数量爆炸</h2><blockquote>
<p>问题：光线的数量会爆炸：光线数量 = N ^反射次数^，只有当N = 1时，才不会指数爆炸 ==&gt; 路径追踪</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323225058558.png" alt="image-20230323225058558" style="zoom:80%;" /></p>
<h3 id="16-4-1-每一个着色点，只使用1根光线进行追踪"><a href="#16-4-1-每一个着色点，只使用1根光线进行追踪" class="headerlink" title="16.4.1    每一个着色点，只使用1根光线进行追踪"></a>16.4.1    每一个着色点，只使用1根光线进行追踪</h3><p><strong>shade(p, ω~o~)</strong></p>
<ol>
<li>随机选择<strong>1</strong>个方向<strong>ω~i~</strong>，ω~i~的分布满足某一种PDF</li>
<li>追踪光线<strong>r(p, ω~i~)</strong>（p点发出，方向为ω~i~）</li>
<li>如果光线<strong>r</strong>击中了光源<ol>
<li>返回 <strong>L~o~ = L~i~ <em>  f~r~ </em> cos θ / PDF(ω~i~)</strong></li>
</ol>
</li>
<li>如果光线<strong>r</strong>击中了物体，且物体位于<strong>q</strong><ol>
<li>返回 <strong>L~o~ = shade(q, -ω~i~) <em>  f~r~ </em> cos θ / PDF(ω~i~)</strong></li>
</ol>
</li>
</ol>
<h3 id="16-4-2-解决噪声问题：选择多个穿过该着色点的路径，每个路径1条光线"><a href="#16-4-2-解决噪声问题：选择多个穿过该着色点的路径，每个路径1条光线" class="headerlink" title="16.4.2    解决噪声问题：选择多个穿过该着色点的路径，每个路径1条光线"></a>16.4.2    解决噪声问题：选择多个穿过该着色点的路径，每个路径1条光线</h3><p><strong>ray_generation(camPos, pixel)</strong></p>
<ol>
<li>在该像素中，随机选择<strong>N</strong>个采样位置</li>
<li><strong>pixel_radiance = 0.0</strong></li>
<li>对于每一个采样位置<ol>
<li>追踪光线<strong>r(camPos, cam_to_sample)</strong></li>
<li>如果光线<strong>r</strong>在<strong>p</strong>点击中场景<ol>
<li><strong>pixel_radiance += (1/N) * shade(p, sample_to_cam)</strong></li>
</ol>
</li>
</ol>
</li>
<li>返回<strong>pixel_radiance</strong></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323225611788.png" alt="image-20230323225611788" style="zoom:80%;" /></p>
<h3 id="16-4-3-解决递归无法停下问题：Runssian-Roulette"><a href="#16-4-3-解决递归无法停下问题：Runssian-Roulette" class="headerlink" title="16.4.3    解决递归无法停下问题：Runssian Roulette"></a>16.4.3    解决递归无法停下问题：Runssian Roulette</h3><blockquote>
<p>问题：<strong>shade(p, ω~o~)</strong>是递归定义的，可能无法停下 ==&gt; RR，一定概率停止追踪</p>
</blockquote>
<ol>
<li>定义一个概率<strong>P</strong></li>
<li><strong>P</strong>的概率，发射一个光线，并且返回<strong>L~o~ / P</strong></li>
<li><strong>1-P</strong>的概率，不发射光线，返回<strong>0</strong></li>
<li>最后的期望依旧为<strong>L~o~</strong></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323230308526.png" alt="image-20230323230308526" style="zoom:80%;" /></p>
<p><strong>shade(p, ω~o~)</strong></p>
<ol>
<li>定义概率<strong>P_RR</strong></li>
<li>随机生成一个在<strong>[0,1]</strong>的实数<strong>dist</strong>， 如果<strong>dist&gt;P_RR</strong>，则返回<strong>0.0</strong></li>
<li>随机选择<strong>1</strong>个方向<strong>ω~i~</strong>，ω~i~的分布满足某一种PDF</li>
<li>追踪光线<strong>r(p, ω~i~)</strong>（p点发出，方向为ω~i~）</li>
<li>如果光线<strong>r</strong>击中了光源<ol>
<li>返回 <strong>L~o~ = L~i~ <em>  f~r~ </em> cos θ / PDF(ω~i~) / P_RR</strong></li>
</ol>
</li>
<li>如果光线<strong>r</strong>击中了物体，且物体位于<strong>q</strong><ol>
<li>返回 <strong>L~o~ = shade(q, -ω~i~) <em>  f~r~ </em> cos θ / PDF(ω~i~) / P_RR</strong></li>
</ol>
</li>
</ol>
<h3 id="16-4-4-让路径追踪变得高效：对光源采样"><a href="#16-4-4-让路径追踪变得高效：对光源采样" class="headerlink" title="16.4.4    让路径追踪变得高效：对光源采样"></a>16.4.4    让路径追踪变得高效：对光源采样</h3><blockquote>
<p>均匀采样，导致很多光线无法打到小的光源，导致浪费计算力</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323231200753.png" alt="image-20230323231200753" style="zoom:80%;" /></p>
<blockquote>
<p>对光源进行采样，然后将渲染方程修改为对光源的积分：即找到 <strong>dω</strong> 与 <strong>dA</strong> 的关系</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323231551425.png" alt="image-20230323231551425" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323231600802.png" alt="image-20230323231600802" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323231643529.png" alt="image-20230323231643529" style="zoom:80%;" /></p>
<blockquote>
<p>优化算法</p>
</blockquote>
<p>将radiance分为两个部分：</p>
<ol>
<li>来自光源的radiance：直接采样光源</li>
<li>其他反射光：使用RR的方法</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230323231831265.png" alt="image-20230323231831265" style="zoom:80%;" /></p>
<p><strong>shade(p, ω~o~)</strong></p>
<ol>
<li><blockquote>
<p>光源的贡献</p>
</blockquote>
<ol>
<li>均匀的对位于<strong>x’</strong>的光源进行采样，<strong>PDF_light = 1 / A</strong></li>
<li>从<strong>p</strong>向<strong>x’</strong>发射一条光线，如果光线不会被阻挡，则<ol>
<li><strong>L_dir = L~i~ <em> f~r~ </em> cos θ * cos θ‘ / |x’ - p|^2^ / PDF_light</strong></li>
</ol>
</li>
</ol>
</li>
<li><blockquote>
<p>其他反射光的贡献</p>
</blockquote>
<ol>
<li><strong>L_indir = 0.0</strong></li>
<li>判断是否需要采样，RR的概率为<strong>P_RR</strong></li>
<li>均匀的对半球进行采样，方位角为<strong>ω~i~</strong>，<strong>PDF_hemi = 1 / 2Π</strong></li>
<li>追踪光线<strong>r(p, ω~i~)</strong>（p点发出，方向为ω~i~）</li>
<li>如果光线<strong>r</strong>击中了<strong>非发光体</strong>，且物体位于<strong>q</strong><ol>
<li><strong>L_indir = shade(q, -ω~i~) <em>  f~r~ </em> cos θ / PDF_hemi  / P_RR</strong></li>
</ol>
</li>
</ol>
</li>
<li><p>返回<strong>L_dir + L_indir</strong></p>
</li>
</ol>
<h1 id="第17课-材质与外观"><a href="#第17课-材质与外观" class="headerlink" title="第17课    材质与外观"></a>第17课    材质与外观</h1><h2 id="17-1-材质-BRDF-BTDF-BSDF"><a href="#17-1-材质-BRDF-BTDF-BSDF" class="headerlink" title="17.1    材质 == BRDF + BTDF= BSDF"></a>17.1    材质 == BRDF + BTDF= BSDF</h2><h3 id="17-1-1-漫反射材质-BRDF"><a href="#17-1-1-漫反射材质-BRDF" class="headerlink" title="17.1.1    漫反射材质 BRDF"></a>17.1.1    漫反射材质 BRDF</h3><ol>
<li>光线会被均匀的反射到每个方向</li>
<li>完全不吸收能量、不发光的漫反射材质：$f_r=\frac{\rho}{\pi} \in[0,\frac{1}{\pi}]$<ol>
<li>其中$\rho \in [0,1]$，表示对光的反射率</li>
</ol>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230324152718150.png" alt="image-20230324152718150" style="zoom:80%;" /></p>
<h3 id="17-1-2-镜面反射-BRDF"><a href="#17-1-2-镜面反射-BRDF" class="headerlink" title="17.1.2    镜面反射 BRDF"></a>17.1.2    镜面反射 BRDF</h3><ol>
<li>将入射光、反射光、平面放到立体角中</li>
<li>立体角坐标轴的Z轴方向为法线方向，XY平面为物体表面</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230322174804469.png" alt="image-20230322174804469" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230324153808848.png" alt="image-20230324153808848" style="zoom:80%;" />-</p>
<h3 id="17-1-3-折射-BTDF"><a href="#17-1-3-折射-BTDF" class="headerlink" title="17.1.3    折射 BTDF"></a>17.1.3    折射 BTDF</h3><ol>
<li>使用折射定律，算出反射角对应的$\theta$</li>
<li>然后通过方位角，求解对应向量</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230324154159876.png" alt="image-20230324154159876" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230324154758730.png" alt="image-20230324154758730" style="zoom:80%;" /></p>
<h3 id="17-1-4-菲涅尔项：多少光反射，多少光折射"><a href="#17-1-4-菲涅尔项：多少光反射，多少光折射" class="headerlink" title="17.1.4    菲涅尔项：多少光反射，多少光折射"></a>17.1.4    菲涅尔项：多少光反射，多少光折射</h3><ol>
<li><strong>反射率</strong>取决于<strong>入射角度</strong></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230324161453003.png" alt="image-20230324161453003" style="zoom:80%;" /></p>
<blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230324155034305.png" alt="image-20230324155034305" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230324161318996.png" alt="image-20230324161318996" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230324161350170.png" alt="image-20230324161350170" style="zoom:80%;" /></p>
</blockquote>
<h2 id="17-2-微表面模型-Microfacet-Material"><a href="#17-2-微表面模型-Microfacet-Material" class="headerlink" title="17.2    微表面模型 Microfacet Material"></a>17.2    微表面模型 Microfacet Material</h2><ol>
<li>从近处看：看到几何</li>
<li>从远处看：看到材质、外观</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230324161736587.png" alt="image-20230324161736587" style="zoom:80%;" /></p>
<h3 id="17-2-1-微表面BRDF"><a href="#17-2-1-微表面BRDF" class="headerlink" title="17.2.1    微表面BRDF"></a>17.2.1    微表面BRDF</h3><ol>
<li>微表面都是完全的镜子，只有在镜面反射方向，才能看到反射光线</li>
<li>微表面的法线分布，可以表示表面的粗糙程度<ol>
<li>法线分布集中 &lt;=&gt; glossy</li>
<li>法线分布发散 &lt;=&gt; diffuse</li>
</ol>
</li>
<li>当光线接近平行射入表面时，微表面之间的相互遮挡较大<ol>
<li>称为grazing angle</li>
</ol>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330212241199.png" alt="image-20230330212241199" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330212608972.png" alt="image-20230330212608972" style="zoom:80%;" /></p>
<h3 id="17-2-2-各向同性-各向异性材质-Isotropic-Anisotropic-Materials"><a href="#17-2-2-各向同性-各向异性材质-Isotropic-Anisotropic-Materials" class="headerlink" title="17.2.2    各向同性/各向异性材质 Isotropic/Anisotropic Materials"></a>17.2.2    各向同性/各向异性材质 Isotropic/Anisotropic Materials</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330213918232.png" alt="image-20230330213918232" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330214126623.png" alt="image-20230330214126623" style="zoom:80%;" /></p>
<h2 id="17-3-BRDF的性质"><a href="#17-3-BRDF的性质" class="headerlink" title="17.3    BRDF的性质"></a>17.3    BRDF的性质</h2><ol>
<li><p>值非负：$f_r(\omega_i \rightarrow \omega_r) \ge 0$</p>
</li>
<li><p>线性性质：$L<em>r(p,\omega_r)=\int</em>{H^2}f_r(p,\omega_i \rightarrow \omega_r)L_i(p, \omega_i)cos \theta_i\ d\omega_i$</p>
<ol>
<li>可以分成很多块，然后相加</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330214746731.png" alt="image-20230330214746731" style="zoom:80%;" /></p>
</li>
<li><p>可逆性：$f_r(\omega_i \rightarrow \omega_r) = f_r(\omega_r \rightarrow \omega_i)$</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330214759683.png" alt="image-20230330214759683" style="zoom:80%;" /></p>
</li>
<li><p>能量守恒：$\forall \omega<em>r, \int</em>{H^2}f_r(\omega_i \rightarrow \omega_r)cos \theta_i\ d\omega_i \le 1$</p>
<ol>
<li>BRDF不可能让能量变多</li>
<li>因此，光线追踪经过很多次反射后，能量会收敛</li>
</ol>
</li>
<li><p>各向同性 &amp; 各向异性</p>
<ol>
<li>各向同性：$f_r(\theta_i,\phi_i;\theta_r,\phi_r)=f_r(\theta_i,\theta_r,\phi_r-\phi_i)$<ol>
<li>降低了一个维度的自由度</li>
</ol>
</li>
<li>考虑对称性，对于所有的BRDF：$f_r(\theta_i,\theta_r,\phi_r-\phi_i)=f_r(\theta_r,\theta_i,\phi_i-\phi_r)=f_r(\theta_i,\theta_r,|\phi_r-\phi_i|)$</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330215347624.png" alt="image-20230330215347624" style="zoom:80%;" /></p>
</li>
</ol>
<h2 id="17-4-测量BRDF"><a href="#17-4-测量BRDF" class="headerlink" title="17.4    测量BRDF"></a>17.4    测量BRDF</h2><ol>
<li>给定一个光源(入射方向)、一个摄像机(出射方向)</li>
<li>更改这光源和摄像机的位置，测量对应的BRDF</li>
<li>优化：<ol>
<li>对于各向同性的物体，可以通过方位角，将4D转化为3D</li>
<li>可逆性：降低了一半的测量次数</li>
</ol>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330215511604.png" alt="image-20230330215511604" style="zoom: 80%;" /></p>
<h2 id="17-5-保存BRDF"><a href="#17-5-保存BRDF" class="headerlink" title="17.5    保存BRDF"></a>17.5    保存BRDF</h2><p>MERL BRDF Database：</p>
<ol>
<li>测量了很多不同的材质</li>
<li>保存为三维数组</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330220014005.png" alt="image-20230330220014005" style="zoom:80%;" /></p>
<h1 id="第18课-高级渲染"><a href="#第18课-高级渲染" class="headerlink" title="第18课    高级渲染"></a>第18课    高级渲染</h1><h2 id="18-1-高级光线传播"><a href="#18-1-高级光线传播" class="headerlink" title="18.1    高级光线传播"></a>18.1    高级光线传播</h2><h3 id="18-1-1-无偏-amp-有偏-蒙特卡洛估计"><a href="#18-1-1-无偏-amp-有偏-蒙特卡洛估计" class="headerlink" title="18.1.1    无偏 &amp; 有偏 蒙特卡洛估计"></a>18.1.1    无偏 &amp; 有偏 蒙特卡洛估计</h3><ol>
<li>无偏：不论样本数是多少，估计值的期望总是正确的</li>
<li>有偏：期望和正确值不一样；但是样本数足够多时，会收敛到正确值<strong>consistency</strong><ol>
<li>有偏 = 模糊</li>
<li>一致性 = 样本足够多时可以收敛到不模糊</li>
</ol>
</li>
</ol>
<h3 id="18-1-2-双向路径追踪-BDPT"><a href="#18-1-2-双向路径追踪-BDPT" class="headerlink" title="18.1.2    双向路径追踪 BDPT"></a>18.1.2    双向路径追踪 BDPT</h3><ol>
<li>从光源、观察点开始，分别生成两个不同的半路径</li>
<li>将半路径的端点连起来</li>
<li>缺点：渲染速度慢</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330220720680.png" alt="image-20230330220720680" style="zoom:80%;" /></p>
<blockquote>
<p>对于间接光较多的场景，双向路径追踪效果更好</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330220814339.png" alt="image-20230330220814339" style="zoom:80%;" /></p>
<h3 id="18-1-3-Metropolis光线传播-MLT"><a href="#18-1-3-Metropolis光线传播-MLT" class="headerlink" title="18.1.3    Metropolis光线传播 MLT"></a>18.1.3    Metropolis光线传播 MLT</h3><ol>
<li>用马尔科夫链进行采样<ol>
<li>马尔科夫链：当前有一个样本，返回一个与之接近的样本</li>
<li>优点：可以生成一个样本分布与与任意函数形状一致的PDF</li>
</ol>
</li>
<li>给任意一个路径，可以生成与之相似的路径：是一个局部的方法</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330221257024.png" alt="image-20230330221257024" style="zoom:80%;" /></p>
<blockquote>
<p>适用于做困难的路径传播，因为可以由一条较好的路径开始，找到更多的路径</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330221447583.png" alt="image-20230330221447583" style="zoom:80%;" /></p>
<p>缺点：</p>
<ol>
<li>难以在理论上计算收敛的速度</li>
<li>所有操作都是局部的，有的像素快，有的像素满，会很”脏”</li>
<li>难以用于动画的渲染</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330222050918.png" alt="image-20230330222050918" style="zoom:80%;" /></p>
</blockquote>
<h3 id="18-1-4-光子映射-Photon-Mapping"><a href="#18-1-4-光子映射-Photon-Mapping" class="headerlink" title="18.1.4    光子映射 Photon Mapping"></a>18.1.4    光子映射 Photon Mapping</h3><ol>
<li><p>适用于渲染SDS(Specular-Diffuse-Specular)路径、生成caustics</p>
<ol>
<li>caustics：由于光线的聚焦产生的非常强的高亮图案</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330222033557.png" alt="image-20230330222033557" style="zoom:80%;" /></p>
</li>
<li><p>分为两步：</p>
<ol>
<li>从光源开始，辐射光子，直到光子打到diffuse表面，将结果记录下来</li>
<li>从摄像机开始，发射半路径，直到路径打到diffuse表面上</li>
<li>计算局部密度估计 local density estimation：<ol>
<li>对任何一个着色点，取最近的n个光子，计算这n个光子占据的面积，计算其密度</li>
<li>n较少时，噪声大；n较大时，会模糊</li>
</ol>
</li>
</ol>
</li>
<li><p>有偏估计：</p>
<ol>
<li>因为dN / dA != ΔN / ΔA，只有ΔA很小时才接近dA</li>
<li>光子越多，找n个光子占据的面积越小，就更接近正确结果</li>
<li>不能确定ΔA，增加光子，因为ΔA永远不会接近dA</li>
</ol>
</li>
</ol>
<h3 id="18-1-5-Vertex-Connection-and-Merging"><a href="#18-1-5-Vertex-Connection-and-Merging" class="headerlink" title="18.1.5    Vertex Connection and Merging"></a>18.1.5    Vertex Connection and Merging</h3><ol>
<li>将BDPT和光子映射结合起来</li>
<li>使用BDPT生成两段sub-path</li>
<li>如果有两段sub-path的终点非常接近，则使用光子映射计算其贡献</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330223206732.png" alt="image-20230330223206732" style="zoom: 80%;" /></p>
<h3 id="18-1-6-实时辐射度-Instant-Radiosity"><a href="#18-1-6-实时辐射度-Instant-Radiosity" class="headerlink" title="18.1.6    实时辐射度 Instant Radiosity"></a>18.1.6    实时辐射度 Instant Radiosity</h3><ol>
<li>已经被照亮的地方，认为是光源，照亮别的地方<ol>
<li>从光源开始发射sub-path，停在某些地方，形成新的光源VPL(Virtual Point Light)</li>
<li>用新的光源照亮着色点</li>
</ol>
</li>
<li>优点：快，并且效果较好</li>
<li>缺点：<ol>
<li>在缝隙处会出现问题</li>
<li>不能做glossy物体</li>
</ol>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330223358225.png" alt="image-20230330223358225" style="zoom:80%;" /></p>
<h2 id="18-2-高级外观建模"><a href="#18-2-高级外观建模" class="headerlink" title="18.2    高级外观建模"></a>18.2    高级外观建模</h2><p>外观 == 材质 == BRDF</p>
<h3 id="18-2-1-非表面模型：云、-烟、雾等"><a href="#18-2-1-非表面模型：云、-烟、雾等" class="headerlink" title="18.2.1    非表面模型：云、 烟、雾等"></a>18.2.1    非表面模型：云、 烟、雾等</h3><p><strong>Participating Media</strong>：参与介质</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330224145788.png" alt="image-20230330224145788" style="zoom:80%;" /></p>
<p><strong>Phase Function</strong>：相位函数，规定光线如何散射</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330224250395.png" alt="image-20230330224250395" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330224330452.png" alt="image-20230330224330452" style="zoom:80%;" /></p>
<h3 id="18-2-2-头发表面"><a href="#18-2-2-头发表面" class="headerlink" title="18.2.2    头发表面"></a>18.2.2    头发表面</h3><p>会有两种高光：有色、无色</p>
<p><strong>Kajiya-Kay模型</strong>：光线打到圆柱上，会反射为圆锥</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330224648071.png" alt="image-20230330224648071" style="zoom:80%;" /></p>
<p><strong>Marschner模型</strong>：光线打到圆柱上，一部分会反射为圆锥，一部分会穿进去</p>
<ol>
<li><strong>R</strong>：直接反射</li>
<li><strong>TT</strong>：穿进头发，然后再穿出来</li>
<li><strong>TRT</strong>：穿进头发，发生反射，然后再穿出来</li>
<li>定义光线和一根圆柱如何作用：R、TT、TRT</li>
<li>根据光线传播，计算和多个头发的作用</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330224739393.png" alt="image-20230330224739393" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330225204954.png" alt="image-20230330225204954" style="zoom:80%;" /></p>
<p><strong>Double Cylinder Model</strong>：增加一个圆柱，模拟髓质</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330225312464.png" alt="image-20230330225312464" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330225323075.png" alt="image-20230330225323075" style="zoom:80%;" /></p>
<h3 id="18-2-3-颗粒材质：Granular"><a href="#18-2-3-颗粒材质：Granular" class="headerlink" title="18.2.3    颗粒材质：Granular"></a>18.2.3    颗粒材质：Granular</h3><ol>
<li><p>由很多小石子构成的模型</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330225609403.png" alt="image-20230330225609403" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330225635165.png" alt="image-20230330225635165" style="zoom:80%;" /></p>
</li>
</ol>
<h3 id="18-2-4-表面模型：次表面散射-BSSRDF"><a href="#18-2-4-表面模型：次表面散射-BSSRDF" class="headerlink" title="18.2.4    表面模型：次表面散射 BSSRDF"></a>18.2.4    表面模型：次表面散射 BSSRDF</h3><p><strong>Translucent</strong>：光线从一个点进入表面，在物体内发生了一系列散射，然后再从另一个点钻出表面</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330225827858.png" alt="image-20230330225827858" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330225950269.png" alt="image-20230330225950269" style="zoom:80%;" /></p>
<p><strong>Dipole</strong>近似：在物体上下添加两个光源，模拟次表面反射的效果</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330230124438.png" alt="image-20230330230124438" style="zoom:80%;" /></p>
<h3 id="18-2-5-布料"><a href="#18-2-5-布料" class="headerlink" title="18.2.5    布料"></a>18.2.5    布料</h3><p>布料的定义</p>
<ol>
<li>纤维的集合 fiber</li>
<li>纤维缠绕，可以得到不同的股 Ply</li>
<li>股绕在一起，可以得到线 Yarn</li>
<li>线织成布 cloth</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330230502109.png" alt="image-20230330230502109" style="zoom:80%;" /></p>
<p>将布料当作物体表面，使用<strong>BRDF</strong>渲染</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330230747552.png" alt="image-20230330230747552" style="zoom:80%;" /></p>
<p>将布料划分为很小的块，作为<strong>散射介质</strong>渲染</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330230632698.png" alt="image-20230330230632698" style="zoom:80%;" /></p>
<p>将布料划分为很多个线，类似<strong>头发模型</strong>渲染</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330230810766.png" alt="image-20230330230810766" style="zoom:80%;" /></p>
<h2 id="18-3-通过修改微表面法线分布，得到不同的效果"><a href="#18-3-通过修改微表面法线分布，得到不同的效果" class="headerlink" title="18.3    通过修改微表面法线分布，得到不同的效果"></a>18.3    通过修改微表面法线分布，得到不同的效果</h2><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330231505492.png" alt="image-20230330231505492" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330231516015.png" alt="image-20230330231516015" style="zoom:80%;" /></p>
<h3 id="18-3-1-对一个区域内的微表面进行积分"><a href="#18-3-1-对一个区域内的微表面进行积分" class="headerlink" title="18.3.1    对一个区域内的微表面进行积分"></a>18.3.1    对一个区域内的微表面进行积分</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330231534136.png" alt="image-20230330231534136" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330231544316.png" alt="image-20230330231544316" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330231601075.png" alt="image-20230330231601075" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330231611914.png" alt="image-20230330231611914" style="zoom:80%;" /></p>
<h3 id="18-3-2-波动光学与几何光学得到的NDF"><a href="#18-3-2-波动光学与几何光学得到的NDF" class="headerlink" title="18.3.2    波动光学与几何光学得到的NDF"></a>18.3.2    波动光学与几何光学得到的NDF</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330231719561.png" alt="image-20230330231719561" style="zoom:80%;" /></p>
<h2 id="18-4-程序化生成表面"><a href="#18-4-程序化生成表面" class="headerlink" title="18.4    程序化生成表面"></a>18.4    程序化生成表面</h2><ol>
<li>定义在空间中的函数，可以在使用的时候，查询空间中的某个点的值，而不是将三维纹理存储下来，<strong>噪声函数</strong></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230330231937462.png" alt="image-20230330231937462" style="zoom:80%;" /></p>
<h1 id="第19课-相机-amp-透镜-amp-光场"><a href="#第19课-相机-amp-透镜-amp-光场" class="headerlink" title="第19课    相机&amp;透镜&amp;光场"></a>第19课    相机&amp;透镜&amp;光场</h1><h2 id="19-1-相机"><a href="#19-1-相机" class="headerlink" title="19.1    相机"></a>19.1    相机</h2><p>快门：控制光在某个极短时间内进入相机</p>
<p>传感器：将光的信息记录下来，只能记录Irradiance，不能记录radiance，因此需要小孔/棱镜成像</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331150921690.png" alt="image-20230331150921690" style="zoom:80%;" /></p>
<h3 id="19-1-1-针孔相机"><a href="#19-1-1-针孔相机" class="headerlink" title="19.1.1    针孔相机"></a>19.1.1    针孔相机</h3><ol>
<li>没有景深的效果，不会模糊</li>
</ol>
<h3 id="19-1-2-基础概念"><a href="#19-1-2-基础概念" class="headerlink" title="19.1.2    基础概念"></a>19.1.2    基础概念</h3><h4 id="19-1-2-1-视场-FOV"><a href="#19-1-2-1-视场-FOV" class="headerlink" title="19.1.2.1    视场 FOV"></a>19.1.2.1    视场 FOV</h4><p><strong>FOV</strong>：视场</p>
<ol>
<li>传感器高度：<strong>h</strong></li>
<li>传感器到小孔的距离：<strong>焦距f</strong></li>
<li>焦距越大，视场越大</li>
<li>传感器越小，视场越小</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331151043290.png" alt="image-20230331151043290" style="zoom:80%;" /></p>
<blockquote>
<p>以<strong>35mm格式</strong>的胶片为标准，通过更改<strong>焦距f</strong>，定义视场</p>
<ol>
<li>也就是确定了传感器高度<strong>h</strong></li>
<li>通常说的是等效到35mm格式，而不是传感器就是35mm</li>
</ol>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331151357618.png" alt="image-20230331151357618" style="zoom:80%;" /></p>
<p>传感器sensor和胶片film可以不一样，但可以当作是一样的</p>
<ol>
<li>传感器：接收到了具体信息</li>
<li>胶片：最后呈现的效果</li>
</ol>
<blockquote>
<p>小的传感器 + 小焦距，可以得到相同的视场</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331151711271.png" alt="image-20230331151711271" style="zoom:80%;" /></p>
<h4 id="19-1-2-2-曝光度-Exposure"><a href="#19-1-2-2-曝光度-Exposure" class="headerlink" title="19.1.2.2    曝光度 Exposure"></a>19.1.2.2    曝光度 Exposure</h4><p><strong>Exposure = 时间(T) × Irradiance(E)</strong></p>
<ol>
<li>时间越长、单位时间内接收到的能量越多，最后的曝光度越大</li>
<li>曝光度记录的是energy，而不是power</li>
<li>时间：由快门控制</li>
<li>Irradiance：由很多因素决定，如光圈</li>
</ol>
<h4 id="19-1-2-3-影响曝光度的因素：光圈-amp-快门-amp-ISO"><a href="#19-1-2-3-影响曝光度的因素：光圈-amp-快门-amp-ISO" class="headerlink" title="19.1.2.3    影响曝光度的因素：光圈&amp;快门&amp;ISO"></a>19.1.2.3    影响曝光度的因素：光圈&amp;快门&amp;ISO</h4><ol>
<li>光圈<strong>Aperture Size</strong>：用<strong><code>FN</code>或<code>F/N</code></strong>表示<ol>
<li>模拟人的瞳孔，通过<strong>F-stop/F-number</strong>控制开关</li>
<li><strong>N</strong>对应光圈半径的倒数</li>
<li><strong>光圈越大，越亮，但是远的部分越模糊</strong></li>
<li>如果要考虑景深，光圈就应该小，图像就会暗，因此就需要更长的快门时间，从而无法考虑运动模糊的问题</li>
</ol>
</li>
<li>快门<strong>Shutter speed</strong>：用分数表示<ol>
<li>控制记录的时间</li>
<li><strong>时间越长，越模糊</strong></li>
<li>因为存在运动模糊效果：对快门时间内记录到的所有信息做了一个平均</li>
<li>相当于在时间上采样时，做了一个模糊效果</li>
<li><strong>Rolling shutter</strong>：对于高速运动的物体，可能会出现扭曲的现象</li>
</ol>
</li>
<li>感光度<strong>ISO gain</strong>：用ISOxx表示<ol>
<li>类似于后期处理，对接收到的光乘上某个数</li>
<li>可以发生在硬件上，也可以发生在软件上</li>
<li><strong>ISO越大，越亮，但是噪声也越大</strong></li>
</ol>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331152235235.png" alt="image-20230331152235235" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331153511790.png" alt="image-20230331153511790" style="zoom:80%;" /></p>
<h4 id="19-1-2-4-高速-低速摄影"><a href="#19-1-2-4-高速-低速摄影" class="headerlink" title="19.1.2.4    高速/低速摄影"></a>19.1.2.4    高速/低速摄影</h4><p><strong>高速摄影</strong></p>
<ol>
<li>即每秒钟要拍更多的照片</li>
<li>快门时间变短，同时需要更大的光圈</li>
</ol>
<p><strong>低速摄影/延迟摄影</strong></p>
<ol>
<li>即每秒钟要拍更少的照片</li>
<li>快门时间变长，就是需要运动模糊</li>
</ol>
<h2 id="19-2-薄透镜近似"><a href="#19-2-薄透镜近似" class="headerlink" title="19.2    薄透镜近似"></a>19.2    薄透镜近似</h2><h3 id="19-2-1-理想化薄透镜"><a href="#19-2-1-理想化薄透镜" class="headerlink" title="19.2.1    理想化薄透镜"></a>19.2.1    理想化薄透镜</h3><ol>
<li>平行光可以汇聚到焦点上，过交点可以发散为平行光</li>
<li>过中心不改变光路</li>
<li>可以任意更改焦距：通过透镜组，动态改变焦距</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331154506466.png" alt="image-20230331154506466" style="zoom:80%;" /></p>
<h3 id="19-2-2-焦散模糊-Defocus-Blur"><a href="#19-2-2-焦散模糊-Defocus-Blur" class="headerlink" title="19.2.2    焦散模糊 Defocus Blur"></a>19.2.2    焦散模糊 Defocus Blur</h3><p><strong>CoC</strong>：Circle of Confusion</p>
<ol>
<li>当感光器在成像点后面时，会导致成像为一个圆</li>
<li>光圈越大，CoC越大</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331155356722.png" alt="image-20230331155356722" style="zoom:80%;" /></p>
<h3 id="19-2-3-F-Number的定义"><a href="#19-2-3-F-Number的定义" class="headerlink" title="19.2.3    F-Number的定义"></a>19.2.3    F-Number的定义</h3><ol>
<li>F-Number = 焦距 / 光圈直径</li>
<li>拍的更清楚 =&gt; 使用小光圈</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331155149689.png" alt="image-20230331155149689" style="zoom:80%;" /></p>
<h2 id="19-3-光线追踪模拟薄透镜"><a href="#19-3-光线追踪模拟薄透镜" class="headerlink" title="19.3    光线追踪模拟薄透镜"></a>19.3    光线追踪模拟薄透镜</h2><h3 id="19-3-1-定义"><a href="#19-3-1-定义" class="headerlink" title="19.3.1    定义"></a>19.3.1    定义</h3><ol>
<li>感光器的大小</li>
<li>焦距、光圈大小</li>
<li>物体与棱镜的距离，即物距<strong>z~o~</strong></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331155614225.png" alt="image-20230331155614225" style="zoom:80%;" /></p>
<h3 id="19-3-2-渲染方式"><a href="#19-3-2-渲染方式" class="headerlink" title="19.3.2    渲染方式"></a>19.3.2    渲染方式</h3><ol>
<li>在感光元件上选一个点<strong>x’</strong></li>
<li>在透镜上选另一个点<strong>x’’</strong></li>
<li>连接<strong>x’</strong>和<strong>x’’</strong>，可以得到通过该透镜后的光线<strong>x’’→x’’’</strong></li>
<li>考虑<strong>x’’→x’’’</strong>的Radiance，记录到<strong>x’</strong>上即可</li>
</ol>
<h2 id="19-4-景深-Depth-of-Field：D-F-D-N"><a href="#19-4-景深-Depth-of-Field：D-F-D-N" class="headerlink" title="19.4    景深 Depth of Field：D~F~ ~ D~N~"></a>19.4    景深 Depth of Field：D~F~ ~ D~N~</h2><ol>
<li>用不同的光圈，会影响模糊的范围</li>
<li>在<strong>实际场景</strong>中有<strong>一段深度(景深)</strong>，这段通过透镜，会在成像区域附近形成一个区域，我们认为这个区域内的CoC都是足够小的</li>
<li>这段深度内的像素，认为均是锐利的，即不模糊的</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331160147996.png" alt="image-20230331160147996" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331161005848.png" alt="image-20230331161005848" style="zoom:80%;" /></p>
<h2 id="19-5-光场-Light-Field-Lumigraph"><a href="#19-5-光场-Light-Field-Lumigraph" class="headerlink" title="19.5    光场 Light Field / Lumigraph"></a>19.5    光场 Light Field / Lumigraph</h2><h3 id="19-5-1-全光函数-Plenoptic-Function"><a href="#19-5-1-全光函数-Plenoptic-Function" class="headerlink" title="19.5.1    全光函数 Plenoptic Function"></a>19.5.1    全光函数 Plenoptic Function</h3><h4 id="19-5-1-1-Grayscale-snapshot：P-θ-Φ"><a href="#19-5-1-1-Grayscale-snapshot：P-θ-Φ" class="headerlink" title="19.5.1.1    Grayscale snapshot：P(θ, Φ)"></a>19.5.1.1    Grayscale snapshot：P(θ, Φ)</h4><ol>
<li>定义了在一个固定地方，向任意一个<strong>方向(θ, Φ)</strong>看，能够看到的亮度值</li>
</ol>
<h4 id="19-5-1-2-Color-snapshot：P-θ-Φ-λ"><a href="#19-5-1-2-Color-snapshot：P-θ-Φ-λ" class="headerlink" title="19.5.1.2    Color snapshot：P(θ, Φ, λ)"></a>19.5.1.2    Color snapshot：P(θ, Φ, λ)</h4><ol>
<li>定义了在一个固定地方，向任意一个<strong>方向(θ, Φ)</strong>看，能够看到的<strong>波长为λ</strong>的亮度值</li>
</ol>
<h4 id="19-5-1-3-Movie：P-θ-Φ-λ-t"><a href="#19-5-1-3-Movie：P-θ-Φ-λ-t" class="headerlink" title="19.5.1.3    Movie：P(θ, Φ, λ, t)"></a>19.5.1.3    Movie：P(θ, Φ, λ, t)</h4><ol>
<li>定义了在一个固定地方，在某个<strong>时间t</strong>，向任意一个<strong>方向(θ, Φ)</strong>看，能够看到的<strong>波长为λ</strong>的亮度值</li>
<li>即电影</li>
</ol>
<h4 id="19-5-1-4-Holographic-Movie：P-θ-Φ-λ-t-V-X-V-Y-V-Z"><a href="#19-5-1-4-Holographic-Movie：P-θ-Φ-λ-t-V-X-V-Y-V-Z" class="headerlink" title="19.5.1.4    Holographic Movie：P(θ, Φ, λ, t, V~X~, V~Y~, V~Z~)"></a>19.5.1.4    Holographic Movie：P(θ, Φ, λ, t, V~X~, V~Y~, V~Z~)</h4><ol>
<li>定义了在某个<strong>位置(V~X~, V~Y~, V~Z~)</strong>，在某个<strong>时间t</strong>，向任意一个<strong>方向(θ, Φ)</strong>看，能够看到的<strong>波长为λ</strong>的亮度值</li>
<li>即全息电影</li>
</ol>
<h4 id="19-5-1-5-Plenoptic-Function：P-θ-Φ-λ-t-V-X-V-Y-V-Z"><a href="#19-5-1-5-Plenoptic-Function：P-θ-Φ-λ-t-V-X-V-Y-V-Z" class="headerlink" title="19.5.1.5    Plenoptic Function：P(θ, Φ, λ, t, V~X~, V~Y~, V~Z~)"></a>19.5.1.5    Plenoptic Function：P(θ, Φ, λ, t, V~X~, V~Y~, V~Z~)</h4><ol>
<li>在任何<strong>时间t</strong>、任何<strong>地点V</strong>、向任何<strong>方向(θ, Φ)</strong>看，所能看到的所有的<strong>光λ</strong></li>
<li>是一个七维函数</li>
</ol>
<h3 id="19-5-2-光线的定义"><a href="#19-5-2-光线的定义" class="headerlink" title="19.5.2    光线的定义"></a>19.5.2    光线的定义</h3><p>5个维度：<strong>P(θ, Φ, V~X~, V~Y~, V~Z~)</strong></p>
<ol>
<li>3个维度的坐标</li>
<li>2个维度的方向</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331162624696.png" alt="image-20230331162624696" style="zoom:80%;" /></p>
<p>4个维度：</p>
<ol>
<li>2维的位置：<strong>(u, v)</strong></li>
<li>2维的方向：<strong>(θ, Φ)</strong></li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331162633863.png" alt="image-20230331162633863" style="zoom:80%;" /></p>
<h3 id="19-5-3-全光表面-Plenoptic-Surface"><a href="#19-5-3-全光表面-Plenoptic-Surface" class="headerlink" title="19.5.3    全光表面 Plenoptic Surface"></a>19.5.3    全光表面 Plenoptic Surface</h3><p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331162812295.png" alt="image-20230331162812295" style="zoom:80%;" /></p>
<p>光场：任何一个位置，往任何一个方向去的光的强度</p>
<ol>
<li>在表面的位置：<strong>(u, v)</strong></li>
<li>方向：<strong>(θ, Φ)</strong></li>
<li>从任意一个位置，往任意一个方向看，都看到该光场的强度</li>
</ol>
<h3 id="19-5-4-光场"><a href="#19-5-4-光场" class="headerlink" title="19.5.4    光场"></a>19.5.4    光场</h3><p>不需要直到物体具体是什么，只需要直到<strong>包围盒外</strong>的光场信息</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331163303962.png" alt="image-20230331163303962" style="zoom:80%;" /></p>
<h3 id="19-5-5-Lumigraph-Organization"><a href="#19-5-5-Lumigraph-Organization" class="headerlink" title="19.5.5    Lumigraph-Organization"></a>19.5.5    Lumigraph-Organization</h3><p>取一个平面，只需要直到该平面上任何一个位置，往任何一个方向去的光的强度</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331163416657.png" alt="image-20230331163416657" style="zoom:80%;" /></p>
<p>也可以定义两个平面<strong>(u,v) &amp; (s,t)</strong>，定义该光线</p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331163525401.png" alt="image-20230331163525401" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331164408327.png" alt="image-20230331164408327" style="zoom:80%;" /></p>
<p>&gt;<br>&gt;</p>
<blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230331164514848.png" alt="image-20230331164514848" style="zoom:80%;" /></p>
</blockquote>
<h1 id="第20课-颜色与视觉"><a href="#第20课-颜色与视觉" class="headerlink" title="第20课    颜色与视觉"></a>第20课    颜色与视觉</h1><h1 id="第21课-动画-模拟-仿真"><a href="#第21课-动画-模拟-仿真" class="headerlink" title="第21课    动画/模拟/仿真"></a>第21课    动画/模拟/仿真</h1><h2 id="21-1-关键帧动画"><a href="#21-1-关键帧动画" class="headerlink" title="21.1    关键帧动画"></a>21.1    关键帧动画</h2><ol>
<li>给定一系列关键的帧，通过<strong>插值</strong>，将中间的帧补全</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230406213305918.png" alt="image-20230406213305918" style="zoom:80%;" /></p>
<h2 id="21-2-物理模拟"><a href="#21-2-物理模拟" class="headerlink" title="21.2    物理模拟"></a>21.2    物理模拟</h2><ol>
<li>建立物理模型，解某个时刻对应的方程</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230406213618926.png" alt="image-20230406213618926" style="zoom:80%;" /></p>
<h3 id="21-2-1-质点弹簧系统-Mass-Spring-System"><a href="#21-2-1-质点弹簧系统-Mass-Spring-System" class="headerlink" title="21.2.1    质点弹簧系统 Mass Spring System"></a>21.2.1    质点弹簧系统 Mass Spring System</h3><ol>
<li>是一系列相互连接的质点和弹簧</li>
</ol>
<h4 id="21-2-1-1-理想弹簧"><a href="#21-2-1-1-理想弹簧" class="headerlink" title="21.2.1.1    理想弹簧"></a>21.2.1.1    理想弹簧</h4><ol>
<li>弹簧没有长度，弹簧的力只与其被拉伸的长度有关</li>
<li>$k_s$：劲度系数</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230406214224321.png" alt="image-20230406214224321" style="zoom:80%;" /></p>
<h4 id="21-2-1-2-非零长度弹簧"><a href="#21-2-1-2-非零长度弹簧" class="headerlink" title="21.2.1.2    非零长度弹簧"></a>21.2.1.2    非零长度弹簧</h4><ol>
<li>在理想弹簧的基础上，弹簧的初始长度为$l$</li>
<li>问题：由于动能和弹性势能的相互转换，弹簧会永远震动下去</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230406214307106.png" alt="image-20230406214307106" style="zoom:80%;" /></p>
<h4 id="21-2-1-3-添加能量流失"><a href="#21-2-1-3-添加能量流失" class="headerlink" title="21.2.1.3    添加能量流失"></a>21.2.1.3    添加能量流失</h4><ol>
<li>在非零长度弹簧的基础上，添加一个摩擦力$f=-k_d\dot b$，使弹簧能够停下来</li>
<li>$k_d$：阻尼系数 damping coefficient</li>
<li>问题：只能表示弹簧整体的能量损耗，不能表示弹簧内部的能量损耗</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230406215157003.png" alt="image-20230406215157003" style="zoom:80%;" /></p>
<h4 id="21-2-1-4-添加内部阻尼"><a href="#21-2-1-4-添加内部阻尼" class="headerlink" title="21.2.1.4    添加内部阻尼"></a>21.2.1.4    添加内部阻尼</h4><ol>
<li>在上述弹簧的基础上，添加内部阻尼，以让弹簧能够恢复原样<ol>
<li>相对速度的投影：分解到沿着ab方向的速度，只有这个速度会让弹簧产生形变</li>
</ol>
</li>
<li>内部阻尼与弹簧的直接形变没有关系，只与ab的相对速度有关系</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230406215514210.png" alt="image-20230406215514210" style="zoom:80%;" /></p>
<h4 id="21-2-1-5-弹簧的结构"><a href="#21-2-1-5-弹簧的结构" class="headerlink" title="21.2.1.5    弹簧的结构"></a>21.2.1.5    弹簧的结构</h4><p>用网格结构的弹簧模拟布料</p>
<ol>
<li>无法抵抗切变的力：从</li>
<li>无法抵抗out-of-plane的力</li>
</ol>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230406215820111.png" alt="image-20230406215820111" style="zoom:80%;" /></p>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230406220402457.png" alt="image-20230406220402457" style="zoom:80%;" /></p>
<blockquote>
<p>添加两个方向的对角线方向的弹簧，抵抗切变的力：</p>
<ol>
<li>当从两端拉弹簧时，对角线上的弹簧会被压缩，从而产生抵抗切变的力</li>
</ol>
</blockquote>
<p><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/AssetMarkdown/image-20230406220645857.png" alt="image-20230406220645857" style="zoom:80%;" /></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="unicorn2022.github.io">华丰夏</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://hzoi-unicorn.top/2023/02/26/GAMES101/">https://hzoi-unicorn.top/2023/02/26/GAMES101/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://hzoi-unicorn.top" target="_blank">华风夏韵</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/GAMES%E7%B3%BB%E5%88%97%E8%AF%BE%E7%A8%8B/">GAMES系列课程</a></div><div class="post_share"><div class="social-share" data-image="https://raw.githubusercontent.com/unicorn2022/Pictures/main/img/avatar.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/02/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" title="编译原理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">编译原理</div></div></a></div><div class="next-post pull-right"><a href="/2022/09/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6/" title="计算机图形学"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">计算机图形学</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/04/01/GAMES104/" title="GAMES104"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-01</div><div class="title">GAMES104</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://raw.githubusercontent.com/unicorn2022/Pictures/main/img/avatar.png" onerror="this.onerror=null;this.src='https://raw.githubusercontent.com/unicorn2022/Pictures/main/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">华丰夏</div><div class="author-info__description">一切都是上天最好的安排</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">14</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/unicorn2022"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/unicorn2022" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:496300118@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">愿你前行的道路有群星闪耀。愿你留下的足迹有百花绽放。你即是上帝的馈赠，世界因你而瑰丽。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC00%E8%AF%BE-VS%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-text">第00课    VS环境配置</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC01%E8%AF%BE-%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6%E6%A6%82%E8%A7%88"><span class="toc-text">第01课    计算机图形学概览</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC02%E8%AF%BE-%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E5%A4%8D%E4%B9%A0"><span class="toc-text">第02课    线性代数复习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%90%91%E9%87%8F%E7%82%B9%E4%B9%98"><span class="toc-text">2.1    向量点乘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-%E5%AE%9A%E4%B9%89"><span class="toc-text">2.1.1    定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-%E6%80%A7%E8%B4%A8"><span class="toc-text">2.1.2    性质</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3-%E5%BA%94%E7%94%A8"><span class="toc-text">2.1.3    应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E5%90%91%E9%87%8F%E5%8F%89%E4%B9%98"><span class="toc-text">2.2    向量叉乘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E5%AE%9A%E4%B9%89"><span class="toc-text">2.2.1    定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E6%80%A7%E8%B4%A8"><span class="toc-text">2.2.2    性质</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-%E5%BA%94%E7%94%A8"><span class="toc-text">2.2.3    应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E6%AD%A3%E4%BA%A4%E5%9F%BA-%E5%9D%90%E6%A0%87%E7%B3%BB"><span class="toc-text">2.3    正交基&#x2F;坐标系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-%E5%AE%9A%E4%B9%89"><span class="toc-text">2.3.1    定义</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E7%9F%A9%E9%98%B5"><span class="toc-text">2.4    矩阵</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-1-%E7%9F%A9%E9%98%B5%E4%B9%98%E6%B3%95"><span class="toc-text">2.4.1    矩阵乘法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-2-%E7%9F%A9%E9%98%B5%E8%BD%AC%E7%BD%AE"><span class="toc-text">2.4.2    矩阵转置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-3-%E5%8D%95%E4%BD%8D%E7%9F%A9%E9%98%B5-amp-%E7%9F%A9%E9%98%B5%E7%9A%84%E9%80%86"><span class="toc-text">2.4.3    单位矩阵&amp;矩阵的逆</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-4-%E7%9F%A9%E9%98%B5-amp-%E5%90%91%E9%87%8F%E7%82%B9%E4%B9%98-%E5%8F%89%E4%B9%98"><span class="toc-text">2.4.4    矩阵&amp;向量点乘&#x2F;叉乘</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC03%E8%AF%BE-%E5%8F%98%E6%8D%A21%EF%BC%9A2%E7%BB%B4%E5%8F%98%E6%8D%A2"><span class="toc-text">第03课    变换1：2维变换</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-2D-Transform"><span class="toc-text">3.1    2D Transform</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-Scale%E7%BC%A9%E6%94%BE%E5%8F%98%E6%8D%A2"><span class="toc-text">3.1.1    Scale缩放变换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-Reflectin%E7%BF%BB%E8%BD%AC"><span class="toc-text">3.1.2    Reflectin翻转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-3-Shear%E5%88%87%E5%8F%98"><span class="toc-text">3.1.3    Shear切变</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-4-Rotate%E6%97%8B%E8%BD%AC-%E9%BB%98%E8%AE%A4-%E7%BB%95%E5%8E%9F%E7%82%B9-%E9%80%86%E6%97%B6%E9%92%88-%E6%97%8B%E8%BD%AC"><span class="toc-text">3.1.4    Rotate旋转(默认 绕原点 逆时针 旋转)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-5-Linear-Transform%E7%BA%BF%E6%80%A7%E5%8F%98%E6%8D%A2-%E7%9F%A9%E9%98%B5"><span class="toc-text">3.1.5    Linear Transform线性变换&#x3D;矩阵</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-Homogeneous-coordinates%E9%BD%90%E6%AC%A1%E5%9D%90%E6%A0%87"><span class="toc-text">3.2    Homogeneous coordinates齐次坐标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-Translation%E5%B9%B3%E7%A7%BB%E5%8F%98%E6%8D%A2-notin-%E7%BA%BF%E6%80%A7%E5%8F%98%E6%8D%A2"><span class="toc-text">3.2.1    Translation平移变换$\notin$线性变换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-%E9%BD%90%E6%AC%A1%E5%9D%90%E6%A0%87"><span class="toc-text">3.2.2    齐次坐标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3-Affine-Transformation%E4%BB%BF%E5%B0%84%E5%8F%98%E6%8D%A2-%E7%BA%BF%E6%80%A7%E5%8F%98%E6%8D%A2-%E5%B9%B3%E7%A7%BB%E5%8F%98%E6%8D%A2"><span class="toc-text">3.2.3    Affine Transformation仿射变换 &#x3D; 线性变换 + 平移变换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-4-2D-Transformation"><span class="toc-text">3.2.4    2D Transformation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-5-Inverse-Transform%E9%80%86%E5%8F%98%E6%8D%A2"><span class="toc-text">3.2.5    Inverse Transform逆变换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-Composing-Transforms%E5%8F%98%E6%8D%A2%E7%9A%84%E7%BB%84%E5%90%88"><span class="toc-text">3.3    Composing Transforms变换的组合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-%E4%B8%BE%E4%BE%8B"><span class="toc-text">3.3.1    举例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-2-%E5%A4%9A%E4%B8%AA%E5%8F%98%E6%8D%A2"><span class="toc-text">3.3.2    多个变换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-3-%E5%8F%98%E6%8D%A2%E7%9A%84%E5%88%86%E8%A7%A3"><span class="toc-text">3.3.3    变换的分解</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC04%E8%AF%BE-%E5%8F%98%E6%8D%A22%EF%BC%9A%E4%B8%89%E7%BB%B4%E5%8F%98%E6%8D%A2"><span class="toc-text">第04课    变换2：三维变换</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-0-%E6%9C%89%E5%85%B3%E6%97%8B%E8%BD%AC%E7%9A%84%E8%A1%A5%E5%85%85"><span class="toc-text">4.0    有关旋转的补充</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-3D-Transformations"><span class="toc-text">4.1    3D Transformations</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-1-%E9%BD%90%E6%AC%A1%E5%9D%90%E6%A0%87"><span class="toc-text">4.4.1    齐次坐标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-2-%E4%BB%BF%E5%B0%84%E5%8F%98%E6%8D%A2"><span class="toc-text">4.4.2    仿射变换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-2-1-%E7%BC%A9%E6%94%BE"><span class="toc-text">4.4.2.1    缩放</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-2-2-%E5%B9%B3%E7%A7%BB"><span class="toc-text">4.4.2.2    平移</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-2-3-%E6%97%8B%E8%BD%AC"><span class="toc-text">4.4.2.3    旋转</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-4-2-3-1-%E7%BB%95%E5%9D%90%E6%A0%87%E8%BD%B4%E6%97%8B%E8%BD%AC"><span class="toc-text">4.4.2.3.1    绕坐标轴旋转</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-4-2-3-2-%E7%BB%95%E4%BB%BB%E6%84%8F%E8%BF%87%E5%8E%9F%E7%82%B9%E7%9A%84%E8%BD%B4%E6%97%8B%E8%BD%AC"><span class="toc-text">4.4.2.3.2    绕任意过原点的轴旋转</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-4-2-3-2-%E7%BB%95%E8%BF%87%E4%BB%BB%E6%84%8F%E7%82%B9%E7%9A%84%E4%BB%BB%E6%84%8F%E8%BD%B4%E6%97%8B%E8%BD%AC"><span class="toc-text">4.4.2.3.2    绕过任意点的任意轴旋转</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-Model-amp-View-Transformation"><span class="toc-text">4.2    Model &amp; View Transformation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%86%E5%9B%BE%E5%8F%98%E6%8D%A2"><span class="toc-text">4.2.1    什么是视图变换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-%E5%AE%9A%E4%B9%89Camera"><span class="toc-text">4.2.2    定义Camera</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3-%E5%85%B3%E9%94%AE%E7%82%B9%EF%BC%9A%E7%9B%B8%E6%9C%BA%E4%B8%8E%E7%89%A9%E4%BD%93%E7%9A%84%E7%9B%B8%E5%AF%B9%E4%BD%8D%E7%BD%AE%E5%86%B3%E5%AE%9A%E7%9C%8B%E5%88%B0%E7%9A%84%E5%9B%BE%E5%83%8F"><span class="toc-text">4.2.3    关键点：相机与物体的相对位置决定看到的图像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-4-%E5%B0%86%E7%9B%B8%E6%9C%BA%E7%A7%BB%E5%8A%A8%E5%88%B0%E6%A0%87%E5%87%86%E4%BD%8D%E7%BD%AE"><span class="toc-text">4.2.4    将相机移动到标准位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-5-%E6%80%BB%E7%BB%93"><span class="toc-text">4.2.5    总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-Projection-Transformation"><span class="toc-text">4.3    Projection Transformation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1-%E6%AD%A3%E4%BA%A4%E6%8A%95%E5%BD%B1"><span class="toc-text">4.3.1    正交投影</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2-%E9%80%8F%E8%A7%86%E6%8A%95%E5%BD%B1"><span class="toc-text">4.3.2    透视投影</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-2-1-%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E9%80%8F%E8%A7%86%E6%8A%95%E5%BD%B1"><span class="toc-text">4.3.2.1    如何进行透视投影</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-2-2-%E8%AE%A1%E7%AE%97%E7%9F%A9%E9%98%B5-M-persp-gt-ortho"><span class="toc-text">4.3.2.2    计算矩阵$M_{persp-&gt;ortho}$</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-3-3-%E5%AF%B9%E4%BA%8E%E4%B8%8D%E5%9C%A8%E8%BF%91-%E8%BF%9C%E5%B9%B3%E9%9D%A2%E4%B8%8A%E7%9A%84%E7%82%B9"><span class="toc-text">4.3.3.3    对于不在近&#x2F;远平面上的点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-3-4-%E5%AE%9A%E4%B9%89%E8%A7%86%E9%94%A5"><span class="toc-text">4.3.3.4    定义视锥</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC05%E8%AF%BE-%E5%85%89%E6%A0%85%E5%8C%961%EF%BC%9A%E4%B8%89%E8%A7%92%E5%BD%A2"><span class="toc-text">第05课    光栅化1：三角形</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E5%B1%8F%E5%B9%95%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-text">5.1    屏幕的定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E8%A7%86%E5%8F%A3%E5%8F%98%E6%8D%A2%EF%BC%9A-1-1-3-rightarrow-0-width-%C3%97-0-height"><span class="toc-text">5.2    视口变换：$[-1,1]^3 \rightarrow [0,width]×[0,height]$</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E7%8E%B0%E4%BB%A3%E6%98%BE%E7%A4%BA%E5%8E%9F%E7%90%86"><span class="toc-text">5.3    现代显示原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-%E4%B8%89%E8%A7%92%E5%BD%A2%E7%9A%84%E6%80%A7%E8%B4%A8"><span class="toc-text">5.4    三角形的性质</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-%E5%85%89%E6%A0%85%E5%8C%96%EF%BC%9A%E4%B8%89%E8%A7%92%E5%BD%A2-gt-%E5%83%8F%E7%B4%A0"><span class="toc-text">5.5    光栅化：三角形 &#x3D;&gt; 像素</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-1-%E9%87%87%E6%A0%B7%E6%B3%95-%E7%A1%AE%E5%AE%9A%E5%83%8F%E7%B4%A0%E9%A2%9C%E8%89%B2"><span class="toc-text">5.5.1    采样法 确定像素颜色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-2-%E4%B8%89%E8%A7%92%E5%BD%A2%E7%9A%84%E5%8C%85%E5%9B%B4%E7%9B%92"><span class="toc-text">5.5.2    三角形的包围盒</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC06%E8%AF%BE-%E5%85%89%E6%A0%85%E5%8C%962%EF%BC%9A%E5%8F%8D%E8%B5%B0%E6%A0%B7-amp-%E6%B7%B1%E5%BA%A6%E7%BC%93%E5%86%B2"><span class="toc-text">第06课    光栅化2：反走样&amp;深度缓冲</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E5%8F%8D%E8%B5%B0%E6%A0%B7%E6%96%B9%E6%B3%95%EF%BC%9A%E5%9C%A8%E9%87%87%E6%A0%B7%E4%B9%8B%E5%89%8D%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4-%E6%A8%A1%E7%B3%8A%E5%A4%84%E7%90%86"><span class="toc-text">6.1     反走样方法：在采样之前进行过滤&#x2F;模糊处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1-%E5%85%88%E6%BB%A4%E6%B3%A2%EF%BC%8C%E5%90%8E%E9%87%87%E6%A0%B7%EF%BC%9AAliasing"><span class="toc-text">6.1.1    先滤波，后采样：Aliasing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-2-%E5%85%88%E9%87%87%E6%A0%B7%EF%BC%8C%E5%90%8E%E6%BB%A4%E6%B3%A2%EF%BC%9ABlurred-Aliasing"><span class="toc-text">6.1.2    先采样，后滤波：Blurred Aliasing</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E9%A2%91%E7%8E%87%E5%9F%9F"><span class="toc-text">6.2    频率域</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-1-%E7%A9%BA%E9%97%B4%E5%9F%9F-%E4%B8%8E-%E9%A2%91%E7%8E%87%E5%9F%9F%E7%9A%84%E8%BD%AC%E6%8D%A2%EF%BC%9A%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2"><span class="toc-text">6.2.1    空间域 与 频率域的转换：傅里叶变换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-2-%E5%87%BD%E6%95%B0%E7%9A%84%E9%A2%91%E7%8E%87%E8%B6%8A%E9%AB%98%EF%BC%8C%E9%9C%80%E8%A6%81%E7%9A%84%E9%87%87%E6%A0%B7%E9%A2%91%E7%8E%87%E8%B6%8A%E9%AB%98"><span class="toc-text">6.2.2    函数的频率越高，需要的采样频率越高</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-3-%E4%BB%8E%E9%A2%91%E7%8E%87%E8%A7%92%E5%BA%A6%E7%90%86%E8%A7%A3%E8%B5%B0%E6%A0%B7"><span class="toc-text">6.2.3    从频率角度理解走样</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E6%BB%A4%E6%B3%A2%EF%BC%9A%E5%88%A0%E9%99%A4%E4%B8%80%E4%BA%9B%E9%A2%91%E7%8E%87%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-text">6.3    滤波：删除一些频率的内容</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-1-%E9%80%9A%E8%BF%87%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2%EF%BC%8C%E5%B0%86%E5%9B%BE%E5%83%8F%E5%8F%98%E4%B8%BA%E9%A2%91%E7%8E%87%E5%9B%BE"><span class="toc-text">6.3.1    通过傅里叶变换，将图像变为频率图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-2-%E9%AB%98%E9%80%9A%E6%BB%A4%E6%B3%A2"><span class="toc-text">6.3.2    高通滤波</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-3-%E4%BD%8E%E9%80%9A%E6%BB%A4%E6%B3%A2"><span class="toc-text">6.3.3    低通滤波</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-4-%E8%BF%87%E6%BB%A4%E9%AB%98%E9%A2%91%E5%92%8C%E4%BD%8E%E9%A2%91%E9%83%A8%E5%88%86"><span class="toc-text">6.3.4    过滤高频和低频部分</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E6%BB%A4%E6%B3%A2-%E5%B9%B3%E5%9D%87-%E5%8D%B7%E7%A7%AF"><span class="toc-text">6.4    滤波 &#x3D; 平均 &#x3D; 卷积</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-1-%E5%8D%B7%E7%A7%AF%E5%AE%9A%E7%90%86%EF%BC%9A%E6%97%B6%E5%9F%9F%E7%9A%84%E5%8D%B7%E7%A7%AF-lt-gt-%E9%A2%91%E5%9F%9F%E7%9A%84%E4%B9%98%E7%A7%AF"><span class="toc-text">6.4.1    卷积定理：时域的卷积 &lt;&#x3D;&gt; 频域的乘积</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-2-%E6%BB%A4%E6%B3%A2%E5%99%A8%E7%9A%84%E6%97%B6%E5%9F%9F%E4%B8%8E%E9%A2%91%E5%9F%9F%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">6.4.2    滤波器的时域与频域的关系</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-%E9%A2%91%E7%8E%87%E8%A7%92%E5%BA%A6%E7%90%86%E8%A7%A3%E9%87%87%E6%A0%B7"><span class="toc-text">6.5    频率角度理解采样</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-1-%E9%87%87%E6%A0%B7-%E9%87%8D%E5%A4%8D%E5%8E%9F%E5%A7%8B%E4%BF%A1%E5%8F%B7%E7%9A%84%E9%A2%91%E8%B0%B1"><span class="toc-text">6.5.1    采样 &#x3D; 重复原始信号的频谱</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-2-%E8%B5%B0%E6%A0%B7-%E9%A2%91%E8%B0%B1%E7%9A%84%E5%86%85%E5%AE%B9%E5%87%BA%E7%8E%B0%E9%87%8D%E5%8F%A0"><span class="toc-text">6.5.2    走样 &#x3D; 频谱的内容出现重叠</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-3-%E5%8F%8D%E8%B5%B0%E6%A0%B7-%E5%85%88%E5%88%A0%E9%99%A4%E9%AB%98%E9%A2%91%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%9C%A8%E9%87%87%E6%A0%B7"><span class="toc-text">6.5.3    反走样 &#x3D; 先删除高频信息，在采样</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6-%E5%8F%8D%E8%B5%B0%E6%A0%B7%E7%9A%84%E5%AE%9E%E9%99%85%E5%81%9A%E6%B3%95"><span class="toc-text">6.6    反走样的实际做法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-1-MSAA%EF%BC%9AMultisample-Antialiasing"><span class="toc-text">6.6.1    MSAA：Multisample Antialiasing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-2-FXAA%EF%BC%9AFast-Approximate-Antialiasing"><span class="toc-text">6.6.2    FXAA：Fast Approximate Antialiasing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-3-TAA%EF%BC%9ATemporal-Antialiasing"><span class="toc-text">6.6.3    TAA：Temporal Antialiasing</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-7-%E8%B6%85%E5%88%86%E8%BE%A8%E7%8E%87-%E8%B6%85%E9%87%87%E6%A0%B7"><span class="toc-text">6.7    超分辨率&#x2F;超采样</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-8-%E6%B7%B1%E5%BA%A6%E7%BC%93%E5%86%B2%EF%BC%9A%E8%A7%A3%E5%86%B3%E5%8F%AF%E8%A7%81%E6%80%A7"><span class="toc-text">6.8    深度缓冲：解决可见性</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC07%E8%AF%BE-%E7%9D%80%E8%89%B21%EF%BC%9ABlinn-Phong%E5%8F%8D%E5%B0%84%E6%A8%A1%E5%9E%8B"><span class="toc-text">第07课    着色1：Blinn-Phong反射模型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E5%8F%8D%E5%B0%84%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%BE%93%E5%85%A5"><span class="toc-text">7.1    反射模型的输入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-%E5%85%89%E7%85%A7%E7%9A%84%E8%83%BD%E9%87%8F%E4%BC%A0%E9%80%92%E5%85%B3%E7%B3%BB"><span class="toc-text">7.2    光照的能量传递关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-%E6%BC%AB%E5%8F%8D%E5%B0%84-Diffuse-Reflection"><span class="toc-text">7.3    漫反射 Diffuse Reflection</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84-amp-%E9%AB%98%E5%85%89%E9%A1%B9-Specular-Reflection"><span class="toc-text">7.4    镜面反射&amp;高光项 Specular Reflection</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-5-%E7%8E%AF%E5%A2%83%E5%85%89-Ambient-Term"><span class="toc-text">7.5    环境光 Ambient Term</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-6-Blinn-Phong%E5%8F%8D%E5%B0%84%E6%A8%A1%E5%9E%8B"><span class="toc-text">7.6    Blinn-Phong反射模型</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC08%E8%AF%BE-%E7%9D%80%E8%89%B22%EF%BC%9A%E7%9D%80%E8%89%B2%E9%A2%91%E7%8E%87-amp-%E5%AE%9E%E6%97%B6%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF"><span class="toc-text">第08课    着色2：着色频率&amp;实时渲染管线</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-%E7%9D%80%E8%89%B2%E9%A2%91%E7%8E%87"><span class="toc-text">8.1    着色频率</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-1-%E8%AE%A1%E7%AE%97%E9%A1%B6%E7%82%B9%E6%B3%95%E7%BA%BF"><span class="toc-text">8.1.1    计算顶点法线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-2-%E8%AE%A1%E7%AE%97%E5%83%8F%E7%B4%A0%E6%B3%95%E7%BA%BF"><span class="toc-text">8.1.2    计算像素法线</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E5%AE%9E%E6%97%B6%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF"><span class="toc-text">8.2    实时渲染管线</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3-Shader%E7%A8%8B%E5%BA%8F"><span class="toc-text">8.3    Shader程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-GPU"><span class="toc-text">8.4    GPU</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-5-%E7%BA%B9%E7%90%86%E6%98%A0%E5%B0%84"><span class="toc-text">8.5    纹理映射</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC09%E8%AF%BE-%E7%9D%80%E8%89%B23%EF%BC%9A%E7%BA%B9%E7%90%86%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-text">第09课    着色3：纹理的应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-%E9%87%8D%E5%BF%83%E5%9D%90%E6%A0%87-Barycentric-Coordinates"><span class="toc-text">9.1    重心坐标 Barycentric Coordinates</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-1-%E9%87%8D%E5%BF%83%E5%9D%90%E6%A0%87%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">9.1.1    重心坐标是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-2-%E9%87%8D%E5%BF%83%E5%9D%90%E6%A0%87%E6%8F%92%E5%80%BC"><span class="toc-text">9.1.2    重心坐标插值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-%E7%BA%B9%E7%90%86%E7%9A%84%E5%9F%BA%E7%A1%80%E5%BA%94%E7%94%A8"><span class="toc-text">9.2    纹理的基础应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-1-%E7%AE%80%E5%8D%95%E7%BA%B9%E7%90%86%E6%98%A0%E5%B0%84%EF%BC%9A%E6%BC%AB%E5%8F%8D%E5%B0%84%E9%A2%9C%E8%89%B2"><span class="toc-text">9.2.1    简单纹理映射：漫反射颜色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-2-%E7%BA%B9%E7%90%86%E6%94%BE%E5%A4%A7%EF%BC%9A%E5%8F%8C%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC-Bilinear-interpolation"><span class="toc-text">9.2.2    纹理放大：双线性插值 Bilinear interpolation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-3-%E7%BA%B9%E7%90%86%E7%BC%A9%E5%B0%8F"><span class="toc-text">9.2.3    纹理缩小</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-3-1-Mipmap"><span class="toc-text">9.2.3.1    Mipmap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-3-2-%E5%90%84%E5%90%91%E5%BC%82%E6%80%A7%E8%BF%87%E6%BB%A4"><span class="toc-text">9.2.3.2    各向异性过滤</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-3-%E7%BA%B9%E7%90%86%E7%9A%84%E5%85%B6%E4%BB%96%E5%BA%94%E7%94%A8"><span class="toc-text">9.3    纹理的其他应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-1-%E7%8E%AF%E5%A2%83%E8%B4%B4%E5%9B%BE-Environment-Map"><span class="toc-text">9.3.1    环境贴图 Environment Map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-2-%E5%87%B9%E5%87%B8%E8%B4%B4%E5%9B%BE-amp-%E6%B3%95%E7%BA%BF%E8%B4%B4%E5%9B%BE"><span class="toc-text">9.3.2    凹凸贴图 &amp; 法线贴图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-3-%E4%BD%8D%E7%A7%BB%E8%B4%B4%E5%9B%BE-Displacement-Mapping"><span class="toc-text">9.3.3    位移贴图 Displacement Mapping</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-4-%E4%B8%89%E7%BB%B4%E7%BA%B9%E7%90%86"><span class="toc-text">9.3.4    三维纹理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-5-%E4%BF%9D%E5%AD%98%E9%A2%84%E5%A4%84%E7%90%86%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-text">9.3.5    保存预处理的数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-6-%E4%B8%89%E7%BB%B4%E7%BA%B9%E7%90%86-amp-%E4%BD%93%E7%A7%AF%E6%B8%B2%E6%9F%93"><span class="toc-text">9.3.6    三维纹理 &amp; 体积渲染</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC10%E8%AF%BE-%E5%87%A0%E4%BD%951%EF%BC%9A%E4%BB%8B%E7%BB%8D"><span class="toc-text">第10课    几何1：介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1-%E9%9A%90%E5%BC%8F%E8%A1%A8%E7%A4%BA-Implicit"><span class="toc-text">10.1    隐式表示 Implicit</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2-%E6%98%BE%E7%A4%BA%E8%A1%A8%E7%A4%BA-Explicit"><span class="toc-text">10.2    显示表示 Explicit</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-3-CG%E4%B8%AD%E7%9A%84%E9%9A%90%E5%BC%8F%E5%87%A0%E4%BD%95%E8%A1%A8%E7%A4%BA"><span class="toc-text">10.3    CG中的隐式几何表示</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-1-%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%E8%A1%A8%E8%BF%B0"><span class="toc-text">10.3.1    数学公式表述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-2-%E6%9E%84%E9%80%A0%E5%87%A0%E4%BD%95CSG%EF%BC%9AConstructive-Solid-Geometry"><span class="toc-text">10.3.2    构造几何CSG：Constructive Solid Geometry</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-3-%E8%B7%9D%E7%A6%BB%E5%87%BD%E6%95%B0-Distance-Functions"><span class="toc-text">10.3.3    距离函数 Distance Functions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-4-%E6%B0%B4%E5%B9%B3%E9%9B%86%E5%87%BD%E6%95%B0"><span class="toc-text">10.3.4    水平集函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-5-%E5%88%86%E5%BD%A2-Fractal"><span class="toc-text">10.3.5    分形 Fractal</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-4-CG%E4%B8%AD%E7%9A%84%E6%98%BE%E7%A4%BA%E5%87%A0%E4%BD%95%E8%A1%A8%E7%A4%BA"><span class="toc-text">10.4    CG中的显示几何表示</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-1-%E7%82%B9%E4%BA%91"><span class="toc-text">10.4.1    点云</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-2-%E5%A4%9A%E8%BE%B9%E5%BD%A2%E9%9D%A2"><span class="toc-text">10.4.2    多边形面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-3-The-Wavefront-Object-File-Format"><span class="toc-text">10.4.3    The Wavefront Object File Format</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC11%E8%AF%BE-%E5%87%A0%E4%BD%952%EF%BC%9A%E6%9B%B2%E7%BA%BF%E5%92%8C%E6%9B%B2%E9%9D%A2"><span class="toc-text">第11课    几何2：曲线和曲面</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1-%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF-Bezier-Curve"><span class="toc-text">11.1    贝塞尔曲线 Bezier Curve</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-1-de-Casteljau%E7%AE%97%E6%B3%95"><span class="toc-text">11.1.1    de Casteljau算法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-1-1-1-%E4%BA%8C%E6%AC%A1%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF%EF%BC%9A%E4%B8%89%E4%B8%AA%E6%8E%A7%E5%88%B6%E7%82%B9"><span class="toc-text">11.1.1.1    二次贝塞尔曲线：三个控制点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-1-1-2-%E5%9B%9B%E4%B8%AA%E6%8E%A7%E5%88%B6%E7%82%B9"><span class="toc-text">11.1.1.2    四个控制点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-1-1-3-%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF%E7%9A%84%E4%BB%A3%E6%95%B0%E5%BD%A2%E5%BC%8F"><span class="toc-text">11.1.1.3    贝塞尔曲线的代数形式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-2-n%E9%98%B6%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF%E7%9A%84%E4%BB%A3%E6%95%B0%E8%A1%A8%E7%A4%BA"><span class="toc-text">11.1.2    n阶贝塞尔曲线的代数表示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-3-%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF%E7%9A%84%E6%80%A7%E8%B4%A8"><span class="toc-text">11.1.3    贝塞尔曲线的性质</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-4-%E5%88%86%E6%AE%B5%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF-Picewise-Bezier-Curves"><span class="toc-text">11.1.4    分段贝塞尔曲线 Picewise Bezier Curves</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-%E6%A0%B7%E6%9D%A1%E6%9B%B2%E7%BA%BF-Spline"><span class="toc-text">11.2    样条曲线 Spline</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-1-B%E6%A0%B7%E6%9D%A1-Basis-Spline"><span class="toc-text">11.2.1    B样条 Basis-Spline</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3-%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E9%9D%A2-Bezier-Surfaces"><span class="toc-text">11.3    贝塞尔曲面 Bezier Surfaces</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-1-4%C3%974%E4%B8%AA%E6%8E%A7%E5%88%B6%E7%82%B9"><span class="toc-text">11.3.1    4×4个控制点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-2-%E8%AE%A1%E7%AE%97%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E9%9D%A2"><span class="toc-text">11.3.2    计算贝塞尔曲面</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC12%E8%AF%BE-%E5%87%A0%E4%BD%953%EF%BC%9A%E7%BD%91%E6%A0%BC%E4%BD%93"><span class="toc-text">第12课    几何3：网格体</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#12-1-%E7%BD%91%E6%A0%BC%E4%BD%93%E7%9A%84%E7%BB%86%E5%88%86-Subdivision"><span class="toc-text">12.1    网格体的细分 Subdivision</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-1-Loop%E7%BB%86%E5%88%86%EF%BC%9A%E4%B8%89%E8%A7%92%E5%BD%A2%E7%BD%91%E6%A0%BC%E4%BD%93"><span class="toc-text">12.1.1    Loop细分：三角形网格体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-2-Catmull-Clark%E7%BB%86%E5%88%86%EF%BC%9A%E4%B8%80%E8%88%AC%E7%9A%84%E7%BD%91%E6%A0%BC%E4%BD%93"><span class="toc-text">12.1.2    Catmull-Clark细分：一般的网格体</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-2-%E7%BD%91%E6%A0%BC%E4%BD%93%E7%AE%80%E5%8C%96-Simplification"><span class="toc-text">12.2    网格体简化 Simplification</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-1-%E8%BE%B9%E5%9D%8D%E7%BC%A9-Collapsing-An-Edge"><span class="toc-text">12.2.1    边坍缩 Collapsing An Edge</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-2-%E4%BA%8C%E6%AC%A1%E5%BA%A6%E9%87%8F%E8%AF%AF%E5%B7%AE-Quadric-Error-Metrics"><span class="toc-text">12.2.2    二次度量误差 Quadric Error Metrics</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-3-%E8%BE%B9%E5%9D%8D%E7%BC%A9%E7%9A%84%E4%BA%8C%E6%AC%A1%E8%AF%AF%E5%B7%AE"><span class="toc-text">12.2.3    边坍缩的二次误差</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC12%E8%AF%BE-%E9%98%B4%E5%BD%B1-Shadow-Mapping"><span class="toc-text">第12课    阴影 Shadow Mapping</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#12-1-%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9ARender-from-Light"><span class="toc-text">12.1    第一步：Render from Light</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-2-%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9ARender-from-Eye"><span class="toc-text">12.2    第二步：Render from Eye</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-3-%E7%A4%BA%E4%BE%8B"><span class="toc-text">12.3    示例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-4-%E7%A1%AC%E9%98%B4%E5%BD%B1%E4%B8%8E%E8%BD%AF%E9%98%B4%E5%BD%B1"><span class="toc-text">12.4    硬阴影与软阴影</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC13%E8%AF%BE-%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA1%EF%BC%9AWhitted-Style-Ray-Tracing"><span class="toc-text">第13课    光线追踪1：Whitted-Style Ray Tracing</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#13-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA"><span class="toc-text">13.1    为什么要使用光线追踪</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-2-%E5%9F%BA%E7%A1%80%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA%E7%AE%97%E6%B3%95"><span class="toc-text">13.2    基础光线追踪算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-1-%E5%85%89%E7%BA%BF%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">13.2.1    光线是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-2-%E5%85%89%E7%BA%BF%E6%8A%95%E5%B0%84"><span class="toc-text">13.2.2    光线投射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-3-%E9%80%92%E5%BD%92%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA"><span class="toc-text">13.2.3    递归光线追踪</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-3-%E5%85%89%E7%BA%BF%E5%92%8C%E8%A1%A8%E9%9D%A2%E7%9A%84%E4%BA%A4%E7%82%B9"><span class="toc-text">13.3    光线和表面的交点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-1-%E5%85%89%E7%BA%BF%E7%9A%84%E6%95%B0%E5%AD%A6%E5%AE%9A%E4%B9%89"><span class="toc-text">13.3.1    光线的数学定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-2-%E5%85%89%E7%BA%BF-%E4%B8%8E-%E7%90%83-%E6%B1%82%E4%BA%A4%E7%82%B9"><span class="toc-text">13.3.2    光线 与 球 求交点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-3-%E5%85%89%E7%BA%BF-%E4%B8%8E-%E9%9A%90%E5%BC%8F%E8%A1%A8%E9%9D%A2-%E6%B1%82%E4%BA%A4%E7%82%B9"><span class="toc-text">13.3.3    光线 与 隐式表面 求交点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-4-%E5%85%89%E7%BA%BF-%E4%B8%8E-%E4%B8%89%E8%A7%92%E5%BD%A2-%E6%B1%82%E4%BA%A4%E7%82%B9"><span class="toc-text">13.3.4    光线 与 三角形 求交点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#13-3-4-1-%E5%B9%B3%E9%9D%A2%E7%9A%84%E6%95%B0%E5%AD%A6%E5%AE%9A%E4%B9%89"><span class="toc-text">13.3.4.1    平面的数学定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-3-4-2-%E5%85%89%E7%BA%BF%E5%92%8C%E5%B9%B3%E9%9D%A2%E7%9A%84%E4%BA%A4%E7%82%B9"><span class="toc-text">13.3.4.2    光线和平面的交点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-3-4-3-Moller-Trumbore%E7%AE%97%E6%B3%95"><span class="toc-text">13.3.4.3    Moller Trumbore算法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-4-%E5%8A%A0%E9%80%9F-%E5%85%89%E7%BA%BF-%E4%B8%8E-%E4%B8%89%E8%A7%92%E5%BD%A2%E8%A1%A8%E9%9D%A2-%E6%B1%82%E4%BA%A4"><span class="toc-text">13.4    加速 光线 与 三角形表面 求交</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-4-1-%E5%8C%85%E5%9B%B4%E7%9B%92-Bounding-Volumes"><span class="toc-text">13.4.1    包围盒 Bounding Volumes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-4-2-%E8%BD%B4%E5%AF%B9%E9%BD%90%E5%8C%85%E5%9B%B4%E7%9B%92AABB%EF%BC%9AAxis-Aligned-Bounding-Box"><span class="toc-text">13.4.2    轴对齐包围盒AABB：Axis-Aligned Bounding Box</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC14%E8%AF%BE-%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA2%EF%BC%9A%E4%BD%BF%E7%94%A8AABB%E5%8C%85%E5%9B%B4%E7%9B%92%E5%8A%A0%E9%80%9F%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA"><span class="toc-text">第14课    光线追踪2：使用AABB包围盒加速光线追踪</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#14-1-%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8AABB%E5%8C%85%E5%9B%B4%E7%9B%92"><span class="toc-text">14.1    直接使用AABB包围盒</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-2-%E7%A9%BA%E9%97%B4%E5%88%92%E5%88%86-Spatial-Partitions"><span class="toc-text">14.2    空间划分 Spatial Partitions</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-1-KD-Tree-%E9%A2%84%E5%A4%84%E7%90%86"><span class="toc-text">14.2.1    KD-Tree 预处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-2-KD-Tree%E5%8A%A0%E9%80%9F%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA"><span class="toc-text">14.2.2    KD-Tree加速光线追踪</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-3-%E7%89%A9%E4%BD%93%E5%88%92%E5%88%86-Object-Partitions"><span class="toc-text">14.3    物体划分 Object Partitions</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-1-%E5%B1%82%E6%AC%A1%E5%8C%85%E5%9B%B4%E7%9B%92-BVH%EF%BC%9ABounding-Volume-Hierarchy"><span class="toc-text">14.3.1    层次包围盒 BVH：Bounding Volume Hierarchy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-2-%E5%88%92%E5%88%86%E6%96%B9%E6%B3%95"><span class="toc-text">14.3.2    划分方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-3-BVH%E5%8A%A0%E9%80%9F%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA"><span class="toc-text">14.3.3    BVH加速光线追踪</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-4-%E7%A9%BA%E9%97%B4%E5%88%92%E5%88%86-vs-%E7%89%A9%E4%BD%93%E5%88%92%E5%88%86"><span class="toc-text">14.3.4    空间划分 vs 物体划分</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC15%E8%AF%BE-%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA3%EF%BC%9ABRDF-amp-%E6%B8%B2%E6%9F%93%E6%96%B9%E7%A8%8B"><span class="toc-text">第15课    光线追踪3：BRDF &amp; 渲染方程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#15-1-%E8%BE%90%E5%B0%84%E5%BA%A6%E9%87%8F%E5%AD%A6-Basic-radiometry"><span class="toc-text">15.1    辐射度量学 Basic radiometry</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-1-Radiant-Flux-Power%EF%BC%9A%E5%8D%95%E4%BD%8D%E6%97%B6%E9%97%B4%E7%9A%84%E8%83%BD%E9%87%8F"><span class="toc-text">15.1.1    Radiant Flux&#x2F;Power：单位时间的能量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-2-Radiant-Intensity%EF%BC%9A%E5%8D%95%E4%BD%8D%E7%AB%8B%E4%BD%93%E8%A7%92%E7%9A%84%E8%83%BD%E9%87%8F"><span class="toc-text">15.1.2    Radiant Intensity：单位立体角的能量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#15-1-2-1-%E7%AB%8B%E4%BD%93%E8%A7%92-Solid-Angles"><span class="toc-text">15.1.2.1    立体角 Solid Angles</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-1-2-2-%E5%8D%95%E4%BD%8D%E7%AB%8B%E4%BD%93%E8%A7%92-Differential-Solid-Angles"><span class="toc-text">15.1.2.2    单位立体角  Differential Solid Angles</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-4-Irradiance%EF%BC%9A%E5%8D%95%E4%BD%8D%E9%9D%A2%E7%A7%AF%E7%9A%84%E8%83%BD%E9%87%8F"><span class="toc-text">15.1.4      Irradiance：单位面积的能量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-5-Radiance%EF%BC%9A%E5%8D%95%E4%BD%8D%E7%AB%8B%E4%BD%93%E8%A7%92-amp-%E5%8D%95%E4%BD%8D%E9%9D%A2%E7%A7%AF%E7%9A%84%E8%83%BD%E9%87%8F"><span class="toc-text">15.1.5    Radiance：单位立体角&amp;单位面积的能量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-6-Irradiance-vs-Radiance"><span class="toc-text">15.1.6    Irradiance vs Radiance</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-2-BRDF%EF%BC%9A%E5%8F%8C%E5%90%91%E5%8F%8D%E5%B0%84%E5%88%86%E5%B8%83%E5%87%BD%E6%95%B0"><span class="toc-text">15.2    BRDF：双向反射分布函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-2-1-%E6%9F%90%E4%B8%AA%E7%82%B9%E7%9A%84%E5%8F%8D%E5%B0%84"><span class="toc-text">15.2.1    某个点的反射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-2-2-BRDF"><span class="toc-text">15.2.2    BRDF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-2-3-%E5%8F%8D%E5%B0%84%E6%96%B9%E7%A8%8B-Reflection-Equation"><span class="toc-text">15.2.3    反射方程 Reflection Equation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-3-%E6%B8%B2%E6%9F%93%E6%96%B9%E7%A8%8B-Rendering-Equation"><span class="toc-text">15.3    渲染方程 Rendering Equation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-3-1-%E4%B8%80%E4%B8%AA%E7%82%B9%E5%85%89%E6%BA%90"><span class="toc-text">15.3.1    一个点光源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-3-2-%E5%BE%88%E5%A4%9A%E4%B8%AA%E7%82%B9%E5%85%89%E6%BA%90%EF%BC%9A%E5%8A%A0%E5%92%8C"><span class="toc-text">15.3.2    很多个点光源：加和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-3-3-%E9%9D%A2%E5%85%89%E6%BA%90%EF%BC%9A%E5%BE%88%E5%A4%9A%E4%B8%AA%E7%82%B9%E5%85%89%E6%BA%90%E7%9A%84%E9%9B%86%E5%90%88-gt-%E7%A7%AF%E5%88%86"><span class="toc-text">15.3.3    面光源：很多个点光源的集合 &#x3D;&gt; 积分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-3-4-%E5%85%B6%E4%BB%96%E8%A1%A8%E9%9D%A2%E7%9A%84%E5%8F%8D%E5%B0%84%EF%BC%9A%E5%BD%93%E6%88%90%E9%9D%A2%E5%85%89%E6%BA%90%E4%BD%BF%E7%94%A8"><span class="toc-text">15.3.4    其他表面的反射：当成面光源使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-3-5-%E6%B8%B2%E6%9F%93%E6%96%B9%E7%A8%8B%E7%9A%84%E7%AE%80%E5%8C%96%E8%A1%A8%E7%A4%BA"><span class="toc-text">15.3.5    渲染方程的简化表示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-3-6-%E5%85%89%E7%BA%BF%E5%BC%B9%E5%B0%84n%E6%AC%A1%E7%9A%84%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA-gt-%E5%85%A8%E5%B1%80%E5%85%89%E7%85%A7"><span class="toc-text">15.3.6    光线弹射n次的光线追踪 &#x3D;&gt; 全局光照</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-4-%E6%A6%82%E7%8E%87%E8%AE%BA"><span class="toc-text">15.4    概率论</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-4-1-PDF%EF%BC%9A%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%87%BD%E6%95%B0%EF%BC%8CX-p-x"><span class="toc-text">15.4.1    PDF：概率分布函数，X ~ p(x)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-4-2-%E9%9A%8F%E6%9C%BA%E5%8F%98%E9%87%8F%E5%87%BD%E6%95%B0%E7%9A%84%E6%9C%9F%E6%9C%9B"><span class="toc-text">15.4.2    随机变量函数的期望</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC16%E8%AF%BE-%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA4%EF%BC%9A%E8%92%99%E7%89%B9%E5%8D%A1%E6%B4%9B%E7%A7%AF%E5%88%86-amp-%E8%B7%AF%E5%BE%84%E8%BF%BD%E8%B8%AA"><span class="toc-text">第16课    光线追踪4：蒙特卡洛积分 &amp; 路径追踪</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#16-1-%E5%A4%8D%E4%B9%A0"><span class="toc-text">16.1    复习</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-2-%E8%92%99%E7%89%B9%E5%8D%A1%E6%B4%9B%E7%A7%AF%E5%88%86%EF%BC%9A%E9%87%87%E6%A0%B7%E6%B1%82%E5%AE%9A%E7%A7%AF%E5%88%86"><span class="toc-text">16.2    蒙特卡洛积分：采样求定积分</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-3-%E8%B7%AF%E5%BE%84%E8%BF%BD%E8%B8%AA%EF%BC%9APath-Tracing"><span class="toc-text">16.3    路径追踪：Path Tracing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-3-1-Whitted-Style-Ray-Tracing-%E7%9A%84%E5%81%9A%E6%B3%95%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">16.3.1    Whitted-Style Ray Tracing 的做法存在的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-3-2-%E4%BD%BF%E7%94%A8%E8%92%99%E7%89%B9%E5%8D%A1%E6%B4%9B%E7%A7%AF%E5%88%86%EF%BC%8C%E5%AE%9E%E7%8E%B0%E6%B8%B2%E6%9F%93%E6%96%B9%E7%A8%8B%E4%B8%AD%E7%9A%84%E7%A7%AF%E5%88%86"><span class="toc-text">16.3.2    使用蒙特卡洛积分，实现渲染方程中的积分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#16-3-2-1-%E7%9B%B4%E6%8E%A5%E5%85%89%E7%85%A7"><span class="toc-text">16.3.2.1    直接光照</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16-3-2-2-%E9%97%B4%E6%8E%A5%E5%85%89%E7%85%A7"><span class="toc-text">16.3.2.2    间接光照</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-4-%E8%B7%AF%E5%BE%84%E8%BF%BD%E8%B8%AA%EF%BC%9A%E8%A7%A3%E5%86%B3%E5%85%89%E7%BA%BF%E6%95%B0%E9%87%8F%E7%88%86%E7%82%B8"><span class="toc-text">16.4    路径追踪：解决光线数量爆炸</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-1-%E6%AF%8F%E4%B8%80%E4%B8%AA%E7%9D%80%E8%89%B2%E7%82%B9%EF%BC%8C%E5%8F%AA%E4%BD%BF%E7%94%A81%E6%A0%B9%E5%85%89%E7%BA%BF%E8%BF%9B%E8%A1%8C%E8%BF%BD%E8%B8%AA"><span class="toc-text">16.4.1    每一个着色点，只使用1根光线进行追踪</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-2-%E8%A7%A3%E5%86%B3%E5%99%AA%E5%A3%B0%E9%97%AE%E9%A2%98%EF%BC%9A%E9%80%89%E6%8B%A9%E5%A4%9A%E4%B8%AA%E7%A9%BF%E8%BF%87%E8%AF%A5%E7%9D%80%E8%89%B2%E7%82%B9%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BC%8C%E6%AF%8F%E4%B8%AA%E8%B7%AF%E5%BE%841%E6%9D%A1%E5%85%89%E7%BA%BF"><span class="toc-text">16.4.2    解决噪声问题：选择多个穿过该着色点的路径，每个路径1条光线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-3-%E8%A7%A3%E5%86%B3%E9%80%92%E5%BD%92%E6%97%A0%E6%B3%95%E5%81%9C%E4%B8%8B%E9%97%AE%E9%A2%98%EF%BC%9ARunssian-Roulette"><span class="toc-text">16.4.3    解决递归无法停下问题：Runssian Roulette</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-4-%E8%AE%A9%E8%B7%AF%E5%BE%84%E8%BF%BD%E8%B8%AA%E5%8F%98%E5%BE%97%E9%AB%98%E6%95%88%EF%BC%9A%E5%AF%B9%E5%85%89%E6%BA%90%E9%87%87%E6%A0%B7"><span class="toc-text">16.4.4    让路径追踪变得高效：对光源采样</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC17%E8%AF%BE-%E6%9D%90%E8%B4%A8%E4%B8%8E%E5%A4%96%E8%A7%82"><span class="toc-text">第17课    材质与外观</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#17-1-%E6%9D%90%E8%B4%A8-BRDF-BTDF-BSDF"><span class="toc-text">17.1    材质 &#x3D;&#x3D; BRDF + BTDF&#x3D; BSDF</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-1-1-%E6%BC%AB%E5%8F%8D%E5%B0%84%E6%9D%90%E8%B4%A8-BRDF"><span class="toc-text">17.1.1    漫反射材质 BRDF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-1-2-%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84-BRDF"><span class="toc-text">17.1.2    镜面反射 BRDF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-1-3-%E6%8A%98%E5%B0%84-BTDF"><span class="toc-text">17.1.3    折射 BTDF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-1-4-%E8%8F%B2%E6%B6%85%E5%B0%94%E9%A1%B9%EF%BC%9A%E5%A4%9A%E5%B0%91%E5%85%89%E5%8F%8D%E5%B0%84%EF%BC%8C%E5%A4%9A%E5%B0%91%E5%85%89%E6%8A%98%E5%B0%84"><span class="toc-text">17.1.4    菲涅尔项：多少光反射，多少光折射</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-2-%E5%BE%AE%E8%A1%A8%E9%9D%A2%E6%A8%A1%E5%9E%8B-Microfacet-Material"><span class="toc-text">17.2    微表面模型 Microfacet Material</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-2-1-%E5%BE%AE%E8%A1%A8%E9%9D%A2BRDF"><span class="toc-text">17.2.1    微表面BRDF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-2-2-%E5%90%84%E5%90%91%E5%90%8C%E6%80%A7-%E5%90%84%E5%90%91%E5%BC%82%E6%80%A7%E6%9D%90%E8%B4%A8-Isotropic-Anisotropic-Materials"><span class="toc-text">17.2.2    各向同性&#x2F;各向异性材质 Isotropic&#x2F;Anisotropic Materials</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-3-BRDF%E7%9A%84%E6%80%A7%E8%B4%A8"><span class="toc-text">17.3    BRDF的性质</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-4-%E6%B5%8B%E9%87%8FBRDF"><span class="toc-text">17.4    测量BRDF</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-5-%E4%BF%9D%E5%AD%98BRDF"><span class="toc-text">17.5    保存BRDF</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC18%E8%AF%BE-%E9%AB%98%E7%BA%A7%E6%B8%B2%E6%9F%93"><span class="toc-text">第18课    高级渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#18-1-%E9%AB%98%E7%BA%A7%E5%85%89%E7%BA%BF%E4%BC%A0%E6%92%AD"><span class="toc-text">18.1    高级光线传播</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#18-1-1-%E6%97%A0%E5%81%8F-amp-%E6%9C%89%E5%81%8F-%E8%92%99%E7%89%B9%E5%8D%A1%E6%B4%9B%E4%BC%B0%E8%AE%A1"><span class="toc-text">18.1.1    无偏 &amp; 有偏 蒙特卡洛估计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-1-2-%E5%8F%8C%E5%90%91%E8%B7%AF%E5%BE%84%E8%BF%BD%E8%B8%AA-BDPT"><span class="toc-text">18.1.2    双向路径追踪 BDPT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-1-3-Metropolis%E5%85%89%E7%BA%BF%E4%BC%A0%E6%92%AD-MLT"><span class="toc-text">18.1.3    Metropolis光线传播 MLT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-1-4-%E5%85%89%E5%AD%90%E6%98%A0%E5%B0%84-Photon-Mapping"><span class="toc-text">18.1.4    光子映射 Photon Mapping</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-1-5-Vertex-Connection-and-Merging"><span class="toc-text">18.1.5    Vertex Connection and Merging</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-1-6-%E5%AE%9E%E6%97%B6%E8%BE%90%E5%B0%84%E5%BA%A6-Instant-Radiosity"><span class="toc-text">18.1.6    实时辐射度 Instant Radiosity</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-2-%E9%AB%98%E7%BA%A7%E5%A4%96%E8%A7%82%E5%BB%BA%E6%A8%A1"><span class="toc-text">18.2    高级外观建模</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#18-2-1-%E9%9D%9E%E8%A1%A8%E9%9D%A2%E6%A8%A1%E5%9E%8B%EF%BC%9A%E4%BA%91%E3%80%81-%E7%83%9F%E3%80%81%E9%9B%BE%E7%AD%89"><span class="toc-text">18.2.1    非表面模型：云、 烟、雾等</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-2-2-%E5%A4%B4%E5%8F%91%E8%A1%A8%E9%9D%A2"><span class="toc-text">18.2.2    头发表面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-2-3-%E9%A2%97%E7%B2%92%E6%9D%90%E8%B4%A8%EF%BC%9AGranular"><span class="toc-text">18.2.3    颗粒材质：Granular</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-2-4-%E8%A1%A8%E9%9D%A2%E6%A8%A1%E5%9E%8B%EF%BC%9A%E6%AC%A1%E8%A1%A8%E9%9D%A2%E6%95%A3%E5%B0%84-BSSRDF"><span class="toc-text">18.2.4    表面模型：次表面散射 BSSRDF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-2-5-%E5%B8%83%E6%96%99"><span class="toc-text">18.2.5    布料</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-3-%E9%80%9A%E8%BF%87%E4%BF%AE%E6%94%B9%E5%BE%AE%E8%A1%A8%E9%9D%A2%E6%B3%95%E7%BA%BF%E5%88%86%E5%B8%83%EF%BC%8C%E5%BE%97%E5%88%B0%E4%B8%8D%E5%90%8C%E7%9A%84%E6%95%88%E6%9E%9C"><span class="toc-text">18.3    通过修改微表面法线分布，得到不同的效果</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-1-%E5%AF%B9%E4%B8%80%E4%B8%AA%E5%8C%BA%E5%9F%9F%E5%86%85%E7%9A%84%E5%BE%AE%E8%A1%A8%E9%9D%A2%E8%BF%9B%E8%A1%8C%E7%A7%AF%E5%88%86"><span class="toc-text">18.3.1    对一个区域内的微表面进行积分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-2-%E6%B3%A2%E5%8A%A8%E5%85%89%E5%AD%A6%E4%B8%8E%E5%87%A0%E4%BD%95%E5%85%89%E5%AD%A6%E5%BE%97%E5%88%B0%E7%9A%84NDF"><span class="toc-text">18.3.2    波动光学与几何光学得到的NDF</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-4-%E7%A8%8B%E5%BA%8F%E5%8C%96%E7%94%9F%E6%88%90%E8%A1%A8%E9%9D%A2"><span class="toc-text">18.4    程序化生成表面</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC19%E8%AF%BE-%E7%9B%B8%E6%9C%BA-amp-%E9%80%8F%E9%95%9C-amp-%E5%85%89%E5%9C%BA"><span class="toc-text">第19课    相机&amp;透镜&amp;光场</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#19-1-%E7%9B%B8%E6%9C%BA"><span class="toc-text">19.1    相机</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-1-1-%E9%92%88%E5%AD%94%E7%9B%B8%E6%9C%BA"><span class="toc-text">19.1.1    针孔相机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-1-2-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-text">19.1.2    基础概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#19-1-2-1-%E8%A7%86%E5%9C%BA-FOV"><span class="toc-text">19.1.2.1    视场 FOV</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19-1-2-2-%E6%9B%9D%E5%85%89%E5%BA%A6-Exposure"><span class="toc-text">19.1.2.2    曝光度 Exposure</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19-1-2-3-%E5%BD%B1%E5%93%8D%E6%9B%9D%E5%85%89%E5%BA%A6%E7%9A%84%E5%9B%A0%E7%B4%A0%EF%BC%9A%E5%85%89%E5%9C%88-amp-%E5%BF%AB%E9%97%A8-amp-ISO"><span class="toc-text">19.1.2.3    影响曝光度的因素：光圈&amp;快门&amp;ISO</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19-1-2-4-%E9%AB%98%E9%80%9F-%E4%BD%8E%E9%80%9F%E6%91%84%E5%BD%B1"><span class="toc-text">19.1.2.4    高速&#x2F;低速摄影</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-2-%E8%96%84%E9%80%8F%E9%95%9C%E8%BF%91%E4%BC%BC"><span class="toc-text">19.2    薄透镜近似</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-1-%E7%90%86%E6%83%B3%E5%8C%96%E8%96%84%E9%80%8F%E9%95%9C"><span class="toc-text">19.2.1    理想化薄透镜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-2-%E7%84%A6%E6%95%A3%E6%A8%A1%E7%B3%8A-Defocus-Blur"><span class="toc-text">19.2.2    焦散模糊 Defocus Blur</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-3-F-Number%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-text">19.2.3    F-Number的定义</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-3-%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA%E6%A8%A1%E6%8B%9F%E8%96%84%E9%80%8F%E9%95%9C"><span class="toc-text">19.3    光线追踪模拟薄透镜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-3-1-%E5%AE%9A%E4%B9%89"><span class="toc-text">19.3.1    定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-3-2-%E6%B8%B2%E6%9F%93%E6%96%B9%E5%BC%8F"><span class="toc-text">19.3.2    渲染方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-4-%E6%99%AF%E6%B7%B1-Depth-of-Field%EF%BC%9AD-F-D-N"><span class="toc-text">19.4    景深 Depth of Field：D~F~ ~ D~N~</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-5-%E5%85%89%E5%9C%BA-Light-Field-Lumigraph"><span class="toc-text">19.5    光场 Light Field &#x2F; Lumigraph</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-5-1-%E5%85%A8%E5%85%89%E5%87%BD%E6%95%B0-Plenoptic-Function"><span class="toc-text">19.5.1    全光函数 Plenoptic Function</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#19-5-1-1-Grayscale-snapshot%EF%BC%9AP-%CE%B8-%CE%A6"><span class="toc-text">19.5.1.1    Grayscale snapshot：P(θ, Φ)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19-5-1-2-Color-snapshot%EF%BC%9AP-%CE%B8-%CE%A6-%CE%BB"><span class="toc-text">19.5.1.2    Color snapshot：P(θ, Φ, λ)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19-5-1-3-Movie%EF%BC%9AP-%CE%B8-%CE%A6-%CE%BB-t"><span class="toc-text">19.5.1.3    Movie：P(θ, Φ, λ, t)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19-5-1-4-Holographic-Movie%EF%BC%9AP-%CE%B8-%CE%A6-%CE%BB-t-V-X-V-Y-V-Z"><span class="toc-text">19.5.1.4    Holographic Movie：P(θ, Φ, λ, t, V~X~, V~Y~, V~Z~)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19-5-1-5-Plenoptic-Function%EF%BC%9AP-%CE%B8-%CE%A6-%CE%BB-t-V-X-V-Y-V-Z"><span class="toc-text">19.5.1.5    Plenoptic Function：P(θ, Φ, λ, t, V~X~, V~Y~, V~Z~)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-5-2-%E5%85%89%E7%BA%BF%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-text">19.5.2    光线的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-5-3-%E5%85%A8%E5%85%89%E8%A1%A8%E9%9D%A2-Plenoptic-Surface"><span class="toc-text">19.5.3    全光表面 Plenoptic Surface</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-5-4-%E5%85%89%E5%9C%BA"><span class="toc-text">19.5.4    光场</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-5-5-Lumigraph-Organization"><span class="toc-text">19.5.5    Lumigraph-Organization</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC20%E8%AF%BE-%E9%A2%9C%E8%89%B2%E4%B8%8E%E8%A7%86%E8%A7%89"><span class="toc-text">第20课    颜色与视觉</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC21%E8%AF%BE-%E5%8A%A8%E7%94%BB-%E6%A8%A1%E6%8B%9F-%E4%BB%BF%E7%9C%9F"><span class="toc-text">第21课    动画&#x2F;模拟&#x2F;仿真</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21-1-%E5%85%B3%E9%94%AE%E5%B8%A7%E5%8A%A8%E7%94%BB"><span class="toc-text">21.1    关键帧动画</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-2-%E7%89%A9%E7%90%86%E6%A8%A1%E6%8B%9F"><span class="toc-text">21.2    物理模拟</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-2-1-%E8%B4%A8%E7%82%B9%E5%BC%B9%E7%B0%A7%E7%B3%BB%E7%BB%9F-Mass-Spring-System"><span class="toc-text">21.2.1    质点弹簧系统 Mass Spring System</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#21-2-1-1-%E7%90%86%E6%83%B3%E5%BC%B9%E7%B0%A7"><span class="toc-text">21.2.1.1    理想弹簧</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21-2-1-2-%E9%9D%9E%E9%9B%B6%E9%95%BF%E5%BA%A6%E5%BC%B9%E7%B0%A7"><span class="toc-text">21.2.1.2    非零长度弹簧</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21-2-1-3-%E6%B7%BB%E5%8A%A0%E8%83%BD%E9%87%8F%E6%B5%81%E5%A4%B1"><span class="toc-text">21.2.1.3    添加能量流失</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21-2-1-4-%E6%B7%BB%E5%8A%A0%E5%86%85%E9%83%A8%E9%98%BB%E5%B0%BC"><span class="toc-text">21.2.1.4    添加内部阻尼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21-2-1-5-%E5%BC%B9%E7%B0%A7%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">21.2.1.5    弹簧的结构</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/07/19/cmake%E6%8C%87%E4%BB%A4%E5%90%88%E9%9B%86/" title="cmake指令合集">cmake指令合集</a><time datetime="2023-07-19T12:19:11.000Z" title="发表于 2023-07-19 20:19:11">2023-07-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/07/15/cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="cmake学习笔记">cmake学习笔记</a><time datetime="2023-07-15T10:00:00.000Z" title="发表于 2023-07-15 18:00:00">2023-07-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/07/13/hexo%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/" title="hexo常用指令">hexo常用指令</a><time datetime="2023-07-13T13:11:11.000Z" title="发表于 2023-07-13 21:11:11">2023-07-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/04/01/GAMES104/" title="GAMES104">GAMES104</a><time datetime="2023-04-01T04:49:00.000Z" title="发表于 2023-04-01 12:49:00">2023-04-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/01/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" title="人工智能">人工智能</a><time datetime="2023-03-01T02:00:00.000Z" title="发表于 2023-03-01 10:00:00">2023-03-01</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 华丰夏</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>